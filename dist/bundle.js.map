{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://witch-game/./src/actionTab.ts","webpack://witch-game/./src/astarclass.ts","webpack://witch-game/./src/drawable.ts","webpack://witch-game/./src/entity/armoredzombieEnemy.ts","webpack://witch-game/./src/entity/barrel.ts","webpack://witch-game/./src/entity/bigKnightEnemy.ts","webpack://witch-game/./src/entity/bigSkullEnemy.ts","webpack://witch-game/./src/entity/bishopEnemy.ts","webpack://witch-game/./src/entity/chargeEnemy.ts","webpack://witch-game/./src/entity/chest.ts","webpack://witch-game/./src/entity/coalResource.ts","webpack://witch-game/./src/entity/crabEnemy.ts","webpack://witch-game/./src/entity/crate.ts","webpack://witch-game/./src/entity/emeraldResource.ts","webpack://witch-game/./src/entity/entity.ts","webpack://witch-game/./src/entity/frogEnemy.ts","webpack://witch-game/./src/entity/goldResource.ts","webpack://witch-game/./src/entity/knightEnemy.ts","webpack://witch-game/./src/entity/mushrooms.ts","webpack://witch-game/./src/entity/pot.ts","webpack://witch-game/./src/entity/pottedPlant.ts","webpack://witch-game/./src/entity/queenEnemy.ts","webpack://witch-game/./src/entity/resource.ts","webpack://witch-game/./src/entity/rockResource.ts","webpack://witch-game/./src/entity/skullEnemy.ts","webpack://witch-game/./src/entity/sniperEnemy.ts","webpack://witch-game/./src/entity/spawner.ts","webpack://witch-game/./src/entity/tombStone.ts","webpack://witch-game/./src/entity/vendingMachine.ts","webpack://witch-game/./src/entity/wizardEnemy.ts","webpack://witch-game/./src/entity/zombieEnemy.ts","webpack://witch-game/./src/game.ts","webpack://witch-game/./src/gameConstants.ts","webpack://witch-game/./src/gameState.ts","webpack://witch-game/./src/healthbar.ts","webpack://witch-game/./src/hitWarning.ts","webpack://witch-game/./src/input.ts","webpack://witch-game/./src/inventory.ts","webpack://witch-game/./src/item/armor.ts","webpack://witch-game/./src/item/backpack.ts","webpack://witch-game/./src/item/bluegem.ts","webpack://witch-game/./src/item/candle.ts","webpack://witch-game/./src/item/coal.ts","webpack://witch-game/./src/item/coin.ts","webpack://witch-game/./src/item/equippable.ts","webpack://witch-game/./src/item/gold.ts","webpack://witch-game/./src/item/goldenKey.ts","webpack://witch-game/./src/item/greengem.ts","webpack://witch-game/./src/item/heart.ts","webpack://witch-game/./src/item/item.ts","webpack://witch-game/./src/item/key.ts","webpack://witch-game/./src/item/lantern.ts","webpack://witch-game/./src/item/light.ts","webpack://witch-game/./src/item/redgem.ts","webpack://witch-game/./src/item/shrooms.ts","webpack://witch-game/./src/item/stone.ts","webpack://witch-game/./src/item/torch.ts","webpack://witch-game/./src/item/usable.ts","webpack://witch-game/./src/levelConstants.ts","webpack://witch-game/./src/levelGenerator.ts","webpack://witch-game/./src/lightSource.ts","webpack://witch-game/./src/map.ts","webpack://witch-game/./src/particle/deathParticle.ts","webpack://witch-game/./src/particle/genericParticle.ts","webpack://witch-game/./src/particle/imageParticle.ts","webpack://witch-game/./src/particle/particle.ts","webpack://witch-game/./src/particle/slashParticle.ts","webpack://witch-game/./src/particle/wizardTeleportParticle.ts","webpack://witch-game/./src/player.ts","webpack://witch-game/./src/postProcess.ts","webpack://witch-game/./src/projectile/enemySpawnAnimation.ts","webpack://witch-game/./src/projectile/playerFireball.ts","webpack://witch-game/./src/projectile/projectile.ts","webpack://witch-game/./src/projectile/wizardFireball.ts","webpack://witch-game/./src/random.ts","webpack://witch-game/./src/room.ts","webpack://witch-game/./src/sound.ts","webpack://witch-game/./src/textbox.ts","webpack://witch-game/./src/tile/bones.ts","webpack://witch-game/./src/tile/button.ts","webpack://witch-game/./src/tile/chasm.ts","webpack://witch-game/./src/tile/coffinTile.ts","webpack://witch-game/./src/tile/door.ts","webpack://witch-game/./src/tile/downLadder.ts","webpack://witch-game/./src/tile/floor.ts","webpack://witch-game/./src/tile/fountainTile.ts","webpack://witch-game/./src/tile/insideLevelDoor.ts","webpack://witch-game/./src/tile/spawnfloor.ts","webpack://witch-game/./src/tile/spike.ts","webpack://witch-game/./src/tile/spiketrap.ts","webpack://witch-game/./src/tile/tile.ts","webpack://witch-game/./src/tile/trapdoor.ts","webpack://witch-game/./src/tile/upLadder.ts","webpack://witch-game/./src/tile/wall.ts","webpack://witch-game/./src/tile/wallTorch.ts","webpack://witch-game/./src/weapon/dagger.ts","webpack://witch-game/./src/weapon/dualdagger.ts","webpack://witch-game/./src/weapon/pickaxe.ts","webpack://witch-game/./src/weapon/shotgun.ts","webpack://witch-game/./src/weapon/spear.ts","webpack://witch-game/./src/weapon/spellbook.ts","webpack://witch-game/./src/weapon/weapon.ts","webpack://witch-game/webpack/bootstrap","webpack://witch-game/webpack/before-startup","webpack://witch-game/webpack/startup","webpack://witch-game/webpack/after-startup"],"sourcesContent":["import { Game } from \"./game\";\r\nimport { LevelConstants } from \"./levelConstants\";\r\nimport { Inventory } from \"./inventory\";\r\nimport { GameConstants } from \"./gameConstants\";\r\nimport { Player } from \"./player\";\r\n\r\nexport enum ActionState {\r\n  READY,\r\n  ATTACK,\r\n  WAIT,\r\n  HALFATTACK,\r\n  MOVE\r\n}\r\n\r\nexport class ActionTab {\r\n  actionState: ActionState;\r\n  weapon: any;\r\n  game: Game;\r\n\r\n  constructor(inventory: Inventory, game: Game) {\r\n    this.weapon = inventory.weapon;\r\n    this.game = game;\r\n  }\r\n\r\n  tick = () => {};\r\n\r\n  getWeapon = (player: Player) => {\r\n    this.weapon = player.inventory.weapon;\r\n  };\r\n  setState = (state: ActionState) => {\r\n    this.actionState = state;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    let tabX = LevelConstants.SCREEN_W / 2;\r\n    let tabY = LevelConstants.SCREEN_H - 1;\r\n\r\n    let action = this.actionState;\r\n    const actionString: string = \"\" + ActionState[action]\r\n    let width = Game.measureText(actionString).width;\r\n    let actionX = 4 - width/2;\r\n    let actionY = -1;\r\n\r\n    Game.fillTextOutline(\r\n      actionString,\r\n      tabX * GameConstants.TILESIZE + actionX,\r\n      tabY * GameConstants.TILESIZE + actionY,\r\n      GameConstants.OUTLINE,\r\n      \"white\"\r\n    );\r\n  };\r\n}\r\n","import { EntityDirection } from \"./entity/entity\";\r\nimport { SpikeTrap } from \"./tile/spiketrap\";\r\nimport { Wall } from \"./tile/wall\";\r\n\r\nexport namespace astar {\r\n  //================== start graph js\r\n  /* \r\n  graph.js http://github.com/bgrins/javascript-astar\r\n  MIT License\r\n  Creates a Graph class used in the astar search algorithm.\r\n  Includes Binary Heap (with modifications) from Marijn Haverbeke \r\n      URL: http://eloquentjavascript.net/appendix2.html\r\n      License: http://creativecommons.org/licenses/by/3.0/\r\n  */\r\n\r\n  export interface Position {\r\n    x: number;\r\n    y: number;\r\n  }\r\n\r\n  export enum GraphNodeType {\r\n    WALL,\r\n    OPEN,\r\n  }\r\n\r\n  let getTileCost = tile => {\r\n    if (tile)\r\n      return (tile.isSolid() || tile.isDoor) ? 99999999 : 1;\r\n    else\r\n      return 99999999;\r\n  };\r\n\r\n  export class Graph {\r\n    nodes: GraphNode[][];\r\n    elements: number[][];\r\n\r\n    constructor(grid: number[][]) {\r\n      this.elements = grid;\r\n      var nodes: GraphNode[][] = [];\r\n      var row: number[],\r\n        rowLength: number,\r\n        len = grid.length;\r\n      for (var x = 0; x < len; ++x) {\r\n        row = grid[x];\r\n        rowLength = row.length;\r\n        nodes[x] = new Array(rowLength); // optimum array with size\r\n        for (var y = 0; y < rowLength; ++y) {\r\n          nodes[x][y] = new GraphNode(x, y, row[y]);\r\n        }\r\n      }\r\n      this.nodes = nodes;\r\n    }\r\n\r\n    toString(): string {\r\n      var graphString = \"\\n\";\r\n      var nodes = this.nodes;\r\n      var rowDebug: string, row: GraphNode[], y: number, l: number;\r\n      for (var x = 0, len = nodes.length; x < len;) {\r\n        rowDebug = \"\";\r\n        row = nodes[x++];\r\n        for (y = 0, l = row.length; y < l;) {\r\n          rowDebug += row[y++].type + \" \";\r\n        }\r\n        graphString = graphString + rowDebug + \"\\n\";\r\n      }\r\n      return graphString;\r\n    }\r\n  }\r\n\r\n  export class GraphNode {\r\n    x: number;\r\n    y: number;\r\n    type: GraphNodeType;\r\n    data: any;\r\n    pos: Position;\r\n\r\n    constructor(x: number, y: number, type: GraphNodeType) {\r\n      this.data = {};\r\n      this.x = x;\r\n      this.y = y;\r\n      this.pos = { x: x, y: y };\r\n      this.type = type;\r\n    }\r\n\r\n    toString(): string {\r\n      return \"[\" + this.x + \" \" + this.y + \"]\";\r\n    }\r\n\r\n    isWall() {\r\n      return this.type == GraphNodeType.WALL;\r\n    }\r\n  }\r\n\r\n  export class BinaryHeap {\r\n    content: any[];\r\n    scoreFunction: (node: any) => number;\r\n\r\n    constructor(scoreFunction: (node: any) => number) {\r\n      this.content = [];\r\n      this.scoreFunction = scoreFunction;\r\n    }\r\n\r\n    push(node: any) {\r\n      // Add the new node to the end of the array.\r\n      this.content.push(node);\r\n      // Allow it to sink down.\r\n      this.sinkDown(this.content.length - 1);\r\n    }\r\n\r\n    pop() {\r\n      // Store the first node so we can return it later.\r\n      var result = this.content[0];\r\n      // Get the node at the end of the array.\r\n      var end = this.content.pop();\r\n      // If there are any elements left, put the end node at the\r\n      // start, and let it bubble up.\r\n      if (this.content.length > 0) {\r\n        this.content[0] = end;\r\n        this.bubbleUp(0);\r\n      }\r\n      return result;\r\n    }\r\n\r\n    remove(node: any) {\r\n      var i = this.content.indexOf(node);\r\n\r\n      // When it is found, the process seen in 'pop' is repeated\r\n      // to fill up the hole.\r\n      var end = this.content.pop();\r\n      if (i !== this.content.length - 1) {\r\n        this.content[i] = end;\r\n        if (this.scoreFunction(end) < this.scoreFunction(node)) this.sinkDown(i);\r\n        else this.bubbleUp(i);\r\n      }\r\n    }\r\n\r\n    size() {\r\n      return this.content.length;\r\n    }\r\n\r\n    rescoreElement(node: any) {\r\n      this.sinkDown(this.content.indexOf(node));\r\n    }\r\n\r\n    sinkDown(n: number) {\r\n      // Fetch the element that has to be sunk.\r\n      var element = this.content[n];\r\n      // When at 0, an element can not sink any further.\r\n      while (n > 0) {\r\n        // Compute the parent element's index, and fetch it.\r\n        var parentN = ((n + 1) >> 1) - 1,\r\n          parent = this.content[parentN];\r\n        // Swap the elements if the parent is greater.\r\n        if (this.scoreFunction(element) < this.scoreFunction(parent)) {\r\n          this.content[parentN] = element;\r\n          this.content[n] = parent;\r\n          // Update 'n' to continue at the new position.\r\n          n = parentN;\r\n        } else {\r\n          // Found a parent that is less, no need to sink any further.\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    bubbleUp(n: number) {\r\n      // Look up the target element and its score.\r\n      var length = this.content.length,\r\n        element = this.content[n],\r\n        elemScore = this.scoreFunction(element);\r\n\r\n      while (true) {\r\n        // Compute the indices of the child elements.\r\n        var child2N = (n + 1) << 1,\r\n          child1N = child2N - 1;\r\n        // This is used to store the new position of the element,\r\n        // if any.\r\n        var swap = null;\r\n        // If the first child exists (is inside the array)...\r\n        if (child1N < length) {\r\n          // Look it up and compute its score.\r\n          var child1 = this.content[child1N],\r\n            child1Score = this.scoreFunction(child1);\r\n          // If the score is less than our element's, we need to swap.\r\n          if (child1Score < elemScore) swap = child1N;\r\n        }\r\n        // Do the same checks for the other child.\r\n        if (child2N < length) {\r\n          var child2 = this.content[child2N],\r\n            child2Score = this.scoreFunction(child2);\r\n          if (child2Score < (swap === null ? elemScore : child1Score)) swap = child2N;\r\n        }\r\n\r\n        // If the element needs to be moved, swap it, and continue.\r\n        if (swap !== null) {\r\n          this.content[n] = this.content[swap];\r\n          this.content[swap] = element;\r\n          n = swap;\r\n        } else {\r\n          // Otherwise, we are done.\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //end graph.js ==================\r\n\r\n  // javascript-astar\r\n  // http://github.com/bgrins/javascript-astar\r\n  // Freely distributable under the MIT License.\r\n  // Implements the astar search algorithm in javascript using a binary heap.\r\n  export interface AStarData {\r\n    f: number;\r\n    g: number;\r\n    h: number;\r\n    cost: number;\r\n    visited: boolean;\r\n    closed: boolean;\r\n    parent: AStarData;\r\n    pos: Position;\r\n    org: any;\r\n  }\r\n\r\n  export class AStar {\r\n    static NO_CHECK_START_POINT: boolean = false;\r\n    grid: AStarData[][];\r\n    constructor(grid: any[][], disablePoints?: Position[], enableCost?: boolean) {\r\n      this.grid = [];\r\n      for (var x = 0, xl = grid.length; x < xl; x++) {\r\n        this.grid[x] = [];\r\n        for (var y = 0, yl = grid[x].length; y < yl; y++) {\r\n          var cost = getTileCost(grid[x][y]);\r\n          this.grid[x][y] = {\r\n            org: grid[x][y],\r\n            f: 0,\r\n            g: 0,\r\n            h: 0,\r\n            cost: cost,\r\n            visited: false,\r\n            closed: false,\r\n            pos: {\r\n              x: x,\r\n              y: y,\r\n            },\r\n            parent: null,\r\n          };\r\n        }\r\n      }\r\n      if (disablePoints !== undefined) {\r\n        for (var i = 0; i < disablePoints.length; i++)\r\n          this.grid[disablePoints[i].x][disablePoints[i].y].cost = 99999999;\r\n      }\r\n    }\r\n\r\n    heap(): BinaryHeap {\r\n      return new BinaryHeap(function (node: AStarData) {\r\n        return node.f;\r\n      });\r\n    }\r\n\r\n    _find(org: any) {\r\n      for (var x = 0; x < this.grid.length; x++)\r\n        for (var y = 0; y < this.grid[x].length; y++)\r\n          if (this.grid[x][y].org == org) return this.grid[x][y];\r\n    }\r\n\r\n    _search(start: any, end: any, diagonal?: boolean, diagonalsOnly?: boolean, turnCostsExtra?: boolean, turnDirection?: EntityDirection, heuristic?: Function, diagonalsOmni?: boolean) {\r\n      heuristic = heuristic || this.manhattan;\r\n      diagonal = !!diagonal;\r\n      diagonalsOnly = !!diagonalsOnly;\r\n      turnCostsExtra = !!turnCostsExtra;\r\n      diagonalsOmni = !!diagonalsOmni;\r\n\r\n      var openHeap = this.heap();\r\n\r\n      var _start: AStarData, _end: AStarData;\r\n      if (start.x !== undefined && start.y !== undefined) _start = this.grid[start.x][start.y];\r\n      else _start = this._find(start);\r\n\r\n      if (end.x !== undefined && end.y !== undefined) _end = this.grid[end.x][end.y];\r\n      else _end = this._find(end);\r\n\r\n      if (AStar.NO_CHECK_START_POINT == false && _start.cost <= 0) return [];\r\n\r\n      openHeap.push(_start);\r\n\r\n      while (openHeap.size() > 0) {\r\n        // Grab the lowest f(x) to process next.  Heap keeps this sorted for us.\r\n        var currentNode: AStarData = openHeap.pop();\r\n\r\n        // End case -- result has been found, return the traced path.\r\n        if (currentNode === _end) {\r\n          var curr = currentNode;\r\n          var ret = [];\r\n          while (curr.parent) {\r\n            ret.push(curr);\r\n            curr = curr.parent;\r\n          }\r\n          return ret.reverse();\r\n        }\r\n\r\n        // Normal case -- move currentNode from open to closed, process each of its neighbors.\r\n        currentNode.closed = true;\r\n\r\n        // Find all neighbors for the current node. Optionally find diagonal neighbors as well (false by default).\r\n        var neighbors = this.neighbors(currentNode, diagonal, diagonalsOnly, diagonalsOmni);\r\n\r\n        for (var i = 0, il = neighbors.length; i < il; i++) {\r\n          var neighbor = neighbors[i];\r\n\r\n          if (neighbor.closed || neighbor.cost <= 0) {\r\n            // Not a valid node to process, skip to next neighbor.\r\n            continue;\r\n          }\r\n\r\n          // The g score is the shortest distance from start to current node.\r\n          // We need to check if the path we have arrived at this neighbor is the shortest one we have seen yet.\r\n\r\n          var gScore = currentNode.g + neighbor.cost;\r\n          if (turnCostsExtra) {\r\n            var isTurn = false;\r\n            if (currentNode.parent)\r\n              isTurn = !((currentNode.parent.pos.x === currentNode.pos.x && currentNode.pos.x === neighbor.pos.x) || (currentNode.parent.pos.y === currentNode.pos.y && currentNode.pos.y === neighbor.pos.y));\r\n            else { // initial step\r\n              isTurn = true;\r\n              if (neighbor.pos.x - currentNode.pos.x === 0 && neighbor.pos.y - currentNode.pos.y === -1 && turnDirection === EntityDirection.UP) isTurn = false;\r\n              if (neighbor.pos.x - currentNode.pos.x === 0 && neighbor.pos.y - currentNode.pos.y === 1 && turnDirection === EntityDirection.DOWN) isTurn = false;\r\n              if (neighbor.pos.x - currentNode.pos.x === 1 && neighbor.pos.y - currentNode.pos.y === 0 && turnDirection === EntityDirection.RIGHT) isTurn = false;\r\n              if (neighbor.pos.x - currentNode.pos.x === -1 && neighbor.pos.y - currentNode.pos.y === 0 && turnDirection === EntityDirection.LEFT) isTurn = false;\r\n            }\r\n            if (isTurn) gScore++;\r\n          }\r\n          var beenVisited = neighbor.visited;\r\n\r\n          if (!beenVisited || gScore < neighbor.g) {\r\n            // Found an optimal (so far) path to this node.  Take score for node to see how good it is.\r\n            neighbor.visited = true;\r\n            neighbor.parent = currentNode;\r\n            neighbor.h = neighbor.h || heuristic(neighbor.pos, _end.pos);\r\n            neighbor.g = gScore;\r\n            neighbor.f = neighbor.g + neighbor.h;\r\n\r\n            if (!beenVisited) {\r\n              // Pushing to heap will put it in proper place based on the 'f' value.\r\n              openHeap.push(neighbor);\r\n            } else {\r\n              // Already seen the node, but since it has been rescored we need to reorder it in the heap\r\n              openHeap.rescoreElement(neighbor);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // No result was found - empty array signifies failure to find path.\r\n      return [];\r\n    }\r\n\r\n    static search(\r\n      grid: any[][],\r\n      start: any,\r\n      end: any,\r\n      disablePoints?: Position[],\r\n      diagonal?: boolean,\r\n      diagonalsOnly?: boolean,\r\n      turnCostsExtra?: boolean,\r\n      turnDirection?: EntityDirection,\r\n      heuristic?: Function,\r\n      diagonalsOmni?: boolean\r\n    ) {\r\n      var astar = new AStar(grid, disablePoints);\r\n      return astar._search(start, end, diagonal, diagonalsOnly, turnCostsExtra, turnDirection, heuristic, diagonalsOmni);\r\n    }\r\n\r\n    manhattan(pos0: Position, pos1: Position): number {\r\n      // See list of heuristics: http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html\r\n\r\n      var d1 = Math.abs(pos1.x - pos0.x);\r\n      var d2 = Math.abs(pos1.y - pos0.y);\r\n      return d1 + d2;\r\n    }\r\n\r\n    neighbors(node: AStarData, diagonals?: boolean, diagonalsOnly?: boolean, diagonalsOmni?: boolean): AStarData[] {\r\n      var grid = this.grid;\r\n      var ret = [];\r\n      var x = node.pos.x;\r\n      var y = node.pos.y;\r\n\r\n      if (!diagonalsOnly) {\r\n        // West\r\n        if (grid[x - 1] && grid[x - 1][y]) {\r\n          ret.push(grid[x - 1][y]);\r\n        }\r\n\r\n        // East\r\n        if (grid[x + 1] && grid[x + 1][y]) {\r\n          ret.push(grid[x + 1][y]);\r\n        }\r\n\r\n        // South\r\n        if (grid[x] && grid[x][y - 1]) {\r\n          ret.push(grid[x][y - 1]);\r\n        }\r\n\r\n        // North\r\n        if (grid[x] && grid[x][y + 1]) {\r\n          ret.push(grid[x][y + 1]);\r\n        }\r\n      }\r\n\r\n      if (diagonals) {\r\n        // Southwest\r\n        if (grid[x - 1] && grid[x - 1][y - 1]) {\r\n          ret.push(grid[x - 1][y - 1]);\r\n        }\r\n\r\n        // Southeast\r\n        if (grid[x + 1] && grid[x + 1][y - 1]) {\r\n          ret.push(grid[x + 1][y - 1]);\r\n        }\r\n\r\n        // Northwest\r\n        if (grid[x - 1] && grid[x - 1][y + 1]) {\r\n          ret.push(grid[x - 1][y + 1]);\r\n        }\r\n\r\n        // Northeast\r\n        if (grid[x + 1] && grid[x + 1][y + 1]) {\r\n          ret.push(grid[x + 1][y + 1]);\r\n        }\r\n      }\r\n      function getRandomBoolean(): boolean {\r\n        return Math.random() < 0.5;\r\n    }\r\n      if (diagonalsOmni) {\r\n        const randomBool: boolean = getRandomBoolean();\r\n        // West\r\n        if (grid[x - 1] && grid[x - 1][y]) {\r\n          // Instead of pushing West, choose between Southwest and Northwest\r\n          if (randomBool == true) {\r\n            ret.push(grid[x - 1][y - 1]), console.log(\"Southwest\");\r\n            return;\r\n          } else {\r\n            ret.push(grid[x - 1][y + 1]), console.log(\"Northwest\");\r\n            return;\r\n          }\r\n        }\r\n        // East\r\n        if (grid[x + 1] && grid[x + 1][y]) {\r\n          if (randomBool == true) {\r\n            ret.push(grid[x + 1][y - 1]), console.log(\"Southeast\");\r\n            return;\r\n          } else {\r\n            ret.push(grid[x + 1][y + 1]), console.log(\"Northeast\");\r\n            return;\r\n          }\r\n        }\r\n        // South\r\n        if (grid[x] && grid[x][y - 1]) {\r\n          if (randomBool == true) {\r\n            ret.push(grid[x - 1][y - 1]), console.log(\"Southwest\");\r\n            return;\r\n          } else {\r\n            ret.push(grid[x + 1][y - 1]), console.log(\"Southeast\");\r\n            return;\r\n          }\r\n        }\r\n        // North\r\n        if (grid[x] && grid[x][y + 1]) {\r\n          if (randomBool == true) {\r\n            ret.push(grid[x - 1][y + 1]), console.log(\"Northwest\");\r\n            return;\r\n          } else {\r\n            ret.push(grid[x + 1][y + 1]), console.log(\"Northeast\");\r\n            return;\r\n          }\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n    \r\n\r\n      return ret;\r\n    }\r\n  }\r\n}\r\n","export class Drawable {\r\n  drawableY = 0;\r\n\r\n  draw = (delta: number) => {};\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Random } from \"../random\";\r\nimport { astar } from \"../astarclass\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { Pickaxe } from \"../weapon/pickaxe\";\r\nimport { Armor } from \"../item/armor\";\r\n\r\nexport class ArmoredzombieEnemy extends Entity {\r\n  frame: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  aggro: boolean;\r\n  targetPlayer: Player;\r\n  drop: Item;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 2;\r\n    this.maxHealth = 1;\r\n    this.tileX = 17;\r\n    this.tileY = 8;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n    this.deathParticleColor = \"#ffffff\";\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = Random.rand();\r\n      if (dropProb < 0.05) this.drop = new Armor(this.room, 0, 0);\r\n      else if (dropProb < 0.01) this.drop = new GreenGem(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"zombie\";\r\n  }\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      //this.facePlayer(playerHitBy); //\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.health -= damage;\r\n    this.healthBar.hurt();\r\n    if (this.health <= 0) {\r\n      this.kill();\r\n    } else {\r\n      GenericParticle.spawnCluster(\r\n        this.room,\r\n        this.x + 0.5,\r\n        this.y + 0.5,\r\n        this.deathParticleColor\r\n      );\r\n    }\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      this.ticks++;\r\n      if (!this.seenPlayer) {\r\n        let p = this.nearestPlayer();\r\n        if (p !== false) {\r\n          let [distance, player] = p;\r\n          if (distance <= 4) {\r\n            this.targetPlayer = player;\r\n            this.facePlayer(player);\r\n            this.seenPlayer = true;\r\n            if (player === this.game.players[this.game.localPlayerID])\r\n              this.alertTicks = 1;\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        if (this.room.playerTicked === this.targetPlayer) {\r\n          this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n          let oldX = this.x;\r\n          let oldY = this.y;\r\n\r\n          let disablePositions = Array<astar.Position>();\r\n          for (const e of this.room.entities) {\r\n            if (e !== this) {\r\n              disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n            }\r\n          }\r\n          for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n            for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n              if (\r\n                this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n              ) {\r\n                // don't walk on active spiketraps\r\n                disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n              }\r\n            }\r\n          }\r\n\r\n          let grid = [];\r\n          for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n            grid[x] = [];\r\n            for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n              if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                grid[x][y] = this.room.roomArray[x][y];\r\n              else grid[x][y] = false;\r\n            }\r\n          }\r\n          let moves = astar.AStar.search(\r\n            grid,\r\n            this,\r\n            this.targetPlayer,\r\n            disablePositions,\r\n            false,\r\n            false,\r\n            true,\r\n            this.direction\r\n          );\r\n          if (moves.length > 0) {\r\n            let moveX = moves[0].pos.x;\r\n            let moveY = moves[0].pos.y;\r\n            let oldDir = this.direction;\r\n            let player = this.targetPlayer;\r\n            this.facePlayer(player);\r\n            if (moveX > oldX) this.direction = EntityDirection.RIGHT;\r\n            else if (moveX < oldX) this.direction = EntityDirection.LEFT;\r\n            else if (moveY > oldY) this.direction = EntityDirection.DOWN;\r\n            else if (moveY < oldY) this.direction = EntityDirection.UP;\r\n            if (oldDir == this.direction) {\r\n              let hitPlayer = false;\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  this.game.players[i].x === moveX &&\r\n                  this.game.players[i].y === moveY &&\r\n                  oldDir == this.direction\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                }\r\n              }\r\n              if (!hitPlayer) {\r\n                this.tryMove(moveX, moveY);\r\n                this.drawX = this.x - oldX;\r\n                this.drawY = this.y - oldY;\r\n                if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n                else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n                else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n                else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (this.direction == EntityDirection.LEFT) {\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y + 1,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y - 1,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.RIGHT) {\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y + 1,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y - 1,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.DOWN) {\r\n            disablePositions.push({\r\n              x: this.x + 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x - 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.UP) {\r\n            disablePositions.push({\r\n              x: this.x + 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x - 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n          }\r\n          this.makeHitWarnings(false, false, true, this.direction);\r\n        }\r\n\r\n        let targetPlayerOffline =\r\n          Object.values(this.game.offlinePlayers).indexOf(this.targetPlayer) !==\r\n          -1;\r\n        if (!this.aggro || targetPlayerOffline) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (\r\n              distance <= 4 &&\r\n              (targetPlayerOffline ||\r\n                distance < this.playerDistance(this.targetPlayer))\r\n            ) {\r\n              if (player !== this.targetPlayer) {\r\n                this.targetPlayer = player;\r\n                this.facePlayer(player);\r\n                if (player === this.game.players[this.game.localPlayerID])\r\n                  this.alertTicks = 1;\r\n                this.makeHitWarnings(false, false, true, this.direction);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.tileX = 27;\r\n      this.tileY = 8;\r\n      if (this.health <= 1) {\r\n        this.tileX = 17;\r\n        this.tileY = 8;\r\n      }\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + (this.tileX === 5 ? Math.floor(this.frame) : 0),\r\n        this.tileY + this.direction * 2,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta);\r\n    }\r\n  };\r\n}\r\n","import { Entity } from \"./entity\";\r\nimport { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { EntityType } from \"./entity\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class Barrel extends Entity {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n    this.room = room;\r\n    this.health = 1;\r\n    this.tileX = 1;\r\n    this.tileY = 0;\r\n    this.hasShadow = false;\r\n    this.pushable = true;\r\n    this.entityType = EntityType.PROP;\r\n  }\r\n\r\n  get name() {\r\n    return \"barrel\";\r\n  }\r\n\r\n  kill = () => {\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 3, 25);\r\n\r\n    this.dead = true;\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    // not inherited because it doesn't have the 0.5 offset\r\n    if (!this.dead) {\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n\r\n    this.drawX += -0.5 * this.drawX;\r\n    this.drawY += -0.5 * this.drawY;\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { DeathParticle } from \"../particle/deathParticle\";\r\n\r\nexport class BigKnightEnemy extends Entity {\r\n  frame: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  ticksSinceFirstHit: number;\r\n  flashingFrame: number;\r\n  targetPlayer: Player;\r\n  aggro: boolean;\r\n  readonly REGEN_TICKS = 5;\r\n  drops: Array<Item>;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.w = 2;\r\n    this.h = 2;\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 4;\r\n    this.maxHealth = 4;\r\n    this.tileX = 29;\r\n    this.tileY = 0;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n    this.ticksSinceFirstHit = 0;\r\n    this.flashingFrame = 0;\r\n    this.deathParticleColor = \"#ffffff\";\r\n    this.chainPushable = false;\r\n\r\n    this.drops = [];\r\n    if (drop) this.drops.push(drop);\r\n    while (this.drops.length < 4) {\r\n      let dropProb = rand();\r\n      if (dropProb < 0.005) this.drops.push(new Spear(this.room, 0, 0));\r\n      else if (dropProb < 0.04) this.drops.push(new RedGem(this.room, 0, 0));\r\n      else if (dropProb < 0.075) this.drops.push(new RedGem(this.room, 0, 0));\r\n      else if (dropProb < 0.1) this.drops.push(new RedGem(this.room, 0, 0));\r\n      else this.drops.push(new Coin(this.room, 0, 0));\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"giant knight\";\r\n  }\r\n\r\n  addHitWarnings = () => {\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x - 1, this.y, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x - 1, this.y + 1, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x + 2, this.y, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x + 2, this.y + 1, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x, this.y - 1, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x + 1, this.y - 1, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x, this.y + 2, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x + 1, this.y + 2, this.x, this.y)\r\n    );\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.ticksSinceFirstHit = 0;\r\n    this.health -= damage;\r\n    this.healthBar.hurt();\r\n    if (this.health <= 0) {\r\n      this.kill();\r\n    } else {\r\n      GenericParticle.spawnCluster(\r\n        this.room,\r\n        this.x + 1,\r\n        this.y + 1,\r\n        this.deathParticleColor\r\n      );\r\n    }\r\n  };\r\n\r\n  killNoBones = () => {\r\n    this.dead = true;\r\n    GenericParticle.spawnCluster(\r\n      this.room,\r\n      this.x + 1,\r\n      this.y + 1,\r\n      this.deathParticleColor\r\n    );\r\n    this.room.particles.push(new DeathParticle(this.x + 0.5, this.y + 0.5));\r\n\r\n    this.dropLoot();\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      if (this.health == 1) {\r\n        this.ticksSinceFirstHit++;\r\n        if (this.ticksSinceFirstHit >= this.REGEN_TICKS) {\r\n          this.health++;\r\n          this.ticksSinceFirstHit = 0;\r\n        }\r\n      } else {\r\n        this.ticks++;\r\n        if (!this.seenPlayer) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (distance <= 4) {\r\n              this.targetPlayer = player;\r\n              this.facePlayer(player);\r\n              this.seenPlayer = true;\r\n              if (player === this.game.players[this.game.localPlayerID])\r\n                this.alertTicks = 1;\r\n              if (this.health >= 3) this.addHitWarnings();\r\n            }\r\n          }\r\n        } else if (this.seenPlayer) {\r\n          if (this.room.playerTicked === this.targetPlayer) {\r\n            this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n            let oldX = this.x;\r\n            let oldY = this.y;\r\n            let moveX = this.x;\r\n            let moveY = this.y;\r\n            if (this.ticks % 2 === 0) {\r\n              // horizontal preference\r\n              if (this.targetPlayer.x >= this.x + this.w) moveX++;\r\n              else if (this.targetPlayer.x < this.x) moveX--;\r\n              else if (this.targetPlayer.y >= this.y + this.h) moveY++;\r\n              else if (this.targetPlayer.y < this.y) moveY--;\r\n            } else {\r\n              // vertical preference\r\n              if (this.targetPlayer.y >= this.y + this.h) moveY++;\r\n              else if (this.targetPlayer.y < this.y) moveY--;\r\n              else if (this.targetPlayer.x >= this.x + this.w) moveX++;\r\n              else if (this.targetPlayer.x < this.x) moveX--;\r\n            }\r\n\r\n            let hitPlayer = false;\r\n            if (this.health >= 3) {\r\n              let wouldHit = (player: Player, moveX: number, moveY: number) => {\r\n                return (\r\n                  player.x >= moveX &&\r\n                  player.x < moveX + this.w &&\r\n                  player.y >= moveY &&\r\n                  player.y < moveY + this.h\r\n                );\r\n              };\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  wouldHit(this.game.players[i], moveX, moveY)\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                }\r\n              }\r\n            }\r\n            if (!hitPlayer) {\r\n              this.tryMove(moveX, moveY);\r\n              this.drawX = this.x - oldX;\r\n              this.drawY = this.y - oldY;\r\n              if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n              else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n              else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n              else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n            }\r\n\r\n            if (this.health < this.maxHealth) {\r\n              this.ticksSinceFirstHit++;\r\n              if (this.ticksSinceFirstHit >= this.REGEN_TICKS) {\r\n                this.health++;\r\n                this.ticksSinceFirstHit = 0;\r\n              }\r\n            }\r\n\r\n            if (this.health >= 3) this.addHitWarnings();\r\n          }\r\n\r\n          let targetPlayerOffline =\r\n            Object.values(this.game.offlinePlayers).indexOf(\r\n              this.targetPlayer\r\n            ) !== -1;\r\n          if (!this.aggro || targetPlayerOffline) {\r\n            let p = this.nearestPlayer();\r\n            if (p !== false) {\r\n              let [distance, player] = p;\r\n              if (\r\n                distance <= 4 &&\r\n                (targetPlayerOffline ||\r\n                  distance < this.playerDistance(this.targetPlayer))\r\n              ) {\r\n                if (player !== this.targetPlayer) {\r\n                  this.targetPlayer = player;\r\n                  this.facePlayer(player);\r\n                  if (player === this.game.players[this.game.localPlayerID])\r\n                    this.alertTicks = 1;\r\n                  if (this.health >= 3) this.addHitWarnings();\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    {\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          18,\r\n          0,\r\n          2,\r\n          2,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          2,\r\n          2,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        2 * Math.floor((this.tileX + this.frame) / 2) + 1,\r\n        this.tileY,\r\n        2,\r\n        4,\r\n        this.x - this.drawX,\r\n        this.y - 2.5 - this.drawY,\r\n        2,\r\n        4,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(\r\n        delta,\r\n        GameConstants.TILESIZE * 0.5,\r\n        GameConstants.TILESIZE * -1\r\n      );\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(\r\n        delta,\r\n        GameConstants.TILESIZE * 0.5,\r\n        GameConstants.TILESIZE * -1\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n\r\n    this.healthBar.draw(\r\n      delta,\r\n      this.health,\r\n      this.maxHealth,\r\n      this.x + 0.5,\r\n      this.y,\r\n      true\r\n    );\r\n    this.drawX += -0.5 * this.drawX;\r\n    this.drawY += -0.5 * this.drawY;\r\n  };\r\n\r\n  dropLoot = () => {\r\n    let dropOffsets = [\r\n      { x: 0, y: 0 },\r\n      { x: 1, y: 0 },\r\n      { x: 0, y: 1 },\r\n      { x: 1, y: 1 },\r\n    ];\r\n    for (let i = 0; i < this.drops.length; i++) {\r\n      this.drops[i].level = this.room;\r\n      this.drops[i].x = this.x + dropOffsets[i].x;\r\n      this.drops[i].y = this.y + dropOffsets[i].y;\r\n      this.room.items.push(this.drops[i]);\r\n    }\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { DeathParticle } from \"../particle/deathParticle\";\r\n\r\nexport class BigSkullEnemy extends Entity {\r\n  frame: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  ticksSinceFirstHit: number;\r\n  flashingFrame: number;\r\n  targetPlayer: Player;\r\n  aggro: boolean;\r\n  readonly REGEN_TICKS = 5;\r\n  drops: Array<Item>;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.w = 2;\r\n    this.h = 2;\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 4;\r\n    this.maxHealth = 4;\r\n    this.tileX = 21;\r\n    this.tileY = 0;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n    this.ticksSinceFirstHit = 0;\r\n    this.flashingFrame = 0;\r\n    this.deathParticleColor = \"#ffffff\";\r\n    this.chainPushable = false;\r\n\r\n    this.drops = [];\r\n    if (drop) this.drops.push(drop);\r\n    while (this.drops.length < 4) {\r\n      let dropProb = rand();\r\n      if (dropProb < 0.005) this.drops.push(new Spear(this.room, 0, 0));\r\n      else if (dropProb < 0.04) this.drops.push(new RedGem(this.room, 0, 0));\r\n      else if (dropProb < 0.075) this.drops.push(new RedGem(this.room, 0, 0));\r\n      else if (dropProb < 0.1) this.drops.push(new RedGem(this.room, 0, 0));\r\n      else this.drops.push(new Coin(this.room, 0, 0));\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"giant skeleton\";\r\n  }\r\n\r\n  addHitWarnings = () => {\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x - 1, this.y, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x - 1, this.y + 1, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x + 2, this.y, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x + 2, this.y + 1, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x, this.y - 1, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x + 1, this.y - 1, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x, this.y + 2, this.x, this.y)\r\n    );\r\n    this.room.hitwarnings.push(\r\n      new HitWarning(this.game, this.x + 1, this.y + 2, this.x, this.y)\r\n    );\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.ticksSinceFirstHit = 0;\r\n    this.health -= damage;\r\n    this.healthBar.hurt();\r\n    if (this.health <= 0) {\r\n      this.kill();\r\n    } else {\r\n      GenericParticle.spawnCluster(\r\n        this.room,\r\n        this.x + 1,\r\n        this.y + 1,\r\n        this.deathParticleColor\r\n      );\r\n    }\r\n  };\r\n\r\n  killNoBones = () => {\r\n    this.dead = true;\r\n    GenericParticle.spawnCluster(\r\n      this.room,\r\n      this.x + 1,\r\n      this.y + 1,\r\n      this.deathParticleColor\r\n    );\r\n    this.room.particles.push(new DeathParticle(this.x + 0.5, this.y + 0.5));\r\n\r\n    this.dropLoot();\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      if (this.health == 1) {\r\n        this.ticksSinceFirstHit++;\r\n        if (this.ticksSinceFirstHit >= this.REGEN_TICKS) {\r\n          this.health++;\r\n          this.ticksSinceFirstHit = 0;\r\n        }\r\n      } else {\r\n        this.ticks++;\r\n        if (!this.seenPlayer) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (distance <= 4) {\r\n              this.targetPlayer = player;\r\n              this.facePlayer(player);\r\n              this.seenPlayer = true;\r\n              if (player === this.game.players[this.game.localPlayerID])\r\n                this.alertTicks = 1;\r\n              if (this.health >= 3) this.addHitWarnings();\r\n            }\r\n          }\r\n        } else if (this.seenPlayer) {\r\n          if (this.room.playerTicked === this.targetPlayer) {\r\n            this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n            let oldX = this.x;\r\n            let oldY = this.y;\r\n            let moveX = this.x;\r\n            let moveY = this.y;\r\n            if (this.ticks % 2 === 0) {\r\n              // horizontal preference\r\n              if (this.targetPlayer.x >= this.x + this.w) moveX++;\r\n              else if (this.targetPlayer.x < this.x) moveX--;\r\n              else if (this.targetPlayer.y >= this.y + this.h) moveY++;\r\n              else if (this.targetPlayer.y < this.y) moveY--;\r\n            } else {\r\n              // vertical preference\r\n              if (this.targetPlayer.y >= this.y + this.h) moveY++;\r\n              else if (this.targetPlayer.y < this.y) moveY--;\r\n              else if (this.targetPlayer.x >= this.x + this.w) moveX++;\r\n              else if (this.targetPlayer.x < this.x) moveX--;\r\n            }\r\n\r\n            let hitPlayer = false;\r\n            if (this.health >= 3) {\r\n              let wouldHit = (player: Player, moveX: number, moveY: number) => {\r\n                return (\r\n                  player.x >= moveX &&\r\n                  player.x < moveX + this.w &&\r\n                  player.y >= moveY &&\r\n                  player.y < moveY + this.h\r\n                );\r\n              };\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  wouldHit(this.game.players[i], moveX, moveY)\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                }\r\n              }\r\n            }\r\n            if (!hitPlayer) {\r\n              this.tryMove(moveX, moveY);\r\n              this.drawX = this.x - oldX;\r\n              this.drawY = this.y - oldY;\r\n              if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n              else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n              else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n              else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n            }\r\n\r\n            if (this.health < this.maxHealth) {\r\n              this.ticksSinceFirstHit++;\r\n              if (this.ticksSinceFirstHit >= this.REGEN_TICKS) {\r\n                this.health++;\r\n                this.ticksSinceFirstHit = 0;\r\n              }\r\n            }\r\n\r\n            if (this.health >= 3) this.addHitWarnings();\r\n          }\r\n\r\n          let targetPlayerOffline =\r\n            Object.values(this.game.offlinePlayers).indexOf(\r\n              this.targetPlayer\r\n            ) !== -1;\r\n          if (!this.aggro || targetPlayerOffline) {\r\n            let p = this.nearestPlayer();\r\n            if (p !== false) {\r\n              let [distance, player] = p;\r\n              if (\r\n                distance <= 4 &&\r\n                (targetPlayerOffline ||\r\n                  distance < this.playerDistance(this.targetPlayer))\r\n              ) {\r\n                if (player !== this.targetPlayer) {\r\n                  this.targetPlayer = player;\r\n                  this.facePlayer(player);\r\n                  if (player === this.game.players[this.game.localPlayerID])\r\n                    this.alertTicks = 1;\r\n                  if (this.health >= 3) this.addHitWarnings();\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.tileX = 21;\r\n      this.tileY = 0;\r\n      if (this.health === 3) {\r\n        this.tileX = 21;\r\n        this.tileY = 4;\r\n        if (this.ticksSinceFirstHit >= 3) {\r\n          this.flashingFrame += 0.1 * delta;\r\n          if (Math.floor(this.flashingFrame) % 2 === 0) {\r\n            this.tileY = 0;\r\n          }\r\n        }\r\n      } else if (this.health === 2) {\r\n        this.tileX = 21;\r\n        this.tileY = 8;\r\n        if (this.ticksSinceFirstHit >= 3) {\r\n          this.flashingFrame += 0.1 * delta;\r\n          if (Math.floor(this.flashingFrame) % 2 === 0) {\r\n            this.tileY = 4;\r\n          }\r\n        }\r\n      } else if (this.health === 1) {\r\n        this.tileX = 21;\r\n        this.tileY = 12;\r\n        if (this.ticksSinceFirstHit >= 3) {\r\n          this.flashingFrame += 0.1 * delta;\r\n          if (Math.floor(this.flashingFrame) % 2 === 0) {\r\n            this.tileY = 8;\r\n          }\r\n        }\r\n      }\r\n\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          18,\r\n          0,\r\n          2,\r\n          2,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          2,\r\n          2,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + (this.tileX === 20 ? Math.floor(this.frame) * 2 : 0),\r\n        this.tileY,\r\n        2,\r\n        4,\r\n        this.x - this.drawX,\r\n        this.y - 2.5 - this.drawY,\r\n        2,\r\n        4,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(\r\n        delta,\r\n        GameConstants.TILESIZE * 0.5,\r\n        GameConstants.TILESIZE * -1\r\n      );\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(\r\n        delta,\r\n        GameConstants.TILESIZE * 0.5,\r\n        GameConstants.TILESIZE * -1\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n\r\n    this.healthBar.draw(\r\n      delta,\r\n      this.health,\r\n      this.maxHealth,\r\n      this.x + 0.5,\r\n      this.y,\r\n      true\r\n    );\r\n    this.drawX += -0.5 * this.drawX;\r\n    this.drawY += -0.5 * this.drawY;\r\n  };\r\n\r\n  dropLoot = () => {\r\n    let dropOffsets = [\r\n      { x: 0, y: 0 },\r\n      { x: 1, y: 0 },\r\n      { x: 0, y: 1 },\r\n      { x: 1, y: 1 },\r\n    ];\r\n    for (let i = 0; i < this.drops.length; i++) {\r\n      this.drops[i].level = this.room;\r\n      this.drops[i].x = this.x + dropOffsets[i].x;\r\n      this.drops[i].y = this.y + dropOffsets[i].y;\r\n      this.room.items.push(this.drops[i]);\r\n    }\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Random } from \"../random\";\r\nimport { astar } from \"../astarclass\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { Candle } from \"../item/candle\";\r\nimport { Door } from \"../tile/door\";\r\n\r\nexport class BishopEnemy extends Entity {\r\n  frame: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  aggro: boolean;\r\n  targetPlayer: Player;\r\n  drop: Item;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 31;\r\n    this.tileY = 8;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = Random.rand();\r\n      if (dropProb < 0.005) this.drop = new Candle(this.room, 0, 0);\r\n      else if (dropProb < 0.04) this.drop = new GreenGem(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"bishop\";\r\n  }\r\n\r\n  tryMove = (x: number, y: number) => {\r\n    let pointWouldBeIn = (someX: number, someY: number): boolean => {\r\n      return (\r\n        someX >= x && someX < x + this.w && someY >= y && someY < y + this.h\r\n      );\r\n    };\r\n    let enemyCollide = (enemy: Entity): boolean => {\r\n      if (enemy.x >= x + this.w || enemy.x + enemy.w <= x) return false;\r\n      if (enemy.y >= y + this.h || enemy.y + enemy.h <= y) return false;\r\n      return true;\r\n    };\r\n    for (const e of this.room.entities) {\r\n      if (e !== this && enemyCollide(e)) {\r\n        return;\r\n      }\r\n    }\r\n    for (const i in this.game.players) {\r\n      if (pointWouldBeIn(this.game.players[i].x, this.game.players[i].y)) {\r\n        return;\r\n      }\r\n    }\r\n    let tiles = [];\r\n    for (let xx = 0; xx < this.w; xx++) {\r\n      for (let yy = 0; yy < this.h; yy++) {\r\n        if (!this.room.roomArray[x + xx][y + yy].isSolid()) {\r\n          tiles.push(this.room.roomArray[x + xx][y + yy]);\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    for (let tile of tiles) {\r\n      tile.onCollideEnemy(this);\r\n    }\r\n    this.x = x;\r\n    this.y = y;\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.health -= damage;\r\n    this.healthBar.hurt();\r\n    if (this.health <= 0) {\r\n      this.kill();\r\n    } else {\r\n      GenericParticle.spawnCluster(\r\n        this.room,\r\n        this.x + 0.5,\r\n        this.y + 0.5,\r\n        this.deathParticleColor\r\n      );\r\n    }\r\n  };\r\n\r\n  tick = () => {\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      this.ticks++;\r\n      if (!this.seenPlayer) {\r\n        let p = this.nearestPlayer();\r\n        if (p !== false) {\r\n          let [distance, player] = p;\r\n          if (distance <= 4) {\r\n            this.targetPlayer = player;\r\n            this.facePlayer(player);\r\n            this.seenPlayer = true;\r\n            if (player === this.game.players[this.game.localPlayerID])\r\n              this.alertTicks = 1;\r\n            this.makeHitWarnings(false, true, false, this.direction);\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        if (this.room.playerTicked === this.targetPlayer) {\r\n          this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n          let oldX = this.x;\r\n          let oldY = this.y;\r\n\r\n          let disablePositions = Array<astar.Position>();\r\n          for (const e of this.room.entities) {\r\n            if (e !== this) {\r\n              disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n            }\r\n          }\r\n          for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n            for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n              if (\r\n                this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n              ) {\r\n                // don't walk on active spiketraps\r\n                disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n              }\r\n              if (this.room.roomArray[xx][yy] instanceof Door) {\r\n                // don't walk into doorways (normally wouldn't be an issue without diagonals)\r\n                disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n              }\r\n            }\r\n          }\r\n          let grid = [];\r\n          for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n            grid[x] = [];\r\n            for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n              if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                grid[x][y] = this.room.roomArray[x][y];\r\n              else grid[x][y] = false;\r\n            }\r\n          }\r\n          disablePositions.push({ x: this.x + 1, y: this.y } as astar.Position);\r\n          disablePositions.push({ x: this.x - 1, y: this.y } as astar.Position);\r\n          disablePositions.push({ x: this.x, y: this.y + 1 } as astar.Position);\r\n          disablePositions.push({ x: this.x, y: this.y - 1 } as astar.Position);\r\n          let moves = astar.AStar.search(\r\n            grid,\r\n            this,\r\n            this.targetPlayer,\r\n            disablePositions,\r\n            true //diagonals\r\n          );\r\n          moves = moves.filter((move) => {\r\n            const dx = Math.abs(move.pos.x - this.x);\r\n            const dy = Math.abs(move.pos.y - this.y);\r\n            return dx === 1 && dy === 1;\r\n          });\r\n          if (moves.length > 0) {\r\n            let moveX = moves[0].pos.x;\r\n            let moveY = moves[0].pos.y;\r\n            let hitPlayer = false;\r\n            for (const i in this.game.players) {\r\n              if (\r\n                this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                this.game.players[i].x === moveX &&\r\n                this.game.players[i].y === moveY\r\n              ) {\r\n                this.game.players[i].hurt(this.hit(), this.name);\r\n                this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                hitPlayer = true;\r\n                if (\r\n                  this.game.players[i] ===\r\n                  this.game.players[this.game.localPlayerID]\r\n                )\r\n                  this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n              }\r\n            }\r\n            if (!hitPlayer) {\r\n              this.tryMove(moveX, moveY);\r\n              this.drawX = this.x - oldX;\r\n              this.drawY = this.y - oldY;\r\n            }\r\n          }\r\n          this.makeHitWarnings(false, true, false, this.direction);\r\n        }\r\n\r\n        let targetPlayerOffline =\r\n          Object.values(this.game.offlinePlayers).indexOf(this.targetPlayer) !==\r\n          -1;\r\n        if (!this.aggro || targetPlayerOffline) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (\r\n              distance <= 4 &&\r\n              (targetPlayerOffline ||\r\n                distance < this.playerDistance(this.targetPlayer))\r\n            ) {\r\n              if (player !== this.targetPlayer) {\r\n                this.targetPlayer = player;\r\n                this.facePlayer(player);\r\n                if (player === this.game.players[this.game.localPlayerID])\r\n                  this.alertTicks = 1;\r\n                this.makeHitWarnings(false, true, false, this.direction);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + Math.floor(this.frame),\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta);\r\n    }\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { Door } from \"../tile/door\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { Random } from \"../random\";\r\nimport { Pickaxe } from \"../weapon/pickaxe\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Item } from \"../item/item\";\r\n\r\nexport enum ChargeEnemyState {\r\n  IDLE,\r\n  ALERTED,\r\n  CHARGING,\r\n}\r\n\r\nexport class ChargeEnemy extends Entity {\r\n  startX: number;\r\n  startY: number;\r\n  targetX: number;\r\n  targetY: number;\r\n  visualTargetX: number;\r\n  visualTargetY: number;\r\n  ticks: number;\r\n  frame: number;\r\n  state: ChargeEnemyState;\r\n  trailFrame: number;\r\n  drop: Item;\r\n\r\n  constructor(room: Room, game: Game, x: number, y: number, drop?: Item) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 13;\r\n    this.tileY = 8;\r\n    this.trailFrame = 0;\r\n    this.alertTicks = 0;\r\n    this.deathParticleColor = \"#ffffff\";\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n\r\n    this.state = ChargeEnemyState.IDLE;\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = Random.rand();\r\n      if (dropProb < 0.025) this.drop = new Pickaxe(this.room, 0, 0);\r\n      else if (dropProb < 0.02) this.drop = new GreenGem(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"charge knight\";\r\n  }\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  canMoveOver = (x: number, y: number): boolean => {\r\n    for (const e of this.room.entities) {\r\n      if (e !== this && x === e.x && y === e.y) return false;\r\n    }\r\n    let t = this.room.roomArray[x][y];\r\n    return !(t.isSolid() || t instanceof Door);\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      this.ticks++;\r\n      if (this.state === ChargeEnemyState.IDLE) {\r\n        let blocked = false;\r\n        let dx = 0;\r\n        let dy = 0;\r\n        for (const i in this.game.players) {\r\n          if (this.x === this.game.players[i].x) {\r\n            if (this.y < this.game.players[i].y) dy = 1;\r\n            else dy = -1;\r\n            for (let yy = this.y; yy !== this.game.players[i].y; yy += dy) {\r\n              if (!this.canMoveOver(this.x, yy)) blocked = true;\r\n            }\r\n          } else if (this.y === this.game.players[i].y) {\r\n            if (this.x < this.game.players[i].x) dx = 1;\r\n            else dx = -1;\r\n            for (let xx = this.x; xx !== this.game.players[i].x; xx += dx) {\r\n              if (!this.canMoveOver(xx, this.y)) blocked = true;\r\n            }\r\n          }\r\n          if ((dx !== 0 || dy !== 0) && !blocked) {\r\n            this.state = ChargeEnemyState.ALERTED;\r\n            this.targetX = this.x;\r\n            this.targetY = this.y;\r\n            while (this.canMoveOver(this.targetX + dx, this.targetY + dy)) {\r\n              this.targetX += dx;\r\n              this.targetY += dy;\r\n              if (\r\n                (this.targetX === this.game.players[i].x &&\r\n                  this.targetY === this.game.players[i].y) ||\r\n                (this.targetX === this.game.players[i].x - 1 &&\r\n                  this.targetY === this.game.players[i].y) ||\r\n                (this.targetX === this.game.players[i].x + 1 &&\r\n                  this.targetY === this.game.players[i].y) ||\r\n                (this.targetX === this.game.players[i].x &&\r\n                  this.targetY === this.game.players[i].y - 1) ||\r\n                (this.targetX === this.game.players[i].x &&\r\n                  this.targetY === this.game.players[i].y + 1)\r\n              )\r\n                this.room.hitwarnings.push(\r\n                  new HitWarning(\r\n                    this.game,\r\n                    this.targetX,\r\n                    this.targetY,\r\n                    this.x,\r\n                    this.y\r\n                  )\r\n                );\r\n            }\r\n            this.visualTargetX = this.targetX + 0.5 * dx;\r\n            this.visualTargetY = this.targetY + 0.5 * dy;\r\n            if (dy === 1) this.visualTargetY += 0.65;\r\n            if (dx > 0) this.direction = EntityDirection.RIGHT;\r\n            else if (dx < 0) this.direction = EntityDirection.LEFT;\r\n            else if (dy < 0) this.direction = EntityDirection.UP;\r\n            else if (dy > 0) this.direction = EntityDirection.DOWN;\r\n            break;\r\n          }\r\n        }\r\n      } else if (this.state === ChargeEnemyState.ALERTED) {\r\n        this.state = ChargeEnemyState.CHARGING;\r\n        this.trailFrame = 0;\r\n\r\n        for (const i in this.game.players) {\r\n          if (\r\n            (this.y === this.game.players[i].y &&\r\n              ((this.x < this.game.players[i].x &&\r\n                this.game.players[i].x <= this.targetX) ||\r\n                (this.targetX <= this.game.players[i].x &&\r\n                  this.game.players[i].x < this.x))) ||\r\n            (this.x === this.game.players[i].x &&\r\n              ((this.y < this.game.players[i].y &&\r\n                this.game.players[i].y <= this.targetY) ||\r\n                (this.targetY <= this.game.players[i].y &&\r\n                  this.game.players[i].y < this.y)))\r\n          ) {\r\n            this.game.players[i].hurt(this.hit(), this.name);\r\n          }\r\n        }\r\n\r\n        this.startX = this.x;\r\n        this.startY = this.y;\r\n        this.drawX = this.targetX - this.x;\r\n        this.drawY = this.targetY - this.y;\r\n        this.x = this.targetX;\r\n        this.y = this.targetY;\r\n      } else if (this.state === ChargeEnemyState.CHARGING) {\r\n        this.state = ChargeEnemyState.IDLE;\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n\r\n      if (\r\n        (this.state === ChargeEnemyState.CHARGING &&\r\n          Math.abs(this.drawX) > 0.1) ||\r\n        Math.abs(this.drawY) > 0.1\r\n      ) {\r\n        GenericParticle.spawnCluster(\r\n          this.room,\r\n          this.x - this.drawX + 0.5,\r\n          this.y - this.drawY + 0.5,\r\n          \"black\"\r\n        );\r\n        GenericParticle.spawnCluster(\r\n          this.room,\r\n          this.x - this.drawX + 0.5,\r\n          this.y - this.drawY + 0.5,\r\n          \"white\"\r\n        );\r\n      }\r\n\r\n      if (this.state === ChargeEnemyState.CHARGING) {\r\n        this.trailFrame += 0.01 * delta;\r\n        let t = this.trailFrame;\r\n\r\n        if (t >= 0 && t <= 1) {\r\n          Game.ctx.strokeStyle = \"white\";\r\n          if (GameConstants.ALPHA_ENABLED) Game.ctx.globalAlpha = 1 - t;\r\n          Game.ctx.lineWidth = GameConstants.TILESIZE * 0.25;\r\n          Game.ctx.beginPath();\r\n          Game.ctx.moveTo(\r\n            (this.startX + 0.5) * GameConstants.TILESIZE,\r\n            (this.startY + 0.5) * GameConstants.TILESIZE\r\n          );\r\n          Game.ctx.lineCap = \"round\";\r\n          Game.ctx.lineTo(\r\n            (this.x - this.drawX + 0.5) * GameConstants.TILESIZE,\r\n            (this.y - this.drawY + 0.5) * GameConstants.TILESIZE\r\n          );\r\n          Game.ctx.stroke();\r\n          Game.ctx.globalAlpha = 1;\r\n        }\r\n      }\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + Math.floor(this.frame),\r\n        this.tileY + this.direction * 2,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n      if (this.state === ChargeEnemyState.IDLE) {\r\n        this.drawSleepingZs(delta);\r\n      } else if (this.state === ChargeEnemyState.ALERTED) {\r\n        this.drawExclamation(delta);\r\n      }\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n\r\n    this.healthBar.draw(\r\n      delta,\r\n      this.health,\r\n      this.maxHealth,\r\n      this.x,\r\n      this.y,\r\n      true\r\n    );\r\n    this.drawX += -0.5 * this.drawX;\r\n    this.drawY += -0.5 * this.drawY;\r\n\r\n    if (this.state === ChargeEnemyState.ALERTED) {\r\n      this.trailFrame += 0.4 * delta;\r\n\r\n      if (Math.floor(this.trailFrame) % 2 === 0) {\r\n        let startX = (this.x + 0.5) * GameConstants.TILESIZE;\r\n        let startY = (this.y - 0.25) * GameConstants.TILESIZE;\r\n        if (this.direction === EntityDirection.LEFT) startX -= 3;\r\n        else if (this.direction === EntityDirection.RIGHT) startX += 3;\r\n        else if (this.direction === EntityDirection.DOWN) startY += 2;\r\n        else if (this.direction === EntityDirection.UP) startY -= 8;\r\n\r\n        Game.ctx.strokeStyle = \"white\";\r\n        Game.ctx.lineWidth = GameConstants.TILESIZE * 0.25;\r\n        Game.ctx.beginPath();\r\n        Game.ctx.moveTo(Math.round(startX), Math.round(startY));\r\n        Game.ctx.lineCap = \"round\";\r\n        Game.ctx.lineTo(\r\n          Math.round((this.visualTargetX + 0.5) * GameConstants.TILESIZE),\r\n          Math.round((this.visualTargetY - 0.25) * GameConstants.TILESIZE)\r\n        );\r\n        Game.ctx.stroke();\r\n        Game.ctx.globalAlpha = 1;\r\n      }\r\n    }\r\n  };\r\n}\r\n","import { Item } from \"../item/item\";\r\nimport { Game } from \"../game\";\r\nimport { Key } from \"../item/key\";\r\nimport { Room } from \"../room\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { Armor } from \"../item/armor\";\r\nimport { Entity } from \"./entity\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { Sound } from \"../sound\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { BlueGem } from \"../item/bluegem\";\r\nimport { GameState } from \"../gameState\";\r\nimport { EntityType } from \"./entity\";\r\n\r\nexport class Chest extends Entity {\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number\r\n  ) {\r\n    super(room, game, x, y);\r\n\r\n    this.tileX = 4;\r\n    this.tileY = 0;\r\n    this.health = 1;\r\n    this.entityType = EntityType.CHEST;\r\n\r\n    let drop = Game.randTable([1, 1, 1, 1, 1, 1, 1, 2, 3, 4], rand);\r\n\r\n    switch (drop) {\r\n      case 1:\r\n        this.drop = new Heart(this.room, this.x, this.y);\r\n        break;\r\n      case 2:\r\n        this.drop = new GreenGem(this.room, this.x, this.y);\r\n        break;\r\n      case 3:\r\n        this.drop = new RedGem(this.room, this.x, this.y);\r\n        break;\r\n      case 4:\r\n        this.drop = new BlueGem(this.room, this.x, this.y);\r\n        break;\r\n      case 5:\r\n        this.drop = new Key(this.room, this.x, this.y);\r\n        break;\r\n      case 6:\r\n        this.drop = new Armor(this.room, this.x, this.y);\r\n        break;\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"chest\";\r\n  }\r\n\r\n  kill = () => {\r\n    if (this.room === this.game.room) Sound.chest();\r\n\r\n    this.dead = true;\r\n\r\n    GenericParticle.spawnCluster(\r\n      this.room,\r\n      this.x + 0.5,\r\n      this.y + 0.5,\r\n      \"#fbf236\"\r\n    );\r\n\r\n    this.room.items.push(this.drop);\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n}\r\n","import { Item } from \"../item/item\";\r\nimport { Game } from \"../game\";\r\nimport { Key } from \"../item/key\";\r\nimport { Room } from \"../room\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { Armor } from \"../item/armor\";\r\nimport { Entity } from \"./entity\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Resource } from \"./resource\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coal } from \"../item/coal\";\r\nimport { Sound } from \"../sound\";\r\nimport { Inventory } from \"../inventory\";\r\nimport { Weapon } from \"../weapon/weapon\";\r\nimport { Pickaxe } from \"../weapon/pickaxe\";\r\nimport { Player } from \"../player\";\r\nimport { ItemState, ItemType } from \"../gameState\";\r\n\r\nexport class CoalResource extends Resource {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n\r\n    this.tileX = 12;\r\n    this.tileY = 0;\r\n    this.health = 1;\r\n  }\r\n\r\n  get name() {\r\n    return \"coal\";\r\n  }\r\n\r\n  hurtCallback = () => {\r\n    GenericParticle.spawnCluster(\r\n      this.room,\r\n      this.x + 0.5,\r\n      this.y + 0.5,\r\n      \"#ffffff\"\r\n    );\r\n\r\n    if (this.room === this.game.room) Sound.mine();\r\n  };\r\n\r\n  kill = () => {\r\n    if (this.room === this.game.room) Sound.breakRock();\r\n\r\n    this.dead = true;\r\n\r\n    this.room.items.push(new Coal(this.room, this.x, this.y));\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { astar } from \"../astarclass\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { Player } from \"../player\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { Item } from \"../item/item\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class CrabEnemy extends Entity {\r\n  ticks: number;\r\n  frame: number;\r\n  seenPlayer: boolean;\r\n  aggro: boolean;\r\n  targetPlayer: Player;\r\n  drop: Item;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 8;\r\n    this.tileY = 4;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"crab\";\r\n  }\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.healthBar.hurt();\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 3, 24);\r\n\r\n    this.health -= damage;\r\n    if (this.health <= 0) this.kill();\r\n    else this.hurtCallback();\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      if (!this.seenPlayer) {\r\n        const result = this.nearestPlayer();\r\n        if (result !== false) {\r\n          let [distance, p] = result;\r\n          if (distance < 4) {\r\n            this.seenPlayer = true;\r\n            this.targetPlayer = p;\r\n            this.facePlayer(p);\r\n            if (p === this.game.players[this.game.localPlayerID])\r\n              this.alertTicks = 1;\r\n            this.makeHitWarnings(true, false, false, this.direction);\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        if (this.room.playerTicked === this.targetPlayer) {\r\n          this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n          this.ticks++;\r\n          if (this.ticks % 2 === 1) {\r\n            let oldX = this.x;\r\n            let oldY = this.y;\r\n            let disablePositions = Array<astar.Position>();\r\n            for (const e of this.room.entities) {\r\n              if (e !== this) {\r\n                disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n              }\r\n            }\r\n            for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n              for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n                if (\r\n                  this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                  (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n                ) {\r\n                  // don't walk on active spiketraps\r\n                  disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n                }\r\n              }\r\n            }\r\n            let grid = [];\r\n            for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n              grid[x] = [];\r\n              for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n                if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                  grid[x][y] = this.room.roomArray[x][y];\r\n                else grid[x][y] = false;\r\n              }\r\n            }\r\n            let moves = astar.AStar.search(\r\n              grid,\r\n              this,\r\n              this.targetPlayer,\r\n              disablePositions\r\n            );\r\n            if (moves.length > 0) {\r\n              let hitPlayer = false;\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  this.game.players[i].x === moves[0].pos.x &&\r\n                  this.game.players[i].y === moves[0].pos.y\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                  hitPlayer = true;\r\n                }\r\n              }\r\n              if (!hitPlayer) {\r\n                this.tryMove(moves[0].pos.x, moves[0].pos.y);\r\n                this.drawX = this.x - oldX;\r\n                this.drawY = this.y - oldY;\r\n                if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n                else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n                else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n                else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n              }\r\n            }\r\n          } else {\r\n            this.makeHitWarnings(true, false, false, this.direction);\r\n          }\r\n        }\r\n\r\n        let targetPlayerOffline =\r\n          Object.values(this.game.offlinePlayers).indexOf(this.targetPlayer) !==\r\n          -1;\r\n        if (!this.aggro || targetPlayerOffline) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (\r\n              distance <= 4 &&\r\n              (targetPlayerOffline ||\r\n                distance < this.playerDistance(this.targetPlayer))\r\n            ) {\r\n              if (player !== this.targetPlayer) {\r\n                this.targetPlayer = player;\r\n                this.facePlayer(player);\r\n                if (player === this.game.players[this.game.localPlayerID])\r\n                  this.alertTicks = 1;\r\n                if (this.ticks % 2 === 0) {\r\n                  this.makeHitWarnings(true, false, false, this.direction);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      if (this.ticks % 2 === 0) {\r\n        this.tileX = 9;\r\n        this.tileY = 4;\r\n      } else {\r\n        this.tileX = 8;\r\n        this.tileY = 4;\r\n      }\r\n\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - 0.25 - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX,\r\n        this.tileY + this.direction,\r\n        1,\r\n        1,\r\n        this.x - this.drawX,\r\n        this.y - 0.25 - this.drawY,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n      /*if (this.crushed) {\r\n        this.crushAnim(delta);\r\n      }*/\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta, 0, 0.75 * GameConstants.TILESIZE);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta, 0, 0.75 * GameConstants.TILESIZE);\r\n    }\r\n  };\r\n}\r\n","import { Entity } from \"./entity\";\r\nimport { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { EntityType } from \"./entity\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class Crate extends Entity {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n    this.room = room;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 0;\r\n    this.tileY = 0;\r\n    this.hasShadow = false;\r\n    this.pushable = true;\r\n    this.entityType = EntityType.PROP;\r\n  }\r\n\r\n  get name() {\r\n    return \"crate\";\r\n  }\r\n\r\n  kill = () => {\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 3, 26);\r\n    this.dead = true;\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    // not inherited because it doesn't have the 0.5 offset\r\n    if (!this.dead) {\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n\r\n    this.drawX += -0.5 * this.drawX;\r\n    this.drawY += -0.5 * this.drawY;\r\n  };\r\n}\r\n","import { Item } from \"../item/item\";\r\nimport { Game } from \"../game\";\r\nimport { Key } from \"../item/key\";\r\nimport { Room } from \"../room\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { Armor } from \"../item/armor\";\r\nimport { Entity } from \"./entity\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Resource } from \"./resource\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Sound } from \"../sound\";\r\nimport { GameState } from \"../gameState\";\r\n\r\nexport class EmeraldResource extends Resource {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n\r\n    this.tileX = 14;\r\n    this.tileY = 0;\r\n    this.health = 3;\r\n  }\r\n\r\n  get name() {\r\n    return \"emerald\";\r\n  }\r\n\r\n  hurtCallback = () => {\r\n    GenericParticle.spawnCluster(\r\n      this.room,\r\n      this.x + 0.5,\r\n      this.y + 0.5,\r\n      \"#fbf236\"\r\n    );\r\n\r\n    if (this.room === this.game.room) Sound.mine();\r\n  };\r\n\r\n  kill = () => {\r\n    if (this.room === this.game.room) Sound.breakRock();\r\n\r\n    this.dead = true;\r\n\r\n    this.room.items.push(new GreenGem(this.room, this.x, this.y));\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Bones } from \"../tile/bones\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Player } from \"../player\";\r\nimport { DeathParticle } from \"../particle/deathParticle\";\r\nimport { Floor } from \"../tile/floor\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { HealthBar } from \"../healthbar\";\r\nimport { Drawable } from \"../drawable\";\r\nimport { Item } from \"../item/item\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { Sound } from \"../sound\";\r\n\r\nexport enum EntityDirection {\r\n  DOWN,\r\n  UP,\r\n  RIGHT,\r\n  LEFT,\r\n}\r\n\r\nexport enum EntityType {\r\n  ENEMY,\r\n  FRIENDLY,\r\n  RESOURCE,\r\n  PROP,\r\n  CHEST,\r\n}\r\n\r\nexport class Entity extends Drawable {\r\n  room: Room;\r\n  x: number;\r\n  y: number;\r\n  w: number;\r\n  h: number;\r\n  direction: EntityDirection;\r\n  drawX: number;\r\n  drawY: number;\r\n  dead: boolean;\r\n  game: Game;\r\n  health: number;\r\n  maxHealth: number;\r\n  tileX: number;\r\n  tileY: number;\r\n  hasShadow: boolean;\r\n  skipNextTurns: number;\r\n  //TODO: change these to functions? for enemies that switch states\r\n  destroyable: boolean; // can the player destroy this enemy?\r\n  pushable: boolean; // can the player push this enemy? (true for crates/barrels, false for regular mobs)\r\n  chainPushable: boolean; // can the player pushing another enemy push this enemy? (default true)\r\n  interactable: boolean; // can the player interact\r\n  deathParticleColor: string;\r\n  healthBar: HealthBar;\r\n  drop: Item;\r\n  sleepingZFrame = 0;\r\n  alertTicks: number;\r\n  exclamationFrame: number;\r\n  lastX: number;\r\n  lastY: number;\r\n  entityType: EntityType;\r\n  hitBy: Player;\r\n\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super();\r\n\r\n    this.room = room;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.w = 1;\r\n    this.h = 1;\r\n    this.game = game;\r\n    this.drawX = 0;\r\n    this.drawY = 0;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 0;\r\n    this.tileY = 0;\r\n    this.hasShadow = true;\r\n    this.skipNextTurns = 0;\r\n    this.direction = EntityDirection.DOWN;\r\n    this.destroyable = true;\r\n    this.pushable = false;\r\n    this.chainPushable = true;\r\n    this.interactable = false;\r\n    this.healthBar = new HealthBar();\r\n    this.alertTicks = 0;\r\n    this.exclamationFrame = 0;\r\n    this.lastX = x;\r\n    this.lastY = y;\r\n    this.entityType = EntityType.ENEMY;\r\n    this.hitBy = this.getPlayer();\r\n  }\r\n\r\n  tryMove = (x: number, y: number) => {\r\n    let pointWouldBeIn = (someX: number, someY: number): boolean => {\r\n      return (\r\n        someX >= x && someX < x + this.w && someY >= y && someY < y + this.h\r\n      );\r\n    };\r\n    let entityCollide = (entity: Entity): boolean => {\r\n      if (entity.x >= x + this.w || entity.x + entity.w <= x) return false;\r\n      if (entity.y >= y + this.h || entity.y + entity.h <= y) return false;\r\n      return true;\r\n    };\r\n    for (const e of this.room.entities) {\r\n      if (e !== this && entityCollide(e)) {\r\n        return;\r\n      }\r\n    }\r\n    for (const i in this.game.players) {\r\n      if (pointWouldBeIn(this.game.players[i].x, this.game.players[i].y)) {\r\n        return;\r\n      }\r\n    }\r\n    let tiles = [];\r\n    for (let xx = 0; xx < this.w; xx++) {\r\n      for (let yy = 0; yy < this.h; yy++) {\r\n        if (!this.room.roomArray[x + xx][y + yy].isSolid()) {\r\n          tiles.push(this.room.roomArray[x + xx][y + yy]);\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    for (let tile of tiles) {\r\n      tile.onCollideEnemy(this);\r\n    }\r\n    this.x = x;\r\n    this.y = y;\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 0;\r\n  };\r\n\r\n  hurtCallback = () => {};\r\n\r\n  isType = () => {};\r\n\r\n  playerKilledBy = (enemy: Entity) => {\r\n    return enemy;\r\n  };\r\n\r\n  pointIn = (x: number, y: number): boolean => {\r\n    return (\r\n      x >= this.x && x < this.x + this.w && y >= this.y && y < this.y + this.h\r\n    );\r\n  };\r\n\r\n  getPlayer = () => {\r\n    const maxDistance = 138291380921; // pulled this straight outta my ass\r\n    let closestDistance = maxDistance;\r\n    let closestPlayer = null;\r\n    for (const i in this.game.players) {\r\n      if (this.game.rooms[this.game.players[i].levelID] === this.room) {\r\n        let distance = this.playerDistance(this.game.players[i]);\r\n        if (distance < closestDistance) {\r\n          closestDistance = distance;\r\n          closestPlayer = this.game.players[i];\r\n        }\r\n      }\r\n    }\r\n\r\n    if (closestDistance === maxDistance) return false;\r\n    else return closestPlayer;\r\n  };\r\n\r\n  lastHitBy = (player: Player) => {\r\n    this.hitBy = player;\r\n    this.game.pushMessage(`${this.hitBy}`);\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    this.healthBar.hurt();\r\n\r\n    this.health -= damage;\r\n    if (this.health <= 0) this.kill();\r\n    else this.hurtCallback();\r\n  };\r\n\r\n  interact = (player: Player) => {};\r\n\r\n  dropLoot = () => {\r\n    if (this.drop) {\r\n      this.drop.level = this.room;\r\n      if (!this.room.roomArray[this.x][this.y].isSolid()) {\r\n        this.drop.x = this.x;\r\n        this.drop.y = this.y;\r\n      } else if (this.room.roomArray[this.x][this.y].isSolid()) {\r\n        this.drop.x = this.lastX;\r\n        this.drop.y = this.lastY;\r\n      }\r\n      this.room.items.push(this.drop);\r\n      this.drop.onDrop();\r\n    }\r\n  };\r\n\r\n  kill = () => {\r\n    if (this.room.roomArray[this.x][this.y] instanceof Floor) {\r\n      let b = new Bones(this.room, this.x, this.y);\r\n      b.skin = this.room.roomArray[this.x][this.y].skin;\r\n      this.room.roomArray[this.x][this.y] = b;\r\n    }\r\n\r\n    this.killNoBones();\r\n  };\r\n\r\n  killNoBones = () => {\r\n    this.dead = true;\r\n    /*GenericParticle.spawnCluster(\r\n      this.room,\r\n      this.x + 0.5,\r\n      this.y + 0.5,\r\n      this.deathParticleColor\r\n    );\r\n    this.room.particles.push(new DeathParticle(this.x, this.y));\r\n*/\r\n    this.dropLoot();\r\n  };\r\n\r\n  shadeAmount = () => {\r\n    return this.room.softVis[this.x][this.y];\r\n  };\r\n\r\n  doneMoving = (): boolean => {\r\n    let EPSILON = 0.01;\r\n    return Math.abs(this.drawX) < EPSILON && Math.abs(this.drawY) < EPSILON;\r\n  };\r\n\r\n  nearestPlayer = (): [number, Player] | false => {\r\n    const maxDistance = 138291380921; // pulled this straight outta my ass\r\n    let closestDistance = maxDistance;\r\n    let closestPlayer = null;\r\n    for (const i in this.game.players) {\r\n      if (this.game.rooms[this.game.players[i].levelID] === this.room) {\r\n        let distance = this.playerDistance(this.game.players[i]);\r\n        if (distance < closestDistance) {\r\n          closestDistance = distance;\r\n          closestPlayer = this.game.players[i];\r\n        }\r\n      }\r\n    }\r\n\r\n    if (closestDistance === maxDistance) return false;\r\n    else return [closestDistance, closestPlayer];\r\n  };\r\n\r\n  playerDistance = (player: Player): number => {\r\n    return Math.max(Math.abs(this.x - player.x), Math.abs(this.y - player.y));\r\n  };\r\n\r\n  facePlayer = (player: Player) => {\r\n    let dx = player.x - this.x;\r\n    let dy = player.y - this.y;\r\n    if (Math.abs(dx) === Math.abs(dy)) {\r\n      // just moved, already facing player\r\n    } else if (Math.abs(dx) > Math.abs(dy)) {\r\n      if (dx > 0) this.direction = EntityDirection.RIGHT;\r\n      if (dx < 0) this.direction = EntityDirection.LEFT;\r\n    } else {\r\n      if (dy > 0) this.direction = EntityDirection.DOWN;\r\n      if (dy < 0) this.direction = EntityDirection.UP;\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX,\r\n        this.tileY + this.direction * 2,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    /*if (this.crushed) {\r\n      this.crushAnim(delta);\r\n    }*/\r\n  };\r\n\r\n  tick = () => {};\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y - this.drawY;\r\n\r\n    this.healthBar.draw(\r\n      delta,\r\n      this.health,\r\n      this.maxHealth,\r\n      this.x,\r\n      this.y,\r\n      true\r\n    );\r\n    this.drawX += -0.5 * this.drawX;\r\n    this.drawY += -0.5 * this.drawY;\r\n  };\r\n\r\n  drawSleepingZs = (delta: number, offsetX = 0, offsetY = 0) => {\r\n    this.sleepingZFrame += delta;\r\n\r\n    let numZs = 2;\r\n    let t = this.sleepingZFrame * 0.01; // 0 <= t < 1\r\n    t -= Math.floor(t);\r\n    //let whichway = Math.floor(this.sleepingZFrame * 0.02 / numZs) % 2;\r\n    for (let off = numZs - 1; off >= 0; off--) {\r\n      let yoff = (t + off) * 7;\r\n      let alpha = Math.min(1 - (t + off) / numZs, (2 * (t + off)) / numZs);\r\n\r\n      let xoff = 0;\r\n      if (off === 0) xoff = 1;\r\n      if (t >= 0.33 && t < 0.66) xoff = off;\r\n      if (t >= 0.33 && t < 0.66) xoff = off;\r\n\r\n      let width = Game.measureText(\"Z\").width;\r\n      if (GameConstants.ALPHA_ENABLED) Game.ctx.globalAlpha = alpha;\r\n      Game.fillTextOutline(\r\n        \"Z\",\r\n        (this.x + 0.5) * GameConstants.TILESIZE - width / 2 + xoff + offsetX,\r\n        (this.y - 0.6) * GameConstants.TILESIZE - yoff + offsetY,\r\n        GameConstants.OUTLINE,\r\n        \"white\"\r\n      );\r\n      Game.ctx.globalAlpha = 1;\r\n    }\r\n  };\r\n\r\n  drawExclamation = (delta: number, offsetX = 0, offsetY = 0) => {\r\n    this.exclamationFrame += delta;\r\n\r\n    let yoff: number | false = 0;\r\n    let yoffs: Array<number | false> = [0, -1, -2, -3, -5, -7, -4];\r\n    if (this.exclamationFrame > yoffs.length) yoff = yoffs[yoffs.length - 1];\r\n    else yoff = yoffs[this.exclamationFrame];\r\n\r\n    let width = Game.measureText(\"!\").width;\r\n    Game.ctx.globalAlpha = 1;\r\n    if (yoff !== false) {\r\n      Game.fillTextOutline(\r\n        \"!\",\r\n        (this.x + 0.5) * GameConstants.TILESIZE - width / 2 + offsetX,\r\n        (this.y - 0.75) * GameConstants.TILESIZE + yoff + offsetY,\r\n        GameConstants.OUTLINE,\r\n        GameConstants.WARNING_RED\r\n      );\r\n    }\r\n  };\r\n  /*crush = () => {\r\n    let player: Player;\r\n    for (let i in this.game.players) {\r\n      player = this.game.players[i];\r\n    }\r\n    if (this.x == player.x) {\r\n      this.crushVertical = true;\r\n    }\r\n    if (this.y == player.y) {\r\n      this.crushVertical = false;\r\n    }\r\n  };\r\n  crushAnim = (delta: number) => {\r\n    if (this.crushVertical && this.crushX >= 0) {\r\n      this.crushX -= delta * 0.125;\r\n    } else if (this.crushY >= 0) {\r\n      this.crushY -= delta * 0.125;\r\n    }\r\n  };\r\n*/\r\n  makeHitWarnings = (\r\n    orthogonal: Boolean,\r\n    diagonal: Boolean,\r\n    forwardOnly: Boolean,\r\n    direction: EntityDirection\r\n  ) => {\r\n    if (orthogonal && !forwardOnly) {\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.game, this.x - 1, this.y, this.x, this.y)\r\n      );\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.game, this.x + 1, this.y, this.x, this.y)\r\n      );\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.game, this.x, this.y - 1, this.x, this.y)\r\n      );\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.game, this.x, this.y + 1, this.x, this.y)\r\n      );\r\n    }\r\n    if (diagonal && !forwardOnly) {\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.game, this.x - 1, this.y - 1, this.x, this.y)\r\n      );\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.game, this.x + 1, this.y + 1, this.x, this.y)\r\n      );\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.game, this.x + 1, this.y - 1, this.x, this.y)\r\n      );\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.game, this.x - 1, this.y + 1, this.x, this.y)\r\n      );\r\n    }\r\n    if (forwardOnly) {\r\n      if (direction == EntityDirection.LEFT) {\r\n        this.room.hitwarnings.push(\r\n          new HitWarning(this.game, this.x - 1, this.y, this.x, this.y)\r\n        );\r\n      }\r\n      if (direction == EntityDirection.RIGHT) {\r\n        this.room.hitwarnings.push(\r\n          new HitWarning(this.game, this.x + 1, this.y, this.x, this.y)\r\n        );\r\n      }\r\n      if (direction == EntityDirection.UP) {\r\n        this.room.hitwarnings.push(\r\n          new HitWarning(this.game, this.x, this.y - 1, this.x, this.y)\r\n        );\r\n      }\r\n      if (direction == EntityDirection.DOWN) {\r\n        this.room.hitwarnings.push(\r\n          new HitWarning(this.game, this.x, this.y + 1, this.x, this.y)\r\n        );\r\n      }\r\n    }\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { astar } from \"../astarclass\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { Player } from \"../player\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { Item } from \"../item/item\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class FrogEnemy extends Entity {\r\n  ticks: number;\r\n  frame: number;\r\n  seenPlayer: boolean;\r\n  aggro: boolean;\r\n  targetPlayer: Player;\r\n  drop: Item;\r\n  frameLength: number;\r\n  startFrame: number;\r\n  animationSpeed: number;\r\n  tickCount: number;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 12;\r\n    this.tileY = 16;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n    this.deathParticleColor = \"#ffffff\";\r\n    this.frameLength = 3;\r\n    this.startFrame = 0;\r\n    this.animationSpeed = 0.1;\r\n    this.tickCount = 0;\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"frog\";\r\n  }\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.healthBar.hurt();\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 3, 30);\r\n\r\n    this.health -= damage;\r\n    if (this.health <= 0) this.kill();\r\n    else this.hurtCallback();\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 0.5;\r\n  };\r\n\r\n  jump = () => {\r\n    if (this.lastX !== this.x || this.lastY !== this.y) {\r\n      this.frameLength = 9;\r\n      this.frame = 2;\r\n      this.animationSpeed = 0.3;\r\n    }\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      if (!this.seenPlayer) {\r\n        const result = this.nearestPlayer();\r\n        if (result !== false) {\r\n          let [distance, p] = result;\r\n          if (distance < 4) {\r\n            this.seenPlayer = true;\r\n            this.targetPlayer = p;\r\n            this.facePlayer(p);\r\n            if (p === this.game.players[this.game.localPlayerID])\r\n              this.alertTicks = 1;\r\n            this.makeHitWarnings(true, false, false, this.direction);\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        if (this.room.playerTicked === this.targetPlayer) {\r\n          this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n          this.ticks++;\r\n          if (this.ticks % 2 === 1) {\r\n            let oldX = this.x;\r\n            let oldY = this.y;\r\n            let disablePositions = Array<astar.Position>();\r\n            for (const e of this.room.entities) {\r\n              if (e !== this) {\r\n                disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n              }\r\n            }\r\n            for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n              for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n                if (\r\n                  this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                  (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n                ) {\r\n                  // don't walk on active spiketraps\r\n                  disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n                }\r\n              }\r\n            }\r\n\r\n            let grid = [];\r\n            for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n              grid[x] = [];\r\n              for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n                if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                  grid[x][y] = this.room.roomArray[x][y];\r\n                else grid[x][y] = false;\r\n              }\r\n            }\r\n            let moves = astar.AStar.search(\r\n              grid,\r\n              this,\r\n              this.targetPlayer,\r\n              disablePositions\r\n            );\r\n            if (moves.length > 0) {\r\n              let hitPlayer = false;\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  this.game.players[i].x === moves[0].pos.x &&\r\n                  this.game.players[i].y === moves[0].pos.y\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                  hitPlayer = true;\r\n                  break;\r\n                }\r\n              }\r\n              if (!hitPlayer) {\r\n                oldX = this.x;\r\n                oldY = this.y;\r\n                let tryX = this.x;\r\n                let tryY = this.y;\r\n                this.tryMove(moves[0].pos.x, moves[0].pos.y);\r\n                moves = astar.AStar.search(\r\n                  grid,\r\n                  this,\r\n                  this.targetPlayer,\r\n                  disablePositions\r\n                );\r\n                tryX = this.x;\r\n                tryY = this.y;\r\n                this.tryMove(moves[0].pos.x, moves[0].pos.y);\r\n                if (this.x != oldX && this.y != oldY) {\r\n                  this.x = tryX;\r\n                  this.y = tryY;\r\n                }\r\n                this.jump();\r\n                this.drawX = this.x - oldX;\r\n                this.drawY = this.y - oldY;\r\n                if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n                else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n                else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n                else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n              }\r\n            }\r\n          } else {\r\n            this.makeHitWarnings(true, false, false, this.direction);\r\n          }\r\n        }\r\n\r\n        let targetPlayerOffline =\r\n          Object.values(this.game.offlinePlayers).indexOf(this.targetPlayer) !==\r\n          -1;\r\n        if (!this.aggro || targetPlayerOffline) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (\r\n              distance <= 4 &&\r\n              (targetPlayerOffline ||\r\n                distance < this.playerDistance(this.targetPlayer))\r\n            ) {\r\n              if (player !== this.targetPlayer) {\r\n                this.targetPlayer = player;\r\n                this.facePlayer(player);\r\n                if (player === this.game.players[this.game.localPlayerID])\r\n                  this.alertTicks = 1;\r\n                if (this.ticks % 2 === 0) {\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.tileX = 1;\r\n      this.tileY = 16;\r\n\r\n      this.frame += this.animationSpeed * delta;\r\n      if (this.frame >= this.frameLength) {\r\n        (this.frame = 0),\r\n          (this.frameLength = 3),\r\n          (this.animationSpeed = 0.1),\r\n          (this.tileX = 1);\r\n      }\r\n      if (this.ticks % 2 === 0) {\r\n      } else {\r\n        this.tileX = 12;\r\n      }\r\n      if (!this.seenPlayer) {\r\n        this.tileX = 12;\r\n      }\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + (this.tileX === 1 ? Math.floor(this.frame) : 0),\r\n        this.tileY /*+ this.direction * 2,*/,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta);\r\n    }\r\n  };\r\n}\r\n","import { Item } from \"../item/item\";\r\nimport { Game } from \"../game\";\r\nimport { Key } from \"../item/key\";\r\nimport { Room } from \"../room\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { Armor } from \"../item/armor\";\r\nimport { Entity } from \"./entity\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Resource } from \"./resource\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Gold } from \"../item/gold\";\r\nimport { Sound } from \"../sound\";\r\n\r\nexport class GoldResource extends Resource {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n\r\n    this.tileX = 13;\r\n    this.tileY = 0;\r\n    this.health = 2;\r\n  }\r\n\r\n  get name() {\r\n    return \"gold\";\r\n  }\r\n\r\n  hurtCallback = () => {\r\n    if (this.room === this.game.room) Sound.mine();\r\n  };\r\n\r\n  kill = () => {\r\n    if (this.room === this.game.room) Sound.breakRock();\r\n\r\n    this.dead = true;\r\n\r\n    this.room.items.push(new Gold(this.room, this.x, this.y));\r\n\r\n    GenericParticle.spawnCluster(\r\n      this.room,\r\n      this.x + 0.5,\r\n      this.y + 0.5,\r\n      \"#fbf236\"\r\n    );\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { astar } from \"../astarclass\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { Player } from \"../player\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { Item } from \"../item/item\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\nimport { Armor } from \"../item/armor\";\r\n\r\nexport class KnightEnemy extends Entity {\r\n  ticks: number;\r\n  frame: number;\r\n  seenPlayer: boolean;\r\n  targetPlayer: Player;\r\n  aggro: boolean;\r\n  drop: Item;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 2;\r\n    this.maxHealth = 2;\r\n    this.tileX = 9;\r\n    this.tileY = 8;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n    this.deathParticleColor = \"#ffffff\";\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = rand();\r\n      if (dropProb < 0.05) this.drop = new DualDagger(this.room, 0, 0);\r\n      else if (dropProb < 0.01) this.drop = new DualDagger(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n  get name() {\r\n    return \"burrow knight\";\r\n  }\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.healthBar.hurt();\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 3, 29);\r\n\r\n    this.health -= damage;\r\n    if (this.health <= 0) this.kill();\r\n    else this.hurtCallback();\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      if (!this.seenPlayer) {\r\n        const result = this.nearestPlayer();\r\n        if (result !== false) {\r\n          let [distance, p] = result;\r\n          if (distance < 4) {\r\n            this.seenPlayer = true;\r\n            this.targetPlayer = p;\r\n            this.facePlayer(p);\r\n            if (p === this.game.players[this.game.localPlayerID])\r\n              this.alertTicks = 1;\r\n            this.makeHitWarnings(true, false, false, this.direction);\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        if (this.room.playerTicked === this.targetPlayer) {\r\n          this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n          this.ticks++;\r\n          if (this.ticks % 2 === 1) {\r\n            let oldX = this.x;\r\n            let oldY = this.y;\r\n            let disablePositions = Array<astar.Position>();\r\n            for (const e of this.room.entities) {\r\n              if (e !== this) {\r\n                disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n              }\r\n            }\r\n            for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n              for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n                if (\r\n                  this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                  (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n                ) {\r\n                  // don't walk on active spiketraps\r\n                  disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n                }\r\n              }\r\n            }\r\n            let grid = [];\r\n            for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n              grid[x] = [];\r\n              for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n                if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                  grid[x][y] = this.room.roomArray[x][y];\r\n                else grid[x][y] = false;\r\n              }\r\n            }\r\n            let moves = astar.AStar.search(\r\n              grid,\r\n              this,\r\n              this.targetPlayer,\r\n              disablePositions\r\n            );\r\n            if (moves.length > 0) {\r\n              let hitPlayer = false;\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  this.game.players[i].x === moves[0].pos.x &&\r\n                  this.game.players[i].y === moves[0].pos.y\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                  hitPlayer = true;\r\n                }\r\n              }\r\n              if (!hitPlayer) {\r\n                this.tryMove(moves[0].pos.x, moves[0].pos.y);\r\n                this.drawX = this.x - oldX;\r\n                this.drawY = this.y - oldY;\r\n                if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n                else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n                else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n                else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n              }\r\n            }\r\n          } else {\r\n            this.makeHitWarnings(true, false, false, this.direction);\r\n          }\r\n        }\r\n\r\n        let targetPlayerOffline =\r\n          Object.values(this.game.offlinePlayers).indexOf(this.targetPlayer) !==\r\n          -1;\r\n        if (!this.aggro || targetPlayerOffline) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (\r\n              distance <= 4 &&\r\n              (targetPlayerOffline ||\r\n                distance < this.playerDistance(this.targetPlayer))\r\n            ) {\r\n              if (player !== this.targetPlayer) {\r\n                this.targetPlayer = player;\r\n                this.facePlayer(player);\r\n                if (player === this.game.players[this.game.localPlayerID])\r\n                  this.alertTicks = 1;\r\n                if (this.ticks % 2 === 0) {\r\n                  this.makeHitWarnings(true, false, false, this.direction);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      if (this.ticks % 2 === 0) {\r\n        this.tileX = 9;\r\n        this.tileY = 8;\r\n      } else {\r\n        this.tileX = 4;\r\n        this.tileY = 0;\r\n      }\r\n\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + (this.tileX === 4 ? 0 : Math.floor(this.frame)),\r\n        this.tileY + this.direction * 2,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY + (this.tileX === 4 ? 0.1875 : 0),\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta);\r\n    }\r\n  };\r\n}\r\n","import { Entity } from \"./entity\";\r\nimport { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Shrooms } from \"../item/shrooms\";\r\nimport { EntityType } from \"./entity\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class Mushrooms extends Entity {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n    this.room = room;\r\n    this.health = 1;\r\n    this.tileX = 9;\r\n    this.tileY = 2;\r\n    this.hasShadow = false;\r\n    this.chainPushable = false;\r\n    this.entityType = EntityType.PROP;\r\n  }\r\n\r\n  get name() {\r\n    return \"mushrooms\";\r\n  }\r\n\r\n  kill = () => {\r\n    this.dead = true;\r\n\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 30);\r\n\r\n    this.room.items.push(new Shrooms(this.room, this.x, this.y));\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    // not inherited because it doesn't have the 0.5 offset\r\n    if (!this.dead) {\r\n      this.drawX += -0.5 * this.drawX;\r\n      this.drawY += -0.5 * this.drawY;\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n}\r\n","import { Entity } from \"./entity\";\r\nimport { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { EntityType } from \"./entity\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class Pot extends Entity {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n    this.room = room;\r\n    this.health = 1;\r\n    this.tileX = 11;\r\n    this.tileY = 0;\r\n    this.hasShadow = false;\r\n    this.chainPushable = false;\r\n    this.entityType = EntityType.PROP;\r\n  }\r\n\r\n  get name() {\r\n    return \"pot\";\r\n  }\r\n\r\n  kill = () => {\r\n    this.dead = true;\r\n\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 29);\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    // not inherited because it doesn't have the 0.5 offset\r\n    if (!this.dead) {\r\n      this.drawX += -0.5 * this.drawX;\r\n      this.drawY += -0.5 * this.drawY;\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n}\r\n","import { Entity } from \"./entity\";\r\nimport { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Item } from \"../item/item\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { EntityType } from \"./entity\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class PottedPlant extends Entity {\r\n  drop: Item;\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.room = room;\r\n    this.health = 2;\r\n    this.tileX = 3;\r\n    this.tileY = 0;\r\n    this.hasShadow = false;\r\n    this.chainPushable = false;\r\n    this.entityType = EntityType.PROP;\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = rand();\r\n      if (dropProb < 0.025) this.drop = new Heart(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"plant\";\r\n  }\r\n\r\n  hurtCallback = () => {\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 28);\r\n  };\r\n\r\n  kill = () => {\r\n    this.dead = true;\r\n    this.killNoBones();\r\n\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 29);\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 28);\r\n  };\r\n  killNoBones = () => {\r\n    this.dead = true;\r\n    this.dropLoot();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    // not inherited because it doesn't have the 0.5 offset\r\n    if (!this.dead) {\r\n      this.drawX += -0.5 * this.drawX;\r\n      this.drawY += -0.5 * this.drawY;\r\n      if (this.health <= 1) this.tileX = 2;\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n\r\n  dropLoot = () => {\r\n    this.drop.level = this.room;\r\n    this.drop.x = this.x;\r\n    this.drop.y = this.y;\r\n    this.room.items.push(this.drop);\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Random } from \"../random\";\r\nimport { astar } from \"../astarclass\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { Candle } from \"../item/candle\";\r\n\r\nexport class QueenEnemy extends Entity {\r\n  frame: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  aggro: boolean;\r\n  targetPlayer: Player;\r\n  drop: Item;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 23;\r\n    this.tileY = 8;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = Random.rand();\r\n      if (dropProb < 0.005) this.drop = new Candle(this.room, 0, 0);\r\n      else if (dropProb < 0.04) this.drop = new GreenGem(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"queen\";\r\n  }\r\n\r\n  tryMove = (x: number, y: number) => {\r\n    let pointWouldBeIn = (someX: number, someY: number): boolean => {\r\n      return (\r\n        someX >= x && someX < x + this.w && someY >= y && someY < y + this.h\r\n      );\r\n    };\r\n    let enemyCollide = (enemy: Entity): boolean => {\r\n      if (enemy.x >= x + this.w || enemy.x + enemy.w <= x) return false;\r\n      if (enemy.y >= y + this.h || enemy.y + enemy.h <= y) return false;\r\n      return true;\r\n    };\r\n    for (const e of this.room.entities) {\r\n      if (e !== this && enemyCollide(e)) {\r\n        return;\r\n      }\r\n    }\r\n    for (const i in this.game.players) {\r\n      if (pointWouldBeIn(this.game.players[i].x, this.game.players[i].y)) {\r\n        return;\r\n      }\r\n    }\r\n    let tiles = [];\r\n    for (let xx = 0; xx < this.w; xx++) {\r\n      for (let yy = 0; yy < this.h; yy++) {\r\n        if (!this.room.roomArray[x + xx][y + yy].isSolid()) {\r\n          tiles.push(this.room.roomArray[x + xx][y + yy]);\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    for (let tile of tiles) {\r\n      tile.onCollideEnemy(this);\r\n    }\r\n    this.x = x;\r\n    this.y = y;\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.health -= damage;\r\n    this.healthBar.hurt();\r\n    if (this.health <= 0) {\r\n      this.kill();\r\n    } else {\r\n      GenericParticle.spawnCluster(\r\n        this.room,\r\n        this.x + 0.5,\r\n        this.y + 0.5,\r\n        this.deathParticleColor\r\n      );\r\n    }\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      this.ticks++;\r\n      if (!this.seenPlayer) {\r\n        let p = this.nearestPlayer();\r\n        if (p !== false) {\r\n          let [distance, player] = p;\r\n          if (distance <= 4) {\r\n            this.targetPlayer = player;\r\n            this.facePlayer(player);\r\n            this.seenPlayer = true;\r\n            if (player === this.game.players[this.game.localPlayerID])\r\n              this.alertTicks = 1;\r\n            this.makeHitWarnings(true, true, false, this.direction);\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        if (this.room.playerTicked === this.targetPlayer) {\r\n          this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n          let oldX = this.x;\r\n          let oldY = this.y;\r\n\r\n          let disablePositions = Array<astar.Position>();\r\n          for (const e of this.room.entities) {\r\n            if (e !== this) {\r\n              disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n            }\r\n          }\r\n          for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n            for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n              if (\r\n                this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n              ) {\r\n                // don't walk on active spiketraps\r\n                disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n              }\r\n            }\r\n          }\r\n          let grid = [];\r\n          for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n            grid[x] = [];\r\n            for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n              if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                grid[x][y] = this.room.roomArray[x][y];\r\n              else grid[x][y] = false;\r\n            }\r\n          }\r\n          let moves = astar.AStar.search(\r\n            grid,\r\n            this,\r\n            this.targetPlayer,\r\n            disablePositions,\r\n            true, //diagonals\r\n            false, //diagonalsOnly\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            false //diagonalsOmni\r\n          );\r\n          if (moves.length > 0) {\r\n            disablePositions.push({ x: oldX + 1, y: oldY } as astar.Position);\r\n            disablePositions.push({ x: oldX - 1, y: oldY } as astar.Position);\r\n            disablePositions.push({ x: oldX, y: oldY + 1 } as astar.Position);\r\n            disablePositions.push({ x: oldX, y: oldY - 1 } as astar.Position);\r\n            let moveX = moves[0].pos.x;\r\n            let moveY = moves[0].pos.y;\r\n\r\n            let hitPlayer = false;\r\n            for (const i in this.game.players) {\r\n              if (\r\n                this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                this.game.players[i].x === moveX &&\r\n                this.game.players[i].y === moveY\r\n              ) {\r\n                this.game.players[i].hurt(this.hit(), this.name);\r\n                this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                if (\r\n                  this.game.players[i] ===\r\n                  this.game.players[this.game.localPlayerID]\r\n                )\r\n                  this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n              }\r\n            }\r\n            if (!hitPlayer) {\r\n              //if ()\r\n              this.tryMove(moveX, moveY);\r\n              this.drawX = this.x - oldX;\r\n              this.drawY = this.y - oldY;\r\n            }\r\n          }\r\n          this.makeHitWarnings(true, true, false, this.direction);\r\n        }\r\n\r\n        let targetPlayerOffline =\r\n          Object.values(this.game.offlinePlayers).indexOf(this.targetPlayer) !==\r\n          -1;\r\n        if (!this.aggro || targetPlayerOffline) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (\r\n              distance <= 4 &&\r\n              (targetPlayerOffline ||\r\n                distance < this.playerDistance(this.targetPlayer))\r\n            ) {\r\n              if (player !== this.targetPlayer) {\r\n                this.targetPlayer = player;\r\n                this.facePlayer(player);\r\n                if (player === this.game.players[this.game.localPlayerID])\r\n                  this.alertTicks = 1;\r\n                this.makeHitWarnings(true, true, false, this.direction);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + Math.floor(this.frame),\r\n        this.tileY + this.direction * 2,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta);\r\n    }\r\n  };\r\n}\r\n","import { Item } from \"../item/item\";\r\nimport { Game } from \"../game\";\r\nimport { Key } from \"../item/key\";\r\nimport { Room } from \"../room\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { Armor } from \"../item/armor\";\r\nimport { Entity } from \"./entity\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Player } from \"../player\";\r\nimport { Pickaxe } from \"../weapon/pickaxe\";\r\nimport { Spellbook } from \"../weapon/spellbook\";\r\nimport { EntityType } from \"./entity\";\r\n\r\nexport class Resource extends Entity {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n\r\n    this.tileX = 12;\r\n    this.tileY = 0;\r\n    this.health = 1;\r\n    this.chainPushable = false;\r\n    this.entityType = EntityType.RESOURCE;\r\n  }\r\n\r\n  get name() {\r\n    return \"resource\";\r\n  }\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy.inventory.getWeapon().canMine === true) {\r\n      this.healthBar.hurt();\r\n      this.health -= damage;\r\n      if (this.health <= 0) this.kill();\r\n      else {\r\n        this.game.pushMessage(\"Your weapon fails to damage the rock.\");\r\n        this.hurtCallback();\r\n      }\r\n    } else return;\r\n  };\r\n\r\n  kill = () => {\r\n    this.dead = true;\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n}\r\n","import { Entity } from \"./entity\";\r\nimport { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Player } from \"../player\";\r\nimport { Sound } from \"../sound\";\r\nimport { Stone } from \"../item/stone\";\r\nimport { Resource } from \"./resource\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class Rock extends Resource {\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, game, x, y);\r\n    this.room = room;\r\n    this.health = 2;\r\n    this.tileX = 8;\r\n    this.tileY = 2;\r\n    this.hasShadow = false;\r\n    this.chainPushable = false;\r\n  }\r\n\r\n  get name() {\r\n    return \"rock\";\r\n  }\r\n\r\n  hurtCallback = () => {\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 24); //rock particle coord 0, 24\r\n\r\n    if (this.room === this.game.room) Sound.mine();\r\n  };\r\n\r\n  kill = () => {\r\n    if (this.room === this.game.room) Sound.breakRock();\r\n\r\n    this.dead = true;\r\n\r\n    GenericParticle.spawnCluster(\r\n      this.room,\r\n      this.x + 0.5,\r\n      this.y + 0.5,\r\n      \"#9badb7\"\r\n    );\r\n\r\n    this.room.items.push(new Stone(this.room, this.x, this.y));\r\n  };\r\n  killNoBones = () => {\r\n    this.kill();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    // not inherited because it doesn't have the 0.5 offset\r\n    if (!this.dead) {\r\n      this.drawX += -0.5 * this.drawX;\r\n      this.drawY += -0.5 * this.drawY;\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { astar } from \"../astarclass\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { DeathParticle } from \"../particle/deathParticle\";\r\nimport { Candle } from \"../item/candle\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class SkullEnemy extends Entity {\r\n  frame: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  aggro: boolean;\r\n  ticksSinceFirstHit: number;\r\n  flashingFrame: number;\r\n  targetPlayer: Player;\r\n  readonly REGEN_TICKS = 5;\r\n  drop: Item;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 2;\r\n    this.maxHealth = 2;\r\n    this.tileX = 5;\r\n    this.tileY = 8;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n    this.ticksSinceFirstHit = 0;\r\n    this.flashingFrame = 0;\r\n    this.deathParticleColor = \"#ffffff\";\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = rand();\r\n      if (dropProb < 0.05) this.drop = new Spear(this.room, 0, 0);\r\n      else if (dropProb < 0.01) this.drop = new RedGem(this.room, 0, 0);\r\n      //else if (dropProb < 0.2) this.drop = new Candle(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"skeleton\";\r\n  }\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.ticksSinceFirstHit = 0;\r\n    this.health -= damage;\r\n    if (this.health == 1) {\r\n      ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 3, 28);\r\n    } else this.healthBar.hurt();\r\n    if (this.health <= 0) {\r\n      ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 24);\r\n      this.kill();\r\n    } else {\r\n    }\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    //set last positions\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      if (this.health <= 1) {\r\n        this.ticksSinceFirstHit++;\r\n        if (this.ticksSinceFirstHit >= this.REGEN_TICKS) {\r\n          this.health = 2;\r\n        }\r\n      } else {\r\n        this.ticks++;\r\n        if (!this.seenPlayer) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (distance <= 4) {\r\n              this.targetPlayer = player;\r\n              this.facePlayer(player);\r\n              this.seenPlayer = true;\r\n              if (player === this.game.players[this.game.localPlayerID])\r\n                this.alertTicks = 1;\r\n              this.makeHitWarnings(true, false, false, this.direction);\r\n            }\r\n          }\r\n        } else if (this.seenPlayer) {\r\n          if (this.room.playerTicked === this.targetPlayer) {\r\n            this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n            let oldX = this.x;\r\n            let oldY = this.y;\r\n\r\n            let disablePositions = Array<astar.Position>();\r\n            for (const e of this.room.entities) {\r\n              if (e !== this) {\r\n                disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n              }\r\n            }\r\n            for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n              for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n                if (\r\n                  this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                  (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n                ) {\r\n                  // don't walk on active spiketraps\r\n                  disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n                }\r\n              }\r\n            }\r\n            let grid = [];\r\n            for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n              grid[x] = [];\r\n              for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n                if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                  grid[x][y] = this.room.roomArray[x][y];\r\n                else grid[x][y] = false;\r\n              }\r\n            }\r\n            let moves = astar.AStar.search(\r\n              grid,\r\n              this,\r\n              this.targetPlayer,\r\n              disablePositions\r\n            );\r\n            if (moves.length > 0) {\r\n              let moveX = moves[0].pos.x;\r\n              let moveY = moves[0].pos.y;\r\n\r\n              let hitPlayer = false;\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  this.game.players[i].x === moveX &&\r\n                  this.game.players[i].y === moveY\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                }\r\n              }\r\n              if (!hitPlayer) {\r\n                this.tryMove(moveX, moveY);\r\n                this.drawX = this.x - oldX;\r\n                this.drawY = this.y - oldY;\r\n                if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n                else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n                else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n                else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n              }\r\n            }\r\n            this.makeHitWarnings(true, false, false, this.direction);\r\n          }\r\n\r\n          let targetPlayerOffline =\r\n            Object.values(this.game.offlinePlayers).indexOf(\r\n              this.targetPlayer\r\n            ) !== -1;\r\n          if (!this.aggro || targetPlayerOffline) {\r\n            let p = this.nearestPlayer();\r\n            if (p !== false) {\r\n              let [distance, player] = p;\r\n              if (\r\n                distance <= 4 &&\r\n                (targetPlayerOffline ||\r\n                  distance < this.playerDistance(this.targetPlayer))\r\n              ) {\r\n                if (player !== this.targetPlayer) {\r\n                  this.targetPlayer = player;\r\n                  this.facePlayer(player);\r\n                  if (player === this.game.players[this.game.localPlayerID])\r\n                    this.alertTicks = 1;\r\n                  this.makeHitWarnings(true, false, false, this.direction);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.tileX = 5;\r\n      this.tileY = 8;\r\n      if (this.health <= 1) {\r\n        this.tileX = 3;\r\n        this.tileY = 0;\r\n        if (this.ticksSinceFirstHit >= 3) {\r\n          this.flashingFrame += 0.1 * delta;\r\n          if (Math.floor(this.flashingFrame) % 2 === 0) {\r\n            this.tileX = 2;\r\n          }\r\n        }\r\n      }\r\n\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + (this.tileX === 5 ? Math.floor(this.frame) : 0),\r\n        this.tileY + this.direction * 2,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta);\r\n    }\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Direction, Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Random } from \"../random\";\r\nimport { astar } from \"../astarclass\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { Pickaxe } from \"../weapon/pickaxe\";\r\n\r\nexport class SniperEnemy extends Entity {\r\n  frame: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  aggro: boolean;\r\n  targetPlayer: Player;\r\n  drop: Item;\r\n  dir: Direction;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 1;\r\n    this.tileY = 22;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n    this.deathParticleColor = \"#ffffff\";\r\n    this.dir = Direction.South;\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = Random.rand();\r\n      if (dropProb < 0.025) this.drop = new Pickaxe(this.room, 0, 0);\r\n      else if (dropProb < 0.02) this.drop = new GreenGem(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"sniper\";\r\n  }\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  facePlayer = (player: Player) => {\r\n    let dx = player.x - this.x;\r\n    let dy = player.y - this.y;\r\n\r\n    // Calculate angle to player in radians\r\n    let angle = Math.atan2(dy, dx); // Angle in radians\r\n    const angleStep = Math.PI / 8; // Simplified constant for angle thresholds\r\n\r\n    // Determine direction based on angle\r\n    if (angle >= -angleStep && angle < angleStep)\r\n      this.dir = Direction.East; // Right\r\n    else if (angle >= angleStep && angle < 3 * angleStep)\r\n      this.dir = Direction.SouthEast; // Down-Right\r\n    else if (angle >= 3 * angleStep && angle < 5 * angleStep)\r\n      this.dir = Direction.South; // Down\r\n    else if (angle >= 5 * angleStep && angle < 7 * angleStep)\r\n      this.dir = Direction.SouthWest; // Down-Left\r\n    else if (angle >= 7 * angleStep || angle < -7 * angleStep)\r\n      this.dir = Direction.West; // Left\r\n    else if (angle >= -7 * angleStep && angle < -5 * angleStep)\r\n      this.dir = Direction.NorthWest; // Up-Left\r\n    else if (angle >= -5 * angleStep && angle < -3 * angleStep)\r\n      this.dir = Direction.North; // Up\r\n    else if (angle >= -3 * angleStep && angle < -angleStep)\r\n      this.dir = Direction.NorthEast; // Up-Right\r\n\r\n    console.log(this.dir.toString());\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.health -= damage;\r\n    this.healthBar.hurt();\r\n    if (this.health <= 0) {\r\n      this.kill();\r\n    } else {\r\n      GenericParticle.spawnCluster(\r\n        this.room,\r\n        this.x + 0.5,\r\n        this.y + 0.5,\r\n        this.deathParticleColor\r\n      );\r\n    }\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      this.ticks++;\r\n      if (!this.seenPlayer) {\r\n        let p = this.nearestPlayer();\r\n        if (p !== false) {\r\n          let [distance, player] = p;\r\n          if (distance <= 4) {\r\n            this.targetPlayer = player;\r\n            this.facePlayer(player);\r\n            this.seenPlayer = true;\r\n            if (player === this.game.players[this.game.localPlayerID])\r\n              this.alertTicks = 1;\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        if (this.room.playerTicked === this.targetPlayer) {\r\n          this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n          let oldX = this.x;\r\n          let oldY = this.y;\r\n\r\n          let disablePositions = Array<astar.Position>();\r\n          for (const e of this.room.entities) {\r\n            if (e !== this) {\r\n              disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n            }\r\n          }\r\n          for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n            for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n              if (\r\n                this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n              ) {\r\n                // don't walk on active spiketraps\r\n                disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n              }\r\n            }\r\n          }\r\n\r\n          let grid = [];\r\n          for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n            grid[x] = [];\r\n            for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n              if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                grid[x][y] = this.room.roomArray[x][y];\r\n              else grid[x][y] = false;\r\n            }\r\n          }\r\n          let moves = astar.AStar.search(\r\n            grid,\r\n            this,\r\n            this.targetPlayer,\r\n            disablePositions,\r\n            false,\r\n            false,\r\n            true,\r\n            this.direction\r\n          );\r\n          if (moves.length > 0) {\r\n            let moveX = moves[0].pos.x;\r\n            let moveY = moves[0].pos.y;\r\n            let oldDir = this.direction;\r\n            let player = this.targetPlayer;\r\n            this.facePlayer(player);\r\n            if (moveX > oldX) this.direction = EntityDirection.RIGHT;\r\n            else if (moveX < oldX) this.direction = EntityDirection.LEFT;\r\n            else if (moveY > oldY) this.direction = EntityDirection.DOWN;\r\n            else if (moveY < oldY) this.direction = EntityDirection.UP;\r\n            if (oldDir == this.direction) {\r\n              let hitPlayer = false;\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  this.game.players[i].x === moveX &&\r\n                  this.game.players[i].y === moveY\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                }\r\n              }\r\n              if (!hitPlayer) {\r\n                this.tryMove(moveX, moveY);\r\n                this.drawX = this.x - oldX;\r\n                this.drawY = this.y - oldY;\r\n                if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n                else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n                else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n                else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (this.direction == EntityDirection.LEFT) {\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y + 1,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y - 1,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.RIGHT) {\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y + 1,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y - 1,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.DOWN) {\r\n            disablePositions.push({\r\n              x: this.x + 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x - 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.UP) {\r\n            disablePositions.push({\r\n              x: this.x + 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x - 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n          }\r\n          this.makeHitWarnings(false, false, true, this.direction);\r\n        }\r\n\r\n        let targetPlayerOffline =\r\n          Object.values(this.game.offlinePlayers).indexOf(this.targetPlayer) !==\r\n          -1;\r\n        if (!this.aggro || targetPlayerOffline) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (\r\n              distance <= 4 &&\r\n              (targetPlayerOffline ||\r\n                distance < this.playerDistance(this.targetPlayer))\r\n            ) {\r\n              if (player !== this.targetPlayer) {\r\n                this.targetPlayer = player;\r\n                this.facePlayer(player);\r\n                if (player === this.game.players[this.game.localPlayerID])\r\n                  this.alertTicks = 1;\r\n                this.makeHitWarnings(false, false, true, this.direction);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.tileY = 20 + this.dir * 2;\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 1) this.frame = 0;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + Math.floor(this.frame),\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta);\r\n    }\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { astar } from \"../astarclass\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { Floor } from \"../tile/floor\";\r\nimport { Bones } from \"../tile/bones\";\r\nimport { DeathParticle } from \"../particle/deathParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { SkullEnemy } from \"./skullEnemy\";\r\nimport { EnemySpawnAnimation } from \"../projectile/enemySpawnAnimation\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { BlueGem } from \"../item/bluegem\";\r\nimport { KnightEnemy } from \"./knightEnemy\";\r\nimport { WizardEnemy } from \"./wizardEnemy\";\r\n\r\nexport class Spawner extends Entity {\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  enemySpawnType: number;\r\n  rand: () => number;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.health = 4;\r\n    this.maxHealth = 4;\r\n    this.tileX = 6;\r\n    this.tileY = 4;\r\n    this.seenPlayer = true;\r\n    this.enemySpawnType = Game.randTable([1, 2, 2, 2, 2, 3], rand);\r\n\r\n    this.rand = rand;\r\n  }\r\n\r\n  get name() {\r\n    return \"reaper\";\r\n  }\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      this.tileX = 6;\r\n      if (this.ticks % 8 === 0) {\r\n        const positions = this.room\r\n          .getEmptyTiles()\r\n          .filter(\r\n            (t) => Math.abs(t.x - this.x) <= 1 && Math.abs(t.y - this.y) <= 1\r\n          );\r\n        if (positions.length > 0) {\r\n          this.tileX = 7;\r\n\r\n          const position = Game.randTable(positions, this.rand);\r\n\r\n          let spawned;\r\n          switch (this.enemySpawnType) {\r\n            case 1:\r\n              spawned = new KnightEnemy(\r\n                this.room,\r\n                this.game,\r\n                position.x,\r\n                position.y,\r\n                this.rand\r\n              );\r\n              break;\r\n            case 2:\r\n              spawned = new SkullEnemy(\r\n                this.room,\r\n                this.game,\r\n                position.x,\r\n                position.y,\r\n                this.rand\r\n              );\r\n              break;\r\n            case 3:\r\n              spawned = new WizardEnemy(\r\n                this.room,\r\n                this.game,\r\n                position.x,\r\n                position.y,\r\n                this.rand\r\n              );\r\n              break;\r\n          }\r\n          this.room.projectiles.push(\r\n            new EnemySpawnAnimation(this.room, spawned, position.x, position.y)\r\n          );\r\n          this.room.hitwarnings.push(\r\n            new HitWarning(this.game, position.x, position.y, this.x, this.y)\r\n          );\r\n        }\r\n      }\r\n      this.ticks++;\r\n    }\r\n  };\r\n\r\n  dropLoot = () => {\r\n    this.room.items.push(new BlueGem(this.room, this.x, this.y));\r\n  };\r\n}\r\n","import { Entity } from \"./entity\";\r\nimport { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { EntityType } from \"./entity\";\r\nimport { SkullEnemy } from \"./skullEnemy\";\r\nimport { Random } from \"../random\";\r\nimport { EnemySpawnAnimation } from \"../projectile/enemySpawnAnimation\";\r\nimport { Player } from \"../player\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spellbook } from \"../weapon/spellbook\";\r\nimport { Sound } from \"../sound\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class TombStone extends Entity {\r\n  skinType: number;\r\n  rand: () => number;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    skinType: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.skinType = skinType;\r\n    this.room = room;\r\n    this.health = 2;\r\n    this.maxHealth = 2;\r\n    this.tileX = 11 + this.skinType;\r\n    this.tileY = 2;\r\n    this.hasShadow = false;\r\n    this.pushable = false;\r\n    this.entityType = EntityType.PROP;\r\n    this.destroyable = true;\r\n    this.skinType = skinType;\r\n    this.rand = rand;\r\n    this.chainPushable = false;\r\n\r\n    let dropProb = Random.rand();\r\n    if (dropProb < 0.05) this.drop = new Spellbook(this.room, 0, 0);\r\n  }\r\n\r\n  get name() {\r\n    return \"tombstone\";\r\n  }\r\n\r\n  kill = () => {\r\n    this.dead = true;\r\n    this.dropLoot();\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    this.healthBar.hurt();\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 25);\r\n\r\n    setTimeout(() => {\r\n      Sound.hurt();\r\n    }, 100);\r\n\r\n    this.health -= damage;\r\n    if (this.health === 1) {\r\n      const positions = this.room\r\n        .getEmptyTiles()\r\n        .filter(\r\n          (t) => Math.abs(t.x - this.x) <= 1 && Math.abs(t.y - this.y) <= 1\r\n        );\r\n      if (positions.length > 0) {\r\n        for (let position of positions) {\r\n          for (const i in this.game.players) {\r\n            const playerX = this.game.players[i].x;\r\n            const playerY = this.game.players[i].y;\r\n            if (\r\n              (playerX !== position.x && playerY === position.y) ||\r\n              (playerX === position.x && playerY !== position.y)\r\n            ) {\r\n              this.room.entities.push(\r\n                new SkullEnemy(\r\n                  this.room,\r\n                  this.game,\r\n                  position.x,\r\n                  position.y,\r\n                  Random.rand\r\n                )\r\n              );\r\n            }\r\n          }\r\n        }\r\n        Sound.skeleSpawn();\r\n      }\r\n      this.tileX += 2;\r\n      //draw half broken tombstone based on skintype after it takes one damage\r\n    }\r\n    if (this.health <= 0) this.kill(), Sound.breakRock();\r\n    else this.hurtCallback(), Sound.hit();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    // not inherited because it doesn't have the 0.5 offset\r\n    if (!this.dead) {\r\n      Game.drawObj(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n\r\n    this.drawX += -0.5 * this.drawX;\r\n    this.drawY += -0.5 * this.drawY;\r\n  };\r\n}\r\n","import { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Entity } from \"./entity\";\r\nimport { Item } from \"../item/item\";\r\nimport { Key } from \"../item/key\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { Coal } from \"../item/coal\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { Shotgun } from \"../weapon/shotgun\";\r\nimport { Dagger } from \"../weapon/dagger\";\r\nimport { Armor } from \"../item/armor\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { Gold } from \"../item/gold\";\r\nimport { BlueGem } from \"../item/bluegem\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { Lantern } from \"../item/lantern\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { EntityType } from \"./entity\";\r\n\r\nlet OPEN_TIME = 150;\r\nlet FILL_COLOR = \"#5a595b\";\r\nlet OUTLINE_COLOR = \"#292c36\";\r\nlet FULL_OUTLINE = \"white\";\r\n\r\nexport class VendingMachine extends Entity {\r\n  playerOpened: Player;\r\n  open = false;\r\n  openTime = 0;\r\n  costItems: Array<Item>;\r\n  item: Item;\r\n  isInf = false;\r\n  quantity = 1;\r\n  buyAnimAmount = 0;\r\n  rand: () => number;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    item: Item,\r\n    rand: () => number\r\n  ) {\r\n    super(room, game, x, y);\r\n\r\n    this.rand = rand;\r\n\r\n    this.destroyable = false;\r\n    this.pushable = false;\r\n    this.chainPushable = false;\r\n    this.interactable = true;\r\n\r\n    this.costItems = [];\r\n    this.entityType = EntityType.FRIENDLY;\r\n\r\n    this.item = item;\r\n    if (this.item instanceof Shotgun) {\r\n      let g = new BlueGem(room, 0, 0);\r\n      g.stackCount = Game.randTable([5, 5, 6, 7], this.rand);\r\n      this.costItems = [g];\r\n    } else if (this.item instanceof Heart) {\r\n      let c = new Coin(room, 0, 0);\r\n      c.stackCount = 10;\r\n      this.costItems = [c];\r\n      this.isInf = true;\r\n    } else if (this.item instanceof Spear) {\r\n      let g = new GreenGem(room, 0, 0);\r\n      g.stackCount = Game.randTable([5, 5, 6, 7], this.rand);\r\n      this.costItems = [g];\r\n    } else if (this.item instanceof Armor) {\r\n      let g = new Gold(room, 0, 0);\r\n      g.stackCount = Game.randTable([5, 5, 6, 7], this.rand);\r\n      this.costItems = [g];\r\n    } else if (this.item instanceof DualDagger) {\r\n      let g = new RedGem(room, 0, 0);\r\n      g.stackCount = Game.randTable([5, 5, 6, 7], this.rand);\r\n      this.costItems = [g];\r\n    } else if (this.item instanceof Lantern) {\r\n      let g = new Coal(room, 0, 0);\r\n      g.stackCount = Game.randTable([25, 26, 27, 28], this.rand);\r\n      this.costItems = [g];\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"shop\";\r\n  }\r\n\r\n  interact = (player: Player) => {\r\n    if (this.isInf || this.quantity > 0) {\r\n      if (this.open) this.playerOpened.openVendingMachine = null;\r\n      this.open = true;\r\n      this.playerOpened = player;\r\n      this.openTime = Date.now();\r\n      if (\r\n        this.playerOpened.openVendingMachine &&\r\n        this.playerOpened.openVendingMachine !== this\r\n      )\r\n        this.playerOpened.openVendingMachine.close();\r\n      this.playerOpened.openVendingMachine = this;\r\n    }\r\n  };\r\n\r\n  close = () => {\r\n    this.open = false;\r\n    this.playerOpened.openVendingMachine = null;\r\n  };\r\n\r\n  space = () => {\r\n    if (this.open) {\r\n      // check if player can pay\r\n      for (const i of this.costItems) {\r\n        if (!this.playerOpened.inventory.hasItemCount(i)) return;\r\n      }\r\n\r\n      for (const i of this.costItems) {\r\n        this.playerOpened.inventory.subtractItemCount(i);\r\n      }\r\n\r\n      let x, y;\r\n      do {\r\n        x = Game.rand(this.x - 1, this.x + 1, this.rand);\r\n        y = Game.rand(this.y - 1, this.y + 1, this.rand);\r\n      } while (\r\n        (x === this.x && y === this.y) ||\r\n        this.room.roomArray[x][y].isSolid() ||\r\n        this.room.entities.some((e) => e.x === x && e.y === y)\r\n      );\r\n\r\n      let newItem = new (this.item.constructor as { new (): Item })();\r\n      newItem = newItem.constructor(this.room, x, y);\r\n      this.room.items.push(newItem);\r\n\r\n      if (!this.isInf) {\r\n        this.quantity--;\r\n        if (this.quantity <= 0) this.close();\r\n      }\r\n\r\n      this.buyAnimAmount = 0.99;\r\n      if (this.playerOpened === this.game.players[this.game.localPlayerID])\r\n        this.game.shakeScreen(0, 4);\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    let tileX = 19;\r\n    if (!this.isInf && this.quantity === 0) tileX = 20;\r\n    Game.drawObj(\r\n      tileX,\r\n      0,\r\n      1,\r\n      2,\r\n      this.x,\r\n      this.y - 1,\r\n      1,\r\n      2,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.drawableY = this.y;\r\n\r\n    if (\r\n      this.open &&\r\n      this.playerOpened === this.game.players[this.game.localPlayerID]\r\n    ) {\r\n      let s = Math.min(18, (18 * (Date.now() - this.openTime)) / OPEN_TIME); // size of box\r\n      let b = 2; // border\r\n      let g = -2; // gap\r\n      let hg = 3; // highlighted growth\r\n      let ob = 1; // outer border\r\n      let width = (this.costItems.length + 2) * (s + 2 * b + g) - g;\r\n      let height = s + 2 * b + g - g;\r\n\r\n      let cx = (this.x + 0.5) * GameConstants.TILESIZE;\r\n      let cy = (this.y - 1.5) * GameConstants.TILESIZE;\r\n\r\n      Game.ctx.fillStyle = FULL_OUTLINE;\r\n      Game.ctx.fillRect(\r\n        Math.round(cx - 0.5 * width) - ob,\r\n        Math.round(cy - 0.5 * height) - ob,\r\n        Math.round(width + 2 * ob),\r\n        Math.round(height + 2 * ob)\r\n      );\r\n      for (let x = 0; x < this.costItems.length + 2; x++) {\r\n        Game.ctx.fillStyle = OUTLINE_COLOR;\r\n        Game.ctx.fillRect(\r\n          Math.round(cx - 0.5 * width + x * (s + 2 * b + g)),\r\n          Math.round(cy - 0.5 * height),\r\n          Math.round(s + 2 * b),\r\n          Math.round(s + 2 * b)\r\n        );\r\n        if (x !== this.costItems.length) {\r\n          Game.ctx.fillStyle = FILL_COLOR;\r\n          Game.ctx.fillRect(\r\n            Math.round(cx - 0.5 * width + x * (s + 2 * b + g) + b),\r\n            Math.round(cy - 0.5 * height + b),\r\n            Math.round(s),\r\n            Math.round(s)\r\n          );\r\n        }\r\n      }\r\n\r\n      if (Date.now() - this.openTime >= OPEN_TIME) {\r\n        for (let i = 0; i < this.costItems.length + 2; i++) {\r\n          let drawX = Math.round(\r\n            cx -\r\n              0.5 * width +\r\n              i * (s + 2 * b + g) +\r\n              b +\r\n              Math.floor(0.5 * s) -\r\n              0.5 * GameConstants.TILESIZE\r\n          );\r\n          let drawY = Math.round(\r\n            cy -\r\n              0.5 * height +\r\n              b +\r\n              Math.floor(0.5 * s) -\r\n              0.5 * GameConstants.TILESIZE\r\n          );\r\n\r\n          let drawXScaled = drawX / GameConstants.TILESIZE;\r\n          let drawYScaled = drawY / GameConstants.TILESIZE;\r\n\r\n          if (i < this.costItems.length) {\r\n            let a = 1;\r\n            if (!this.playerOpened.inventory.hasItemCount(this.costItems[i]))\r\n              a = 0.15;\r\n            this.costItems[i].drawIcon(delta, drawXScaled, drawYScaled, a);\r\n          } else if (i === this.costItems.length) {\r\n            Game.drawFX(0, 1, 1, 1, drawXScaled, drawYScaled, 1, 1);\r\n          } else if (i === this.costItems.length + 1) {\r\n            this.item.drawIcon(delta, drawXScaled, drawYScaled);\r\n          }\r\n        }\r\n      }\r\n      this.buyAnimAmount *= this.buyAnimAmount;\r\n      if (GameConstants.ALPHA_ENABLED)\r\n        Game.ctx.globalAlpha = this.buyAnimAmount;\r\n      Game.ctx.fillStyle = FULL_OUTLINE;\r\n      Game.ctx.fillRect(\r\n        Math.round(cx - 0.5 * width) - ob,\r\n        Math.round(cy - 0.5 * height) - ob,\r\n        Math.round(width + 2 * ob),\r\n        Math.round(height + 2 * ob)\r\n      );\r\n      Game.ctx.globalAlpha = 1.0;\r\n    }\r\n  };\r\n}\r\n","import { Entity } from \"./entity\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { astar } from \"../astarclass\";\r\nimport { Heart } from \"../item/heart\";\r\nimport { Floor } from \"../tile/floor\";\r\nimport { Bones } from \"../tile/bones\";\r\nimport { DeathParticle } from \"../particle/deathParticle\";\r\nimport { WizardTeleportParticle } from \"../particle/wizardTeleportParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { WizardFireball } from \"../projectile/wizardFireball\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Player } from \"../player\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { BlueGem } from \"../item/bluegem\";\r\nimport { Random } from \"../random\";\r\nimport { Item } from \"../item/item\";\r\n\r\nexport enum WizardState {\r\n  idle,\r\n  attack,\r\n  justAttacked,\r\n  teleport,\r\n}\r\n\r\nexport class WizardEnemy extends Entity {\r\n  ticks: number;\r\n  state: WizardState;\r\n  frame: number;\r\n  seenPlayer: boolean;\r\n  rand: () => number;\r\n  readonly ATTACK_RADIUS = 5;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.health = 1;\r\n    this.tileX = 6;\r\n    this.tileY = 0;\r\n    this.frame = 0;\r\n    this.state = WizardState.attack;\r\n    this.seenPlayer = false;\r\n    this.alertTicks = 0;\r\n    this.rand = rand;\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      if (this.rand() < 0.02)\r\n        this.drop = new BlueGem(this.room, this.x, this.y);\r\n      else this.drop = new Coin(this.room, this.x, this.y);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"wizard bomber\";\r\n  }\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  withinAttackingRangeOfPlayer = (): boolean => {\r\n    let withinRange = false;\r\n    for (const i in this.game.players) {\r\n      if (\r\n        (this.x - this.game.players[i].x) ** 2 +\r\n          (this.y - this.game.players[i].y) ** 2 <=\r\n        this.ATTACK_RADIUS ** 2\r\n      ) {\r\n        withinRange = true;\r\n      }\r\n    }\r\n    return withinRange;\r\n  };\r\n\r\n  shuffle = (a) => {\r\n    let j, x, i;\r\n    for (i = a.length - 1; i > 0; i--) {\r\n      j = Math.floor(Random.rand() * (i + 1));\r\n      x = a[i];\r\n      a[i] = a[j];\r\n      a[j] = x;\r\n    }\r\n    return a;\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      if (!this.seenPlayer) {\r\n        let p = this.nearestPlayer();\r\n        if (p !== false) {\r\n          let [distance, player] = p;\r\n          if (distance <= 4) {\r\n            this.seenPlayer = true;\r\n            this.alertTicks = 1;\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n        switch (this.state) {\r\n          case WizardState.attack:\r\n            if (\r\n              this.room.getTile(this.x - 1, this.y) &&\r\n              !this.room.roomArray[this.x - 1][this.y].isSolid()\r\n            ) {\r\n              this.room.projectiles.push(\r\n                new WizardFireball(this, this.x - 1, this.y)\r\n              );\r\n              if (\r\n                this.room.getTile(this.x - 2, this.y) &&\r\n                !this.room.roomArray[this.x - 2][this.y].isSolid()\r\n              ) {\r\n                this.room.projectiles.push(\r\n                  new WizardFireball(this, this.x - 2, this.y)\r\n                );\r\n              }\r\n            }\r\n            if (\r\n              this.room.getTile(this.x + 1, this.y) &&\r\n              !this.room.roomArray[this.x + 1][this.y].isSolid()\r\n            ) {\r\n              this.room.projectiles.push(\r\n                new WizardFireball(this, this.x + 1, this.y)\r\n              );\r\n              if (\r\n                this.room.getTile(this.x + 2, this.y) &&\r\n                !this.room.roomArray[this.x + 2][this.y].isSolid()\r\n              ) {\r\n                this.room.projectiles.push(\r\n                  new WizardFireball(this, this.x + 2, this.y)\r\n                );\r\n              }\r\n            }\r\n            if (\r\n              this.room.getTile(this.x, this.y - 1) &&\r\n              !this.room.roomArray[this.x][this.y - 1].isSolid()\r\n            ) {\r\n              this.room.projectiles.push(\r\n                new WizardFireball(this, this.x, this.y - 1)\r\n              );\r\n              if (\r\n                this.room.getTile(this.x, this.y - 2) &&\r\n                !this.room.roomArray[this.x][this.y - 2].isSolid()\r\n              ) {\r\n                this.room.projectiles.push(\r\n                  new WizardFireball(this, this.x, this.y - 2)\r\n                );\r\n              }\r\n            }\r\n            if (\r\n              this.room.getTile(this.x, this.y + 1) &&\r\n              !this.room.roomArray[this.x][this.y + 1].isSolid()\r\n            ) {\r\n              this.room.projectiles.push(\r\n                new WizardFireball(this, this.x, this.y + 1)\r\n              );\r\n              if (\r\n                this.room.getTile(this.x, this.y + 2) &&\r\n                !this.room.roomArray[this.x][this.y + 2].isSolid()\r\n              ) {\r\n                this.room.projectiles.push(\r\n                  new WizardFireball(this, this.x, this.y + 2)\r\n                );\r\n              }\r\n            }\r\n            this.state = WizardState.justAttacked;\r\n            break;\r\n          case WizardState.justAttacked:\r\n            this.state = WizardState.idle;\r\n            break;\r\n          case WizardState.teleport:\r\n            let oldX = this.x;\r\n            let oldY = this.y;\r\n            let min = 100000;\r\n            let bestPos;\r\n            let emptyTiles = this.shuffle(this.room.getEmptyTiles());\r\n            let optimalDist = Game.randTable(\r\n              [2, 2, 3, 3, 3, 3, 3],\r\n              Random.rand\r\n            );\r\n            // pick a random player to target\r\n            let player_ids = [];\r\n            for (const i in this.game.players) player_ids.push(i);\r\n            let target_player_id = Game.randTable(player_ids, Random.rand);\r\n            for (let t of emptyTiles) {\r\n              let newPos = t;\r\n              let dist =\r\n                Math.abs(newPos.x - this.game.players[target_player_id].x) +\r\n                Math.abs(newPos.y - this.game.players[target_player_id].y);\r\n              if (Math.abs(dist - optimalDist) < Math.abs(min - optimalDist)) {\r\n                min = dist;\r\n                bestPos = newPos;\r\n              }\r\n            }\r\n            this.tryMove(bestPos.x, bestPos.y);\r\n            this.drawX = this.x - oldX;\r\n            this.drawY = this.y - oldY;\r\n            this.frame = 0; // trigger teleport animation\r\n            this.room.particles.push(new WizardTeleportParticle(oldX, oldY));\r\n            if (this.withinAttackingRangeOfPlayer()) {\r\n              this.state = WizardState.attack;\r\n            } else {\r\n              this.state = WizardState.idle;\r\n            }\r\n            break;\r\n          case WizardState.idle:\r\n            this.state = WizardState.teleport;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      if (this.state === WizardState.attack) this.tileX = 7;\r\n      else this.tileX = 6;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      if (this.frame >= 0) {\r\n        Game.drawMob(\r\n          Math.floor(this.frame) + 6,\r\n          2,\r\n          1,\r\n          2,\r\n          this.x,\r\n          this.y - 1.5,\r\n          1,\r\n          2,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n        this.frame += 0.4 * delta;\r\n        if (this.frame > 11) this.frame = -1;\r\n      } else {\r\n        Game.drawMob(\r\n          this.tileX,\r\n          this.tileY,\r\n          1,\r\n          2,\r\n          this.x - this.drawX,\r\n          this.y - 1.5 - this.drawY,\r\n          1,\r\n          2,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      }\r\n      if (!this.seenPlayer) {\r\n        this.drawSleepingZs(delta);\r\n      }\r\n      if (this.alertTicks > 0) {\r\n        this.drawExclamation(delta);\r\n      }\r\n    }\r\n  };\r\n\r\n  kill = () => {\r\n    if (this.room.roomArray[this.x][this.y] instanceof Floor) {\r\n      let b = new Bones(this.room, this.x, this.y);\r\n      b.skin = this.room.roomArray[this.x][this.y].skin;\r\n      this.room.roomArray[this.x][this.y] = b;\r\n    }\r\n\r\n    this.dead = true;\r\n    this.room.particles.push(new DeathParticle(this.x, this.y));\r\n\r\n    this.dropLoot();\r\n  };\r\n}\r\n","import { Entity, EntityDirection } from \"./entity\";\r\nimport { Direction, Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Coin } from \"../item/coin\";\r\nimport { RedGem } from \"../item/redgem\";\r\nimport { Item } from \"../item/item\";\r\nimport { Spear } from \"../weapon/spear\";\r\nimport { DualDagger } from \"../weapon/dualdagger\";\r\nimport { GreenGem } from \"../item/greengem\";\r\nimport { Random } from \"../random\";\r\nimport { astar } from \"../astarclass\";\r\nimport { SpikeTrap } from \"../tile/spiketrap\";\r\nimport { Pickaxe } from \"../weapon/pickaxe\";\r\nimport { ImageParticle } from \"../particle/imageParticle\";\r\n\r\nexport class ZombieEnemy extends Entity {\r\n  frame: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  aggro: boolean;\r\n  targetPlayer: Player;\r\n  drop: Item;\r\n  dir: Direction;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    rand: () => number,\r\n    drop?: Item\r\n  ) {\r\n    super(room, game, x, y);\r\n    this.ticks = 0;\r\n    this.frame = 0;\r\n    this.health = 1;\r\n    this.maxHealth = 1;\r\n    this.tileX = 17;\r\n    this.tileY = 8;\r\n    this.seenPlayer = false;\r\n    this.aggro = false;\r\n    this.dir = Direction.South;\r\n\r\n    if (drop) this.drop = drop;\r\n    else {\r\n      let dropProb = Random.rand();\r\n      if (dropProb < 0.025) this.drop = new Pickaxe(this.room, 0, 0);\r\n      else if (dropProb < 0.02) this.drop = new GreenGem(this.room, 0, 0);\r\n      else this.drop = new Coin(this.room, 0, 0);\r\n    }\r\n  }\r\n\r\n  get name() {\r\n    return \"zombie\";\r\n  }\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  hurt = (playerHitBy: Player, damage: number) => {\r\n    if (playerHitBy) {\r\n      this.aggro = true;\r\n      this.targetPlayer = playerHitBy;\r\n      this.facePlayer(playerHitBy);\r\n      if (playerHitBy === this.game.players[this.game.localPlayerID])\r\n        this.alertTicks = 2; // this is really 1 tick, it will be decremented immediately in tick()\r\n    }\r\n    this.health -= damage;\r\n    ImageParticle.spawnCluster(this.room, this.x + 0.5, this.y + 0.5, 0, 26);\r\n    this.healthBar.hurt();\r\n    if (this.health <= 0) {\r\n      this.kill();\r\n    } else {\r\n    }\r\n  };\r\n\r\n  tick = () => {\r\n    this.lastX = this.x;\r\n    this.lastY = this.y;\r\n    if (!this.dead) {\r\n      if (this.skipNextTurns > 0) {\r\n        this.skipNextTurns--;\r\n        return;\r\n      }\r\n      this.ticks++;\r\n      if (!this.seenPlayer) {\r\n        let p = this.nearestPlayer();\r\n        if (p !== false) {\r\n          let [distance, player] = p;\r\n          if (distance <= 4) {\r\n            this.targetPlayer = player;\r\n            this.facePlayer(player);\r\n            this.seenPlayer = true;\r\n            if (player === this.game.players[this.game.localPlayerID])\r\n              this.alertTicks = 1;\r\n            this.makeHitWarnings(false, false, true, this.direction);\r\n          }\r\n        }\r\n      } else if (this.seenPlayer) {\r\n        if (this.room.playerTicked === this.targetPlayer) {\r\n          this.alertTicks = Math.max(0, this.alertTicks - 1);\r\n          let oldX = this.x;\r\n          let oldY = this.y;\r\n\r\n          let disablePositions = Array<astar.Position>();\r\n          for (const e of this.room.entities) {\r\n            if (e !== this) {\r\n              disablePositions.push({ x: e.x, y: e.y } as astar.Position);\r\n            }\r\n          }\r\n          for (let xx = this.x - 1; xx <= this.x + 1; xx++) {\r\n            for (let yy = this.y - 1; yy <= this.y + 1; yy++) {\r\n              if (\r\n                this.room.roomArray[xx][yy] instanceof SpikeTrap &&\r\n                (this.room.roomArray[xx][yy] as SpikeTrap).on\r\n              ) {\r\n                // don't walk on active spiketraps\r\n                disablePositions.push({ x: xx, y: yy } as astar.Position);\r\n              }\r\n            }\r\n          }\r\n\r\n          let grid = [];\r\n          for (let x = 0; x < this.room.roomX + this.room.width; x++) {\r\n            grid[x] = [];\r\n            for (let y = 0; y < this.room.roomY + this.room.height; y++) {\r\n              if (this.room.roomArray[x] && this.room.roomArray[x][y])\r\n                grid[x][y] = this.room.roomArray[x][y];\r\n              else grid[x][y] = false;\r\n            }\r\n          }\r\n          let moves = astar.AStar.search(\r\n            grid,\r\n            this,\r\n            this.targetPlayer,\r\n            disablePositions,\r\n            false,\r\n            false,\r\n            true,\r\n            this.direction\r\n          );\r\n          if (moves.length > 0) {\r\n            let moveX = moves[0].pos.x;\r\n            let moveY = moves[0].pos.y;\r\n            let oldDir = this.direction;\r\n            let player = this.targetPlayer;\r\n            this.facePlayer(player);\r\n            if (moveX > oldX) this.direction = EntityDirection.RIGHT;\r\n            else if (moveX < oldX) this.direction = EntityDirection.LEFT;\r\n            else if (moveY > oldY) this.direction = EntityDirection.DOWN;\r\n            else if (moveY < oldY) this.direction = EntityDirection.UP;\r\n            if (oldDir == this.direction) {\r\n              let hitPlayer = false;\r\n              for (const i in this.game.players) {\r\n                if (\r\n                  this.game.rooms[this.game.players[i].levelID] === this.room &&\r\n                  this.game.players[i].x === moveX &&\r\n                  this.game.players[i].y === moveY\r\n                ) {\r\n                  this.game.players[i].hurt(this.hit(), this.name);\r\n                  this.drawX = 0.5 * (this.x - this.game.players[i].x);\r\n                  this.drawY = 0.5 * (this.y - this.game.players[i].y);\r\n                  if (\r\n                    this.game.players[i] ===\r\n                    this.game.players[this.game.localPlayerID]\r\n                  )\r\n                    this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n                }\r\n              }\r\n              if (!hitPlayer) {\r\n                this.tryMove(moveX, moveY);\r\n                this.drawX = this.x - oldX;\r\n                this.drawY = this.y - oldY;\r\n                if (this.x > oldX) this.direction = EntityDirection.RIGHT;\r\n                else if (this.x < oldX) this.direction = EntityDirection.LEFT;\r\n                else if (this.y > oldY) this.direction = EntityDirection.DOWN;\r\n                else if (this.y < oldY) this.direction = EntityDirection.UP;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (this.direction == EntityDirection.LEFT) {\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y + 1,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y - 1,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.RIGHT) {\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y + 1,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x,\r\n              y: this.y - 1,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.DOWN) {\r\n            disablePositions.push({\r\n              x: this.x + 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x - 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n          }\r\n          if (this.direction == EntityDirection.UP) {\r\n            disablePositions.push({\r\n              x: this.x + 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n            disablePositions.push({\r\n              x: this.x - 1,\r\n              y: this.y,\r\n            } as astar.Position);\r\n          }\r\n          this.makeHitWarnings(false, false, true, this.direction);\r\n        }\r\n\r\n        let targetPlayerOffline =\r\n          Object.values(this.game.offlinePlayers).indexOf(this.targetPlayer) !==\r\n          -1;\r\n        if (!this.aggro || targetPlayerOffline) {\r\n          let p = this.nearestPlayer();\r\n          if (p !== false) {\r\n            let [distance, player] = p;\r\n            if (\r\n              distance <= 4 &&\r\n              (targetPlayerOffline ||\r\n                distance < this.playerDistance(this.targetPlayer))\r\n            ) {\r\n              if (player !== this.targetPlayer) {\r\n                this.targetPlayer = player;\r\n                this.facePlayer(player);\r\n                if (player === this.game.players[this.game.localPlayerID])\r\n                  this.alertTicks = 1;\r\n                this.makeHitWarnings(false, false, true, this.direction);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.frame += 0.1 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n\r\n      if (this.hasShadow)\r\n        Game.drawMob(\r\n          0,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x - this.drawX,\r\n          this.y - this.drawY,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      Game.drawMob(\r\n        this.tileX + Math.floor(this.frame),\r\n        this.tileY + this.direction * 2,\r\n        1,\r\n        2,\r\n        this.x - this.drawX,\r\n        this.y - 1.5 - this.drawY,\r\n        1,\r\n        2,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n    if (!this.seenPlayer) {\r\n      this.drawSleepingZs(delta);\r\n    }\r\n    if (this.alertTicks > 0) {\r\n      this.drawExclamation(delta);\r\n    }\r\n  };\r\n}\r\n","import { GameConstants } from \"./gameConstants\";\r\nimport { Room } from \"./room\";\r\nimport { Player } from \"./player\";\r\nimport { Door } from \"./tile/door\";\r\nimport { Sound } from \"./sound\";\r\nimport { LevelConstants } from \"./levelConstants\";\r\nimport { LevelGenerator } from \"./levelGenerator\";\r\nimport { Input, InputEnum } from \"./input\";\r\nimport { DownLadder } from \"./tile/downLadder\";\r\nimport { ServerAddress } from \"./serverAddress\";\r\nimport { TextBox } from \"./textbox\";\r\nimport { createGameState, GameState, loadGameState } from \"./gameState\";\r\nimport { Random } from \"./random\";\r\nimport { DoorDir } from \"./tile/door\";\r\nimport { Level } from \"./level\";\r\n\r\nexport enum LevelState {\r\n  IN_LEVEL,\r\n  TRANSITIONING,\r\n  TRANSITIONING_LADDER,\r\n}\r\n\r\nexport enum Direction {\r\n  North,\r\n  NorthEast,\r\n  East,\r\n  SouthEast,\r\n  South,\r\n  SouthWest,\r\n  West,\r\n  NorthWest,\r\n  Center,\r\n}\r\n\r\nexport class ChatMessage {\r\n  message: string;\r\n  timestamp: number;\r\n  constructor(message: string) {\r\n    this.message = message;\r\n    this.timestamp = Date.now();\r\n  }\r\n}\r\n\r\nlet getShadeCanvasKey = (\r\n  set: HTMLImageElement,\r\n  sx: number,\r\n  sy: number,\r\n  sw: number,\r\n  sh: number,\r\n  opacity: number\r\n): string => {\r\n  return set.src + \",\" + sx + \",\" + sy + \",\" + sw + \",\" + sh + \",\" + opacity;\r\n};\r\n\r\n// fps counter\r\nconst times = [];\r\nlet fps;\r\n\r\nexport class Game {\r\n  static ctx: CanvasRenderingContext2D;\r\n  static shade_canvases: Record<string, HTMLCanvasElement>;\r\n  prevLevel: Room; // for transitions\r\n  room: Room;\r\n  rooms: Array<Room>;\r\n  levelgen: LevelGenerator;\r\n  localPlayerID = \"localplayer\";\r\n  players: Record<string, Player>;\r\n  offlinePlayers: Record<string, Player>;\r\n  levelState: LevelState;\r\n  transitionStartTime: number;\r\n  transitionX: number;\r\n  transitionY: number;\r\n  upwardTransition: boolean;\r\n  sideTransition: boolean;\r\n  sideTransitionDirection: number;\r\n  transitioningLadder: any;\r\n  screenShakeX: number;\r\n  screenShakeY: number;\r\n  chat: Array<ChatMessage>;\r\n  chatOpen: boolean;\r\n  chatTextBox: TextBox;\r\n  previousFrameTimestamp: number;\r\n\r\n  mostRecentInputReceived = true;\r\n\r\n  loginMessage: string = \"\";\r\n  username: string;\r\n  usernameTextBox: TextBox;\r\n  passwordTextBox: TextBox;\r\n  worldCodes: Array<string>;\r\n  selectedWorldCode: number;\r\n\r\n  static scale;\r\n  static tileset: HTMLImageElement;\r\n  static objset: HTMLImageElement;\r\n  static mobset: HTMLImageElement;\r\n  static itemset: HTMLImageElement;\r\n  static fxset: HTMLImageElement;\r\n  static fontsheet: HTMLImageElement;\r\n\r\n  static text_rendering_canvases: Record<string, HTMLCanvasElement>;\r\n  static readonly letters = \"abcdefghijklmnopqrstuvwxyz1234567890,.!?:'()[]%-/\";\r\n  static readonly letter_widths = [\r\n    4, 4, 4, 4, 3, 3, 4, 4, 1, 4, 4, 3, 5, 5, 4, 4, 4, 4, 4, 3, 4, 5, 5, 5, 5,\r\n    3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 2, 1, 1, 4, 1, 1, 2, 2, 2, 2, 5, 3, 3,\r\n  ];\r\n  static readonly letter_height = 6;\r\n  static letter_positions = [];\r\n\r\n  // [min, max] inclusive\r\n  static rand = (min: number, max: number, rand): number => {\r\n    if (max < min) return min;\r\n    return Math.floor(rand() * (max - min + 1) + min);\r\n  };\r\n\r\n  static randTable = (table: any[], rand): any => {\r\n    return table[Game.rand(0, table.length - 1, rand)];\r\n  };\r\n\r\n  constructor() {\r\n    window.addEventListener(\"load\", () => {\r\n      let canvas = document.getElementById(\"gameCanvas\");\r\n      Game.ctx = (canvas as HTMLCanvasElement).getContext(\"2d\", {\r\n        alpha: false,\r\n      }) as CanvasRenderingContext2D;\r\n\r\n      // Create TextBox instances and associate them with HTML elements\r\n      const usernameElement = document.createElement(\"input\");\r\n      usernameElement.type = \"text\";\r\n      usernameElement.autocomplete = \"off\";\r\n      usernameElement.autocapitalize = \"off\";\r\n      usernameElement.style.position = \"absolute\";\r\n      usernameElement.style.left = \"-1000px\"; // Position off-screen\r\n      const passwordElement = document.createElement(\"input\");\r\n      passwordElement.type = \"password\";\r\n      passwordElement.style.position = \"absolute\";\r\n      passwordElement.style.left = \"-1000px\"; // Position off-screen\r\n      const chatElement = document.createElement(\"input\");\r\n      chatElement.type = \"text\";\r\n      chatElement.style.position = \"absolute\";\r\n      chatElement.style.left = \"-1000px\"; // Position off-screen\r\n      document.body.appendChild(usernameElement);\r\n      document.body.appendChild(passwordElement);\r\n      document.body.appendChild(chatElement);\r\n\r\n      document.addEventListener(\r\n        \"click\",\r\n        () => {\r\n          usernameElement.focus();\r\n        },\r\n        { once: true }\r\n      );\r\n\r\n      this.chat = [];\r\n      this.chatTextBox = new TextBox(chatElement);\r\n      this.chatTextBox.setEnterCallback(() => {\r\n        if (this.chatTextBox.text.length > 0) {\r\n          this.chat.push(new ChatMessage(this.chatTextBox.text));\r\n          this.chatTextBox.clear();\r\n        } else {\r\n          this.chatOpen = false;\r\n        }\r\n      });\r\n      this.chatTextBox.setEscapeCallback(() => {\r\n        this.chatOpen = false;\r\n      });\r\n      this.worldCodes = [];\r\n      this.selectedWorldCode = 0;\r\n\r\n      Game.shade_canvases = {};\r\n      Game.text_rendering_canvases = {};\r\n\r\n      let resourcesLoaded = 0;\r\n      const NUM_RESOURCES = 6;\r\n\r\n      Game.tileset = new Image();\r\n      Game.tileset.onload = () => { resourcesLoaded++; }\r\n      Game.tileset.src = \"res/tileset.png\";\r\n      Game.objset = new Image();\r\n      Game.objset.onload = () => { resourcesLoaded++; }\r\n      Game.objset.src = \"res/objset.png\";\r\n      Game.mobset = new Image();\r\n      Game.mobset.onload = () => { resourcesLoaded++; }\r\n      Game.mobset.src = \"res/mobset.png\";\r\n      Game.itemset = new Image();\r\n      Game.itemset.onload = () => { resourcesLoaded++; }\r\n      Game.itemset.src = \"res/itemset.png\";\r\n      Game.fxset = new Image();\r\n      Game.fxset.onload = () => { resourcesLoaded++; }\r\n      Game.fxset.src = \"res/fxset.png\";\r\n      Game.fontsheet = new Image();\r\n      Game.fontsheet.onload = () => { resourcesLoaded++; }\r\n      Game.fontsheet.src = \"res/font.png\";\r\n\r\n      let checkResourcesLoaded = () => {\r\n        if (resourcesLoaded < NUM_RESOURCES) {\r\n          window.setTimeout(checkResourcesLoaded, 500);\r\n        } else {\r\n          console.log(\"loaded all images\");\r\n\r\n          // proceed with constructor\r\n\r\n          Game.scale = 1;\r\n\r\n          Sound.loadSounds();\r\n          Sound.playMusic(); // loops forever\r\n\r\n          document.addEventListener(\r\n            \"touchstart\",\r\n            function (e) {\r\n              if (e.target == canvas) {\r\n                e.preventDefault();\r\n              }\r\n            },\r\n            false\r\n          );\r\n          document.addEventListener(\r\n            \"touchend\",\r\n            function (e) {\r\n              if (e.target == canvas) {\r\n                e.preventDefault();\r\n              }\r\n            },\r\n            false\r\n          );\r\n          document.addEventListener(\r\n            \"touchmove\",\r\n            function (e) {\r\n              if (e.target == canvas) {\r\n                e.preventDefault();\r\n              }\r\n            },\r\n            false\r\n          );\r\n\r\n          document.addEventListener(\"touchstart\", Input.handleTouchStart, {\r\n            passive: false,\r\n          });\r\n          document.addEventListener(\"touchmove\", Input.handleTouchMove, {\r\n            passive: false,\r\n          });\r\n          document.addEventListener(\"touchend\", Input.handleTouchEnd, {\r\n            passive: false,\r\n          });\r\n\r\n          Input.keyDownListener = (key: string) => {\r\n            this.keyDownListener(key);\r\n          };\r\n\r\n          window.requestAnimationFrame(this.run);\r\n          this.onResize();\r\n          window.addEventListener(\"resize\", this.onResize);\r\n\r\n          this.players = {};\r\n          this.offlinePlayers = {};\r\n          this.chatOpen = false;\r\n\r\n          this.screenShakeX = 0;\r\n          this.screenShakeY = 0;\r\n\r\n          this.levelState = LevelState.IN_LEVEL;\r\n\r\n          let gs = new GameState();\r\n          gs.seed = (Math.random() * 4294967296) >>> 0;\r\n          gs.randomState = (Math.random() * 4294967296) >>> 0;\r\n          loadGameState(this, [this.localPlayerID], gs, true);\r\n        }\r\n      }\r\n      checkResourcesLoaded();\r\n    });\r\n  }\r\n\r\n  keyDownListener = (key: string) => {\r\n    if (!this.chatOpen) {\r\n      switch (key.toUpperCase()) {\r\n        case \"C\":\r\n          this.chatOpen = true;\r\n          break;\r\n        case \"/\":\r\n          this.chatOpen = true;\r\n          this.chatTextBox.clear();\r\n          this.chatTextBox.handleKeyPress(key);\r\n          break;\r\n        case \"A\":\r\n        case \"ARROWLEFT\":\r\n          this.players[this.localPlayerID].inputHandler(InputEnum.LEFT);\r\n          break;\r\n        case \"D\":\r\n        case \"ARROWRIGHT\":\r\n          this.players[this.localPlayerID].inputHandler(InputEnum.RIGHT);\r\n          break;\r\n        case \"W\":\r\n        case \"ARROWUP\":\r\n          this.players[this.localPlayerID].inputHandler(InputEnum.UP);\r\n          break;\r\n        case \"S\":\r\n        case \"ARROWDOWN\":\r\n          this.players[this.localPlayerID].inputHandler(InputEnum.DOWN);\r\n          break;\r\n        case \" \":\r\n          this.players[this.localPlayerID].inputHandler(InputEnum.SPACE);\r\n          break;\r\n        case \"I\":\r\n          this.players[this.localPlayerID].inputHandler(InputEnum.I);\r\n          break;\r\n        case \"Q\":\r\n          this.players[this.localPlayerID].inputHandler(InputEnum.Q);\r\n          break;\r\n      }\r\n    } else {\r\n      this.chatTextBox.handleKeyPress(key);\r\n    }\r\n  };\r\n\r\n  changeLevel = (player: Player, newLevel: Room) => {\r\n    player.levelID = this.rooms.indexOf(newLevel);\r\n    if (this.players[this.localPlayerID] === player) {\r\n      //this.level.exitLevel();\r\n      this.room = newLevel;\r\n    }\r\n    newLevel.enterLevel(player);\r\n  };\r\n\r\n  changeLevelThroughLadder = (player: Player, ladder: any) => {\r\n    player.levelID = this.rooms.indexOf(ladder.linkedLevel);\r\n\r\n    if (ladder instanceof DownLadder) {\r\n      player.map.saveOldMap();\r\n      ladder.generate();\r\n      //let newLevel = new Level(1);\r\n    }\r\n\r\n    if (this.players[this.localPlayerID] === player) {\r\n      this.levelState = LevelState.TRANSITIONING_LADDER;\r\n      this.transitionStartTime = Date.now();\r\n      this.transitioningLadder = ladder;\r\n    } else {\r\n      ladder.linkedLevel.enterLevel(player, ladder.linkedLevel); // since it's not a local player, don't wait for transition\r\n    }\r\n  };\r\n\r\n  changeLevelThroughDoor = (player: Player, door: any, side?: number) => {\r\n    player.levelID = this.rooms.indexOf(door.room);\r\n\r\n    if (this.players[this.localPlayerID] === player) {\r\n      this.levelState = LevelState.TRANSITIONING;\r\n      this.transitionStartTime = Date.now();\r\n\r\n      let oldX = this.players[this.localPlayerID].x;\r\n      let oldY = this.players[this.localPlayerID].y;\r\n\r\n      this.prevLevel = this.room;\r\n      //this.level.exitLevel();\r\n      this.room = door.room;\r\n      door.room.enterLevelThroughDoor(player, door, side);\r\n\r\n      this.transitionX =\r\n        (this.players[this.localPlayerID].x - oldX) * GameConstants.TILESIZE;\r\n      this.transitionY =\r\n        (this.players[this.localPlayerID].y - oldY) * GameConstants.TILESIZE;\r\n\r\n      this.upwardTransition = false;\r\n      this.sideTransition = false;\r\n      this.sideTransitionDirection = side;\r\n      if (\r\n        door instanceof Door &&\r\n        [DoorDir.East, DoorDir.West].includes(door.doorDir)\r\n      )\r\n        this.sideTransition = true;\r\n      else if (door instanceof Door && door.doorDir === DoorDir.South)\r\n        this.upwardTransition = true;\r\n    } else {\r\n      door.room.enterLevelThroughDoor(player, door, side);\r\n    }\r\n    player.map.saveMapData();\r\n  };\r\n\r\n  run = (timestamp: number) => {\r\n    if (!this.previousFrameTimestamp)\r\n      this.previousFrameTimestamp = timestamp - 1000.0 / GameConstants.FPS;\r\n\r\n    // normalized so 1.0 = 60fps\r\n    let delta = ((timestamp - this.previousFrameTimestamp) * 60.0) / 1000.0;\r\n\r\n    while (times.length > 0 && times[0] <= timestamp - 1000) {\r\n      times.shift();\r\n    }\r\n    times.push(timestamp);\r\n    fps = times.length;\r\n\r\n    this.update();\r\n    this.draw(delta);\r\n    window.requestAnimationFrame(this.run);\r\n\r\n    this.previousFrameTimestamp = timestamp;\r\n  };\r\n\r\n  update = () => {\r\n    Input.checkIsTapHold();\r\n\r\n    if (\r\n      Input.lastPressTime !== 0 &&\r\n      Date.now() - Input.lastPressTime > GameConstants.KEY_REPEAT_TIME\r\n    ) {\r\n      Input.onKeydown({\r\n        repeat: false,\r\n        key: Input.lastPressKey,\r\n      } as KeyboardEvent);\r\n    }\r\n\r\n    if (this.levelState === LevelState.TRANSITIONING) {\r\n      if (\r\n        Date.now() - this.transitionStartTime >=\r\n        LevelConstants.LEVEL_TRANSITION_TIME\r\n      ) {\r\n        this.levelState = LevelState.IN_LEVEL;\r\n      }\r\n    }\r\n    if (this.levelState === LevelState.TRANSITIONING_LADDER) {\r\n      if (\r\n        Date.now() - this.transitionStartTime >=\r\n        LevelConstants.LEVEL_TRANSITION_TIME_LADDER\r\n      ) {\r\n        this.levelState = LevelState.IN_LEVEL;\r\n        this.players[this.localPlayerID].map.saveMapData();\r\n      }\r\n    }\r\n\r\n    for (const i in this.players) {\r\n      this.players[i].update();\r\n      this.rooms[this.players[i].levelID].update();\r\n\r\n      if (this.players[i].dead) {\r\n        for (const j in this.players) {\r\n          this.players[j].dead = true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  lerp = (a: number, b: number, t: number): number => {\r\n    return (1 - t) * a + t * b;\r\n  };\r\n\r\n  pushMessage = (message: string) => {\r\n    this.chat.push(new ChatMessage(message));\r\n  };\r\n  onResize = () => {\r\n    let maxWidthScale = Math.floor(\r\n      window.innerWidth / GameConstants.DEFAULTWIDTH\r\n    );\r\n    let maxHeightScale = Math.floor(\r\n      window.innerHeight / GameConstants.DEFAULTHEIGHT\r\n    );\r\n\r\n    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n\r\n    if (isMobile) {\r\n      game.pushMessage(\"mobile detected\");\r\n      // Adjust scale for mobile devices\r\n      Game.scale = 2; // Example: limit scale to 2 for mobile\r\n    } else {\r\n      Game.scale = Math.min(maxWidthScale, maxHeightScale);\r\n    }\r\n\r\n    Game.scale = Math.min(maxWidthScale, maxHeightScale);\r\n    if (Game.scale === 0) {\r\n      maxWidthScale = window.innerWidth / GameConstants.DEFAULTWIDTH;\r\n      maxHeightScale = window.innerHeight / GameConstants.DEFAULTHEIGHT;\r\n    }\r\n    Game.scale = Math.min(maxWidthScale, maxHeightScale);\r\n\r\n    LevelConstants.SCREEN_W = Math.floor(\r\n      window.innerWidth / Game.scale / GameConstants.TILESIZE\r\n    );\r\n    LevelConstants.SCREEN_H = Math.floor(\r\n      window.innerHeight / Game.scale / GameConstants.TILESIZE\r\n    );\r\n    GameConstants.WIDTH = LevelConstants.SCREEN_W * GameConstants.TILESIZE;\r\n    GameConstants.HEIGHT = LevelConstants.SCREEN_H * GameConstants.TILESIZE;\r\n    Game.ctx.canvas.setAttribute(\"width\", `${GameConstants.WIDTH}`);\r\n    Game.ctx.canvas.setAttribute(\"height\", `${GameConstants.HEIGHT}`);\r\n    Game.ctx.canvas.setAttribute(\r\n      \"style\",\r\n      `width: ${GameConstants.WIDTH * Game.scale}px; height: ${GameConstants.HEIGHT * Game.scale\r\n      }px;\r\n    display: block;\r\n    margin: 0 auto;\r\n  \r\n    image-rendering: optimizeSpeed; /* Older versions of FF          */\r\n    image-rendering: -moz-crisp-edges; /* FF 6.0+                       */\r\n    image-rendering: -webkit-optimize-contrast; /* Safari                        */\r\n    image-rendering: -o-crisp-edges; /* OS X & Windows Opera (12.02+) */\r\n    image-rendering: pixelated; /* Awesome future-browsers       */\r\n  \r\n    -ms-interpolation-mode: nearest-neighbor;`\r\n    );\r\n    //Game.ctx.canvas.width = window.innerWidth;\r\n    //Game.ctx.canvas.height = window.innerHeight;\r\n  };\r\n\r\n  shakeScreen = (shakeX: number, shakeY: number) => {\r\n    this.screenShakeX = shakeX;\r\n    this.screenShakeY = shakeY;\r\n  };\r\n\r\n  static measureText = (text: string): { width: number; height: number } => {\r\n    let w = 0;\r\n    for (const letter of text.toLowerCase()) {\r\n      if (letter === \" \") w += 4;\r\n      else\r\n        for (let i = 0; i < Game.letters.length; i++) {\r\n          if (Game.letters[i] === letter) {\r\n            w += Game.letter_widths[i] + 1;\r\n          }\r\n        }\r\n    }\r\n    return { width: w, height: Game.letter_height };\r\n  };\r\n\r\n  static fillText = (text: string, x: number, y: number, maxWidth?: number) => {\r\n    x = Math.round(x);\r\n    y = Math.round(y);\r\n\r\n    if (Game.letter_positions.length === 0) {\r\n      // calculate letter positions\r\n      for (let i = 0; i < Game.letter_widths.length; i++) {\r\n        if (i === 0) Game.letter_positions[0] = 0;\r\n        else\r\n          Game.letter_positions[i] =\r\n            Game.letter_positions[i - 1] + Game.letter_widths[i - 1] + 2;\r\n      }\r\n    } else {\r\n      let dimensions = Game.measureText(text);\r\n      if (dimensions.width > 0) {\r\n        let key = text + Game.ctx.fillStyle;\r\n\r\n        if (!Game.text_rendering_canvases[key]) {\r\n          Game.text_rendering_canvases[key] = document.createElement(\"canvas\");\r\n          Game.text_rendering_canvases[key].width = dimensions.width;\r\n          Game.text_rendering_canvases[key].height = dimensions.height;\r\n          let bx = Game.text_rendering_canvases[key].getContext(\"2d\");\r\n\r\n          let letter_x = 0;\r\n          for (const letter of text.toLowerCase()) {\r\n            if (letter === \" \") letter_x += 4;\r\n            else\r\n              for (let i = 0; i < Game.letters.length; i++) {\r\n                if (Game.letters[i] === letter) {\r\n                  bx.drawImage(\r\n                    Game.fontsheet,\r\n                    Game.letter_positions[i] + 1,\r\n                    0,\r\n                    Game.letter_widths[i],\r\n                    Game.letter_height,\r\n                    letter_x,\r\n                    0,\r\n                    Game.letter_widths[i],\r\n                    Game.letter_height\r\n                  );\r\n                  letter_x += Game.letter_widths[i] + 1;\r\n                }\r\n              }\r\n          }\r\n          bx.fillStyle = Game.ctx.fillStyle;\r\n          bx.globalCompositeOperation = \"source-in\";\r\n          bx.fillRect(\r\n            0,\r\n            0,\r\n            Game.text_rendering_canvases[key].width,\r\n            Game.text_rendering_canvases[key].height\r\n          );\r\n          Game.ctx.drawImage(Game.text_rendering_canvases[key], x, y);\r\n        } else {\r\n          Game.ctx.drawImage(Game.text_rendering_canvases[key], x, y);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  static fillTextOutline = (\r\n    text: string,\r\n    x: number,\r\n    y: number,\r\n    outlineColor: string,\r\n    fillColor: string\r\n  ) => {\r\n    Game.ctx.fillStyle = outlineColor;\r\n    for (let xx = -1; xx <= 1; xx++) {\r\n      for (let yy = -1; yy <= 1; yy++) {\r\n        Game.fillText(text, x + xx, y + yy);\r\n      }\r\n    }\r\n    Game.ctx.fillStyle = fillColor;\r\n    Game.fillText(text, x, y);\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    Game.ctx.globalAlpha = 1;\r\n    Game.ctx.fillStyle = this.room.shadeColor;\r\n    Game.ctx.fillRect(0, 0, GameConstants.WIDTH, GameConstants.HEIGHT);\r\n\r\n    if (this.levelState === LevelState.TRANSITIONING) {\r\n      let levelOffsetX = Math.floor(\r\n        this.lerp(\r\n          (Date.now() - this.transitionStartTime) /\r\n          LevelConstants.LEVEL_TRANSITION_TIME,\r\n          0,\r\n          -this.transitionX\r\n        )\r\n      );\r\n      let levelOffsetY = Math.floor(\r\n        this.lerp(\r\n          (Date.now() - this.transitionStartTime) /\r\n          LevelConstants.LEVEL_TRANSITION_TIME,\r\n          0,\r\n          -this.transitionY\r\n        )\r\n      );\r\n      let playerOffsetX = levelOffsetX - this.transitionX;\r\n      let playerOffsetY = levelOffsetY - this.transitionY;\r\n\r\n      let playerCX =\r\n        (this.players[this.localPlayerID].x -\r\n          this.players[this.localPlayerID].drawX +\r\n          0.5) *\r\n        GameConstants.TILESIZE;\r\n      let playerCY =\r\n        (this.players[this.localPlayerID].y -\r\n          this.players[this.localPlayerID].drawY +\r\n          0.5) *\r\n        GameConstants.TILESIZE;\r\n\r\n      Game.ctx.translate(\r\n        -Math.round(playerCX + playerOffsetX - 0.5 * GameConstants.WIDTH),\r\n        -Math.round(playerCY + playerOffsetY - 0.5 * GameConstants.HEIGHT)\r\n      );\r\n\r\n      let extraTileLerp = Math.floor(\r\n        this.lerp(\r\n          (Date.now() - this.transitionStartTime) /\r\n          LevelConstants.LEVEL_TRANSITION_TIME,\r\n          0,\r\n          GameConstants.TILESIZE\r\n        )\r\n      );\r\n\r\n      let newLevelOffsetX = playerOffsetX;\r\n      let newLevelOffsetY = playerOffsetY;\r\n\r\n      if (this.sideTransition) {\r\n        if (this.sideTransitionDirection > 0) {\r\n          levelOffsetX += extraTileLerp;\r\n          newLevelOffsetX += extraTileLerp + GameConstants.TILESIZE;\r\n        } else {\r\n          levelOffsetX -= extraTileLerp;\r\n          newLevelOffsetX -= extraTileLerp + GameConstants.TILESIZE;\r\n        }\r\n      } else if (this.upwardTransition) {\r\n        levelOffsetY -= extraTileLerp;\r\n        newLevelOffsetY -= extraTileLerp + GameConstants.TILESIZE;\r\n      } else {\r\n        levelOffsetY += extraTileLerp;\r\n        newLevelOffsetY += extraTileLerp + GameConstants.TILESIZE;\r\n      }\r\n\r\n      let ditherFrame = Math.floor(\r\n        (7 * (Date.now() - this.transitionStartTime)) /\r\n        LevelConstants.LEVEL_TRANSITION_TIME\r\n      );\r\n\r\n      Game.ctx.translate(levelOffsetX, levelOffsetY);\r\n      this.prevLevel.draw(delta);\r\n      this.prevLevel.drawEntities(delta);\r\n      for (\r\n        let x = this.prevLevel.roomX - 1;\r\n        x <= this.prevLevel.roomX + this.prevLevel.width;\r\n        x++\r\n      ) {\r\n        for (\r\n          let y = this.prevLevel.roomY - 1;\r\n          y <= this.prevLevel.roomY + this.prevLevel.height;\r\n          y++\r\n        ) {\r\n          Game.drawFX(7 - ditherFrame, 10, 1, 1, x, y, 1, 1);\r\n        }\r\n      }\r\n      Game.ctx.translate(-levelOffsetX, -levelOffsetY);\r\n\r\n      Game.ctx.translate(newLevelOffsetX, newLevelOffsetY);\r\n      this.room.draw(delta);\r\n      this.room.drawEntities(delta, true);\r\n      for (\r\n        let x = this.room.roomX - 1;\r\n        x <= this.room.roomX + this.room.width;\r\n        x++\r\n      ) {\r\n        for (\r\n          let y = this.room.roomY - 1;\r\n          y <= this.room.roomY + this.room.height;\r\n          y++\r\n        ) {\r\n          Game.drawFX(ditherFrame, 10, 1, 1, x, y, 1, 1);\r\n        }\r\n      }\r\n      Game.ctx.translate(-newLevelOffsetX, -newLevelOffsetY);\r\n\r\n      Game.ctx.translate(playerOffsetX, playerOffsetY);\r\n      this.players[this.localPlayerID].draw(delta);\r\n      Game.ctx.translate(-playerOffsetX, -playerOffsetY);\r\n\r\n      Game.ctx.translate(newLevelOffsetX, newLevelOffsetY);\r\n      this.room.drawShade(delta);\r\n      this.room.drawOverShade(delta);\r\n      Game.ctx.translate(-newLevelOffsetX, -newLevelOffsetY);\r\n\r\n      Game.ctx.translate(\r\n        Math.round(playerCX + playerOffsetX - 0.5 * GameConstants.WIDTH),\r\n        Math.round(playerCY + playerOffsetY - 0.5 * GameConstants.HEIGHT)\r\n      );\r\n\r\n      this.players[this.localPlayerID].drawGUI(delta);\r\n      for (const i in this.players) this.players[i].updateDrawXY(delta);\r\n    } else if (this.levelState === LevelState.TRANSITIONING_LADDER) {\r\n      let playerCX =\r\n        (this.players[this.localPlayerID].x -\r\n          this.players[this.localPlayerID].drawX +\r\n          0.5) *\r\n        GameConstants.TILESIZE;\r\n      let playerCY =\r\n        (this.players[this.localPlayerID].y -\r\n          this.players[this.localPlayerID].drawY +\r\n          0.5) *\r\n        GameConstants.TILESIZE;\r\n\r\n      Game.ctx.translate(\r\n        -Math.round(playerCX - 0.5 * GameConstants.WIDTH),\r\n        -Math.round(playerCY - 0.5 * GameConstants.HEIGHT)\r\n      );\r\n\r\n      let deadFrames = 6;\r\n      let ditherFrame = Math.floor(\r\n        ((7 * 2 + deadFrames) * (Date.now() - this.transitionStartTime)) /\r\n        LevelConstants.LEVEL_TRANSITION_TIME_LADDER\r\n      );\r\n\r\n      if (ditherFrame < 7) {\r\n        this.room.draw(delta);\r\n        this.room.drawEntities(delta);\r\n        this.room.drawShade(delta);\r\n        this.room.drawOverShade(delta);\r\n\r\n        for (\r\n          let x = this.room.roomX - 1;\r\n          x <= this.room.roomX + this.room.width;\r\n          x++\r\n        ) {\r\n          for (\r\n            let y = this.room.roomY - 1;\r\n            y <= this.room.roomY + this.room.height;\r\n            y++\r\n          ) {\r\n            Game.drawFX(7 - ditherFrame, 10, 1, 1, x, y, 1, 1);\r\n          }\r\n        }\r\n      } else if (ditherFrame >= 7 + deadFrames) {\r\n        if (this.transitioningLadder) {\r\n          this.prevLevel = this.room;\r\n          this.room.exitLevel();\r\n          this.room = this.transitioningLadder.linkedLevel;\r\n\r\n          this.room.enterLevel(this.players[this.localPlayerID]);\r\n          this.transitioningLadder = null;\r\n        }\r\n\r\n        this.room.draw(delta);\r\n        this.room.drawEntities(delta);\r\n        this.room.drawShade(delta);\r\n        this.room.drawOverShade(delta);\r\n        for (\r\n          let x = this.room.roomX - 1;\r\n          x <= this.room.roomX + this.room.width;\r\n          x++\r\n        ) {\r\n          for (\r\n            let y = this.room.roomY - 1;\r\n            y <= this.room.roomY + this.room.height;\r\n            y++\r\n          ) {\r\n            Game.drawFX(ditherFrame - (7 + deadFrames), 10, 1, 1, x, y, 1, 1);\r\n          }\r\n        }\r\n      }\r\n      Game.ctx.translate(\r\n        Math.round(playerCX - 0.5 * GameConstants.WIDTH),\r\n        Math.round(playerCY - 0.5 * GameConstants.HEIGHT)\r\n      );\r\n\r\n      this.players[this.localPlayerID].drawGUI(delta);\r\n      for (const i in this.players) this.players[i].updateDrawXY(delta);\r\n    } else {\r\n      this.screenShakeX *= -0.8;\r\n      this.screenShakeY *= -0.8;\r\n\r\n      let playerDrawX = this.players[this.localPlayerID].drawX;\r\n      let playerDrawY = this.players[this.localPlayerID].drawY;\r\n\r\n      let cameraX = Math.round(\r\n        (this.players[this.localPlayerID].x - playerDrawX + 0.5) *\r\n        GameConstants.TILESIZE -\r\n        0.5 * GameConstants.WIDTH -\r\n        this.screenShakeX\r\n      );\r\n      let cameraY = Math.round(\r\n        (this.players[this.localPlayerID].y - playerDrawY + 0.5) *\r\n        GameConstants.TILESIZE -\r\n        0.5 * GameConstants.HEIGHT -\r\n        this.screenShakeY\r\n      );\r\n\r\n      Game.ctx.translate(-cameraX, -cameraY);\r\n      this.room.draw(delta);\r\n      this.room.drawEntities(delta);\r\n      //this.room.drawShade(delta);\r\n      this.room.drawOverShade(delta);\r\n      this.players[this.localPlayerID].drawTopLayer(delta);\r\n      Game.ctx.translate(cameraX, cameraY);\r\n\r\n      this.room.drawTopLayer(delta);\r\n      this.players[this.localPlayerID].drawGUI(delta);\r\n      for (const i in this.players) this.players[i].updateDrawXY(delta);\r\n    }\r\n    // draw chat\r\n    let CHAT_X = 10;\r\n    let CHAT_BOTTOM_Y = GameConstants.HEIGHT - Game.letter_height - 14;\r\n    let CHAT_OPACITY = 0.5;\r\n    if (this.chatOpen) {\r\n      Game.ctx.fillStyle = \"black\";\r\n      if (GameConstants.ALPHA_ENABLED) Game.ctx.globalAlpha = 0.75;\r\n      Game.ctx.fillRect(0, 0, GameConstants.WIDTH, GameConstants.HEIGHT);\r\n\r\n      Game.ctx.globalAlpha = 1;\r\n      Game.ctx.fillStyle = \"white\";\r\n      Game.fillText(this.chatTextBox.text, CHAT_X, CHAT_BOTTOM_Y);\r\n      let cursorX = Game.measureText(\r\n        this.chatTextBox.text.substring(0, this.chatTextBox.cursor)\r\n      ).width;\r\n      Game.ctx.fillRect(\r\n        CHAT_X + cursorX,\r\n        CHAT_BOTTOM_Y,\r\n        1,\r\n        Game.letter_height\r\n      );\r\n    }\r\n    for (let i = 0; i < this.chat.length; i++) {\r\n      Game.ctx.fillStyle = \"white\";\r\n      if (this.chat[i][0] === \"/\") Game.ctx.fillStyle = GameConstants.GREEN;\r\n      let y =\r\n        CHAT_BOTTOM_Y - (this.chat.length - 1 - i) * (Game.letter_height + 1);\r\n      if (this.chatOpen) y -= Game.letter_height + 1;\r\n\r\n      let age = Date.now() - this.chat[i].timestamp;\r\n      if (this.chatOpen) {\r\n        Game.ctx.globalAlpha = 1;\r\n      } else {\r\n        if (age <= GameConstants.CHAT_APPEAR_TIME) {\r\n          if (GameConstants.ALPHA_ENABLED)\r\n            Game.ctx.globalAlpha = CHAT_OPACITY;\r\n        } else if (\r\n          age <=\r\n          GameConstants.CHAT_APPEAR_TIME + GameConstants.CHAT_FADE_TIME\r\n        ) {\r\n          if (GameConstants.ALPHA_ENABLED)\r\n            Game.ctx.globalAlpha =\r\n              CHAT_OPACITY *\r\n              (1 -\r\n                (age - GameConstants.CHAT_APPEAR_TIME) /\r\n                GameConstants.CHAT_FADE_TIME);\r\n        } else {\r\n          Game.ctx.globalAlpha = 0;\r\n        }\r\n      }\r\n      Game.fillText(this.chat[i].message, CHAT_X, y);\r\n    }\r\n\r\n    // game version\r\n    if (GameConstants.ALPHA_ENABLED) Game.ctx.globalAlpha = 0.1;\r\n    Game.ctx.fillStyle = LevelConstants.LEVEL_TEXT_COLOR;\r\n    Game.fillText(\r\n      GameConstants.VERSION,\r\n      GameConstants.WIDTH - Game.measureText(GameConstants.VERSION).width - 1,\r\n      1\r\n    );\r\n    Game.ctx.globalAlpha = 1;\r\n\r\n    // fps\r\n    if (GameConstants.ALPHA_ENABLED) Game.ctx.globalAlpha = 0.1;\r\n    Game.ctx.fillStyle = LevelConstants.LEVEL_TEXT_COLOR;\r\n    Game.fillText(fps + \"fps\", 1, 1);\r\n    Game.ctx.globalAlpha = 1;\r\n  };\r\n\r\n  static drawHelper = (\r\n    set: HTMLImageElement,\r\n    sX: number,\r\n    sY: number,\r\n    sW: number,\r\n    sH: number,\r\n    dX: number,\r\n    dY: number,\r\n    dW: number,\r\n    dH: number,\r\n    shadeColor = \"black\",\r\n    shadeOpacity = 0\r\n  ) => {\r\n    // snap to nearest shading increment\r\n    shadeOpacity =\r\n      Math.round(shadeOpacity * GameConstants.SHADE_LEVELS) /\r\n      GameConstants.SHADE_LEVELS;\r\n    let key = getShadeCanvasKey(set, sX, sY, sW, sH, shadeOpacity);\r\n    if (!Game.shade_canvases[key]) {\r\n      Game.shade_canvases[key] = document.createElement(\"canvas\");\r\n      Game.shade_canvases[key].width = Math.round(sW * GameConstants.TILESIZE);\r\n      Game.shade_canvases[key].height = Math.round(sH * GameConstants.TILESIZE);\r\n      let shCtx = Game.shade_canvases[key].getContext(\"2d\");\r\n\r\n      shCtx.clearRect(\r\n        0,\r\n        0,\r\n        Game.shade_canvases[key].width,\r\n        Game.shade_canvases[key].height\r\n      );\r\n\r\n      shCtx.globalCompositeOperation = \"source-over\";\r\n      shCtx.drawImage(\r\n        set,\r\n        Math.round(sX * GameConstants.TILESIZE),\r\n        Math.round(sY * GameConstants.TILESIZE),\r\n        Math.round(sW * GameConstants.TILESIZE),\r\n        Math.round(sH * GameConstants.TILESIZE),\r\n        0,\r\n        0,\r\n        Math.round(sW * GameConstants.TILESIZE),\r\n        Math.round(sH * GameConstants.TILESIZE)\r\n      );\r\n\r\n      shCtx.globalAlpha = shadeOpacity;\r\n      shCtx.fillStyle = shadeColor;\r\n      shCtx.fillRect(\r\n        0,\r\n        0,\r\n        Game.shade_canvases[key].width,\r\n        Game.shade_canvases[key].height\r\n      );\r\n      shCtx.globalAlpha = 1.0;\r\n\r\n      shCtx.globalCompositeOperation = \"destination-in\";\r\n      shCtx.drawImage(\r\n        set,\r\n        Math.round(sX * GameConstants.TILESIZE),\r\n        Math.round(sY * GameConstants.TILESIZE),\r\n        Math.round(sW * GameConstants.TILESIZE),\r\n        Math.round(sH * GameConstants.TILESIZE),\r\n        0,\r\n        0,\r\n        Math.round(sW * GameConstants.TILESIZE),\r\n        Math.round(sH * GameConstants.TILESIZE)\r\n      );\r\n    }\r\n    Game.ctx.drawImage(\r\n      Game.shade_canvases[key],\r\n      Math.round(dX * GameConstants.TILESIZE),\r\n      Math.round(dY * GameConstants.TILESIZE),\r\n      Math.round(dW * GameConstants.TILESIZE),\r\n      Math.round(dH * GameConstants.TILESIZE)\r\n    );\r\n  };\r\n\r\n  static drawTile = (\r\n    sX: number,\r\n    sY: number,\r\n    sW: number,\r\n    sH: number,\r\n    dX: number,\r\n    dY: number,\r\n    dW: number,\r\n    dH: number,\r\n    shadeColor = \"black\",\r\n    shadeOpacity = 0\r\n  ) => {\r\n    Game.drawHelper(\r\n      Game.tileset,\r\n      sX,\r\n      sY,\r\n      sW,\r\n      sH,\r\n      dX,\r\n      dY,\r\n      dW,\r\n      dH,\r\n      shadeColor,\r\n      shadeOpacity\r\n    );\r\n\r\n    /*Game.ctx.drawImage(\r\n      Game.tileset,\r\n      Math.round(sX * GameConstants.TILESIZE),\r\n      Math.round(sY * GameConstants.TILESIZE),\r\n      Math.round(sW * GameConstants.TILESIZE),\r\n      Math.round(sH * GameConstants.TILESIZE),\r\n      Math.round(dX * GameConstants.TILESIZE),\r\n      Math.round(dY * GameConstants.TILESIZE),\r\n      Math.round(dW * GameConstants.TILESIZE),\r\n      Math.round(dH * GameConstants.TILESIZE)\r\n    );\r\n\r\n    if (GameConstants.ALPHA_ENABLED) {\r\n      Game.ctx.globalAlpha = shadeOpacity;\r\n      Game.ctx.fillStyle = shadeColor;\r\n      Game.ctx.fillRect(\r\n        Math.round(dX * GameConstants.TILESIZE),\r\n        Math.round(dY * GameConstants.TILESIZE),\r\n        Math.round(dW * GameConstants.TILESIZE),\r\n        Math.round(dH * GameConstants.TILESIZE)\r\n      );\r\n      Game.ctx.globalAlpha = 1.0;\r\n    }*/\r\n  };\r\n\r\n  static drawObj = (\r\n    sX: number,\r\n    sY: number,\r\n    sW: number,\r\n    sH: number,\r\n    dX: number,\r\n    dY: number,\r\n    dW: number,\r\n    dH: number,\r\n    shadeColor = \"black\",\r\n    shadeOpacity = 0\r\n  ) => {\r\n    Game.drawHelper(\r\n      Game.objset,\r\n      sX,\r\n      sY,\r\n      sW,\r\n      sH,\r\n      dX,\r\n      dY,\r\n      dW,\r\n      dH,\r\n      shadeColor,\r\n      shadeOpacity\r\n    );\r\n  };\r\n\r\n  static drawMob = (\r\n    sX: number,\r\n    sY: number,\r\n    sW: number,\r\n    sH: number,\r\n    dX: number,\r\n    dY: number,\r\n    dW: number,\r\n    dH: number,\r\n    shadeColor = \"black\",\r\n    shadeOpacity = 0\r\n  ) => {\r\n    Game.drawHelper(\r\n      Game.mobset,\r\n      sX,\r\n      sY,\r\n      sW,\r\n      sH,\r\n      dX,\r\n      dY,\r\n      dW,\r\n      dH,\r\n      shadeColor,\r\n      shadeOpacity\r\n    );\r\n  };\r\n\r\n  static drawItem = (\r\n    sX: number,\r\n    sY: number,\r\n    sW: number,\r\n    sH: number,\r\n    dX: number,\r\n    dY: number,\r\n    dW: number,\r\n    dH: number,\r\n    shadeColor = \"black\",\r\n    shadeOpacity = 0\r\n  ) => {\r\n    Game.drawHelper(\r\n      Game.itemset,\r\n      sX,\r\n      sY,\r\n      sW,\r\n      sH,\r\n      dX,\r\n      dY,\r\n      dW,\r\n      dH,\r\n      shadeColor,\r\n      shadeOpacity\r\n    );\r\n  };\r\n\r\n  static drawFX = (\r\n    sX: number,\r\n    sY: number,\r\n    sW: number,\r\n    sH: number,\r\n    dX: number,\r\n    dY: number,\r\n    dW: number,\r\n    dH: number,\r\n    shadeColor = \"black\",\r\n    shadeOpacity = 0\r\n  ) => {\r\n    Game.drawHelper(\r\n      Game.fxset,\r\n      sX,\r\n      sY,\r\n      sW,\r\n      sH,\r\n      dX,\r\n      dY,\r\n      dW,\r\n      dH,\r\n      shadeColor,\r\n      shadeOpacity\r\n    );\r\n  };\r\n}\r\n\r\nlet game = new Game();\r\n","import { LevelConstants } from \"./levelConstants\";\r\n\r\nexport class GameConstants {\r\n  static readonly VERSION = \"v0.6.3\";\r\n\r\n  static readonly FPS = 120;\r\n  static readonly ALPHA_ENABLED = true;\r\n  static readonly SHADE_LEVELS = 25;\r\n\r\n  static readonly TILESIZE = 16;\r\n  static readonly SCALE = 1;\r\n\r\n  static readonly SWIPE_THRESH = 25 ** 2; // (size of swipe threshold circle)^2\r\n\r\n  static readonly KEY_REPEAT_TIME = 300; // millseconds\r\n\r\n  static readonly CHAT_APPEAR_TIME = 10000;\r\n  static readonly CHAT_FADE_TIME = 1000;\r\n\r\n  static readonly DEFAULTWIDTH = 6 * GameConstants.TILESIZE;\r\n  static readonly DEFAULTHEIGHT = 12 * GameConstants.TILESIZE;\r\n  static WIDTH = LevelConstants.SCREEN_W * GameConstants.TILESIZE;\r\n  static HEIGHT = LevelConstants.SCREEN_H * GameConstants.TILESIZE;\r\n  static scrolling = true;\r\n\r\n  static readonly SCRIPT_FONT_SIZE = 16;\r\n  static readonly FONT_SIZE = 7;\r\n  static readonly BIG_FONT_SIZE = 15;\r\n\r\n  static readonly RED = \"#ac3232\";\r\n  static readonly WARNING_RED = \"#ff0000\";\r\n  static readonly GREEN = \"#6abe30\";\r\n  static readonly ARMOR_GREY = \"#9badb7\";\r\n  static readonly OUTLINE = \"#222034\";\r\n  static readonly HIT_ENEMY_TEXT_COLOR = \"#76428a\";\r\n  static readonly HEALTH_BUFF_COLOR = \"#d77bba\";\r\n  static readonly MISS_COLOR = \"#639bff\";\r\n}\r\n","import { Barrel } from \"./entity/barrel\";\r\nimport { BigSkullEnemy } from \"./entity/bigSkullEnemy\";\r\nimport { ChargeEnemy, ChargeEnemyState } from \"./entity/chargeEnemy\";\r\nimport { Chest } from \"./entity/chest\";\r\nimport { CoalResource } from \"./entity/coalResource\";\r\nimport { Crate } from \"./entity/crate\";\r\nimport { EmeraldResource } from \"./entity/emeraldResource\";\r\nimport { Entity, EntityDirection } from \"./entity/entity\";\r\nimport { GoldResource } from \"./entity/goldResource\";\r\nimport { KnightEnemy } from \"./entity/knightEnemy\";\r\nimport { PottedPlant } from \"./entity/pottedPlant\";\r\nimport { Pot } from \"./entity/pot\";\r\nimport { SkullEnemy } from \"./entity/skullEnemy\";\r\nimport { CrabEnemy } from \"./entity/crabEnemy\";\r\nimport { Spawner } from \"./entity/spawner\";\r\nimport { VendingMachine } from \"./entity/vendingMachine\";\r\nimport { WizardEnemy, WizardState } from \"./entity/wizardEnemy\";\r\nimport { ZombieEnemy } from \"./entity/zombieEnemy\";\r\nimport { Game } from \"./game\";\r\nimport { HitWarning } from \"./hitWarning\";\r\nimport { Inventory } from \"./inventory\";\r\nimport { Armor } from \"./item/armor\";\r\nimport { BlueGem } from \"./item/bluegem\";\r\nimport { Candle } from \"./item/candle\";\r\nimport { Coal } from \"./item/coal\";\r\nimport { Coin } from \"./item/coin\";\r\nimport { Equippable } from \"./item/equippable\";\r\nimport { Gold } from \"./item/gold\";\r\nimport { GoldenKey } from \"./item/goldenKey\";\r\nimport { GreenGem } from \"./item/greengem\";\r\nimport { Heart } from \"./item/heart\";\r\nimport { Item } from \"./item/item\";\r\nimport { Key } from \"./item/key\";\r\nimport { Lantern } from \"./item/lantern\";\r\nimport { RedGem } from \"./item/redgem\";\r\nimport { Torch } from \"./item/torch\";\r\nimport { Room } from \"./room\";\r\nimport { LevelGenerator } from \"./levelGenerator\";\r\nimport { Player, PlayerDirection } from \"./player\";\r\nimport { EnemySpawnAnimation } from \"./projectile/enemySpawnAnimation\";\r\nimport { Projectile } from \"./projectile/projectile\";\r\nimport { WizardFireball } from \"./projectile/wizardFireball\";\r\nimport { Random } from \"./random\";\r\nimport { Dagger } from \"./weapon/dagger\";\r\nimport { DualDagger } from \"./weapon/dualdagger\";\r\nimport { Shotgun } from \"./weapon/shotgun\";\r\nimport { Spear } from \"./weapon/spear\";\r\nimport { Weapon } from \"./weapon/weapon\";\r\nimport { Pickaxe } from \"./weapon/pickaxe\";\r\nimport { Backpack } from \"./item/backpack\";\r\n\r\nexport class HitWarningState {\r\n  x: number;\r\n  y: number;\r\n  dead: boolean;\r\n\r\n  constructor(hw: HitWarning) {\r\n    this.x = hw.x;\r\n    this.y = hw.y;\r\n    this.dead = hw.dead;\r\n  }\r\n}\r\n\r\nlet loadHitWarning = (hws: HitWarningState, game: Game): HitWarning => {\r\n  let hw = new HitWarning(game, hws.x, hws.y, hws.x, hws.y);\r\n  hw.dead = hws.dead;\r\n  return hw;\r\n};\r\n\r\nexport enum ProjectileType {\r\n  SPAWN,\r\n  WIZARD,\r\n}\r\n\r\nexport class ProjectileState {\r\n  type: ProjectileType;\r\n  x: number;\r\n  y: number;\r\n  dead: boolean;\r\n  levelID: number;\r\n  enemySpawn: EnemyState;\r\n  wizardState: number;\r\n  wizardParentID: number;\r\n\r\n  constructor(projectile: Projectile, game: Game) {\r\n    this.x = projectile.x;\r\n    this.y = projectile.y;\r\n    this.dead = projectile.dead;\r\n    if (projectile instanceof EnemySpawnAnimation) {\r\n      this.type = ProjectileType.SPAWN;\r\n      this.levelID = game.rooms.indexOf(projectile.room);\r\n      this.enemySpawn = new EnemyState(projectile.enemy, game);\r\n    }\r\n    if (projectile instanceof WizardFireball) {\r\n      this.type = ProjectileType.WIZARD;\r\n      this.wizardState = projectile.state;\r\n      this.levelID = game.rooms.indexOf(projectile.parent.room);\r\n      this.wizardParentID = projectile.parent.room.entities.indexOf(\r\n        projectile.parent\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nlet loadProjectile = (ps: ProjectileState, game: Game): Projectile => {\r\n  if (ps.type === ProjectileType.SPAWN) {\r\n    let level = game.rooms[ps.levelID];\r\n    let enemy = loadEnemy(ps.enemySpawn, game);\r\n    let p = new EnemySpawnAnimation(level, enemy, ps.x, ps.y);\r\n    p.dead = ps.dead;\r\n    return p;\r\n  }\r\n  if (ps.type === ProjectileType.WIZARD) {\r\n    let wizard = game.rooms[ps.levelID].entities[\r\n      ps.wizardParentID\r\n    ] as WizardEnemy;\r\n    let p = new WizardFireball(wizard, ps.x, ps.y);\r\n    p.state = ps.wizardState;\r\n    return p;\r\n  }\r\n};\r\n\r\nexport enum EnemyType {\r\n  BARREL,\r\n  BIGSKULL,\r\n  CHARGE,\r\n  CHEST,\r\n  COAL,\r\n  CRATE,\r\n  EMERALD,\r\n  GOLD,\r\n  KNIGHT,\r\n  PLANT,\r\n  SKULL,\r\n  CRAB,\r\n  SPAWNER,\r\n  VENDINGMACHINE,\r\n  WIZARD,\r\n  ZOMBIE,\r\n}\r\n\r\nexport class EnemyState {\r\n  type: EnemyType;\r\n  levelID: number;\r\n  x: number;\r\n  y: number;\r\n  health: number;\r\n  direction: EntityDirection;\r\n  dead: boolean;\r\n  skipNextTurns: number;\r\n  hasDrop: boolean;\r\n  drop: ItemState;\r\n  alertTicks: number;\r\n  ticks: number;\r\n  seenPlayer: boolean;\r\n  targetPlayerID: string;\r\n  // skeleton\r\n  ticksSinceFirstHit: number;\r\n  // big skeleton\r\n  drops: Array<ItemState>;\r\n  // charge enemy\r\n  startX: number;\r\n  startY: number;\r\n  targetX: number;\r\n  targetY: number;\r\n  visualTargetX: number;\r\n  visualTargetY: number;\r\n  chargeEnemyState: ChargeEnemyState;\r\n  // spawner\r\n  enemySpawnType: number;\r\n  // vending machine\r\n  isPlayerOpened: boolean;\r\n  playerOpenedID: string;\r\n  open: boolean;\r\n  costItems: Array<ItemState>;\r\n  item: ItemState;\r\n  isInf: boolean;\r\n  quantity: number;\r\n  // wizard\r\n  wizardState: WizardState;\r\n\r\n  constructor(enemy: Entity, game: Game) {\r\n    this.levelID = game.rooms.indexOf(enemy.room);\r\n    this.x = enemy.x;\r\n    this.y = enemy.y;\r\n    this.health = enemy.health;\r\n    this.direction = enemy.direction;\r\n    this.dead = enemy.dead;\r\n    this.skipNextTurns = enemy.skipNextTurns;\r\n    this.hasDrop = false;\r\n    if (enemy.drop) {\r\n      this.hasDrop = true;\r\n      this.drop = new ItemState(enemy.drop, game);\r\n    }\r\n    this.alertTicks = enemy.alertTicks;\r\n    if (enemy instanceof Barrel) this.type = EnemyType.BARREL;\r\n    if (enemy instanceof BigSkullEnemy) {\r\n      this.type = EnemyType.BIGSKULL;\r\n      this.ticks = enemy.ticks;\r\n      this.ticksSinceFirstHit = enemy.ticksSinceFirstHit;\r\n      this.seenPlayer = enemy.seenPlayer;\r\n      if (enemy.seenPlayer) {\r\n        this.targetPlayerID = Object.keys(game.players).find(\r\n          (key) => game.players[key] === enemy.targetPlayer\r\n        );\r\n        if (!this.targetPlayerID)\r\n          this.targetPlayerID = Object.keys(game.offlinePlayers).find(\r\n            (key) => game.offlinePlayers[key] === enemy.targetPlayer\r\n          );\r\n      }\r\n      this.drops = [];\r\n      for (const d of enemy.drops) this.drops.push(new ItemState(d, game));\r\n    }\r\n    if (enemy instanceof ChargeEnemy) {\r\n      this.type = EnemyType.CHARGE;\r\n      this.ticks = enemy.ticks;\r\n      this.chargeEnemyState = enemy.state;\r\n      this.startX = enemy.startX;\r\n      this.startY = enemy.startY;\r\n      this.targetX = enemy.targetX;\r\n      this.targetY = enemy.targetY;\r\n      this.visualTargetX = enemy.visualTargetX;\r\n      this.visualTargetY = enemy.visualTargetY;\r\n    }\r\n    if (enemy instanceof Chest) this.type = EnemyType.CHEST;\r\n    if (enemy instanceof CoalResource) this.type = EnemyType.COAL;\r\n    if (enemy instanceof Crate) this.type = EnemyType.CRATE;\r\n    if (enemy instanceof EmeraldResource) this.type = EnemyType.EMERALD;\r\n    if (enemy instanceof GoldResource) this.type = EnemyType.GOLD;\r\n    if (enemy instanceof KnightEnemy) {\r\n      this.type = EnemyType.KNIGHT;\r\n      this.ticks = enemy.ticks;\r\n      this.seenPlayer = enemy.seenPlayer;\r\n      if (enemy.seenPlayer) {\r\n        this.targetPlayerID = Object.keys(game.players).find(\r\n          (key) => game.players[key] === enemy.targetPlayer\r\n        );\r\n        if (!this.targetPlayerID)\r\n          this.targetPlayerID = Object.keys(game.offlinePlayers).find(\r\n            (key) => game.offlinePlayers[key] === enemy.targetPlayer\r\n          );\r\n      }\r\n    }\r\n    if (enemy instanceof PottedPlant) this.type = EnemyType.PLANT;\r\n    if (enemy instanceof Pot) this.type = EnemyType.PLANT;\r\n    if (enemy instanceof SkullEnemy) {\r\n      this.type = EnemyType.SKULL;\r\n      this.ticks = enemy.ticks;\r\n      this.ticksSinceFirstHit = enemy.ticksSinceFirstHit;\r\n      this.seenPlayer = enemy.seenPlayer;\r\n      if (enemy.seenPlayer) {\r\n        this.targetPlayerID = Object.keys(game.players).find(\r\n          (key) => game.players[key] === enemy.targetPlayer\r\n        );\r\n        if (!this.targetPlayerID)\r\n          this.targetPlayerID = Object.keys(game.offlinePlayers).find(\r\n            (key) => game.offlinePlayers[key] === enemy.targetPlayer\r\n          );\r\n      }\r\n    }\r\n    if (enemy instanceof CrabEnemy) {\r\n      this.type = EnemyType.CRAB;\r\n      this.ticks = enemy.ticks;\r\n      this.seenPlayer = enemy.seenPlayer;\r\n      if (enemy.seenPlayer) {\r\n        this.targetPlayerID = Object.keys(game.players).find(\r\n          (key) => game.players[key] === enemy.targetPlayer\r\n        );\r\n        if (!this.targetPlayerID)\r\n          this.targetPlayerID = Object.keys(game.offlinePlayers).find(\r\n            (key) => game.offlinePlayers[key] === enemy.targetPlayer\r\n          );\r\n      }\r\n    }\r\n    if (enemy instanceof Spawner) {\r\n      this.type = EnemyType.SPAWNER;\r\n      this.ticks = enemy.ticks;\r\n      this.seenPlayer = enemy.seenPlayer;\r\n      this.enemySpawnType = enemy.enemySpawnType;\r\n    }\r\n    if (enemy instanceof VendingMachine) {\r\n      this.type = EnemyType.VENDINGMACHINE;\r\n      this.isPlayerOpened = false;\r\n      if (enemy.playerOpened) {\r\n        this.isPlayerOpened = true;\r\n        this.playerOpenedID = Object.keys(game.players).find(\r\n          (key) => game.players[key] === enemy.playerOpened\r\n        );\r\n        if (!this.playerOpenedID)\r\n          this.playerOpenedID = Object.keys(game.offlinePlayers).find(\r\n            (key) => game.offlinePlayers[key] === enemy.playerOpened\r\n          );\r\n      }\r\n      this.open = enemy.open;\r\n      this.costItems = [];\r\n      for (const item of enemy.costItems)\r\n        this.costItems.push(new ItemState(item, game));\r\n      this.item = new ItemState(enemy.item, game);\r\n      this.isInf = enemy.isInf;\r\n      this.quantity = enemy.quantity;\r\n    }\r\n    if (enemy instanceof WizardEnemy) {\r\n      this.type = EnemyType.WIZARD;\r\n      this.ticks = enemy.ticks;\r\n      this.wizardState = enemy.state;\r\n      this.seenPlayer = enemy.seenPlayer;\r\n    }\r\n    if (enemy instanceof ZombieEnemy) {\r\n      this.type = EnemyType.ZOMBIE;\r\n      this.ticks = enemy.ticks;\r\n      this.seenPlayer = enemy.seenPlayer;\r\n      if (enemy.seenPlayer) {\r\n        this.targetPlayerID = Object.keys(game.players).find(\r\n          (key) => game.players[key] === enemy.targetPlayer\r\n        );\r\n        if (!this.targetPlayerID)\r\n          this.targetPlayerID = Object.keys(game.offlinePlayers).find(\r\n            (key) => game.offlinePlayers[key] === enemy.targetPlayer\r\n          );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nlet loadEnemy = (es: EnemyState, game: Game): Entity => {\r\n  let enemy;\r\n  let level = game.rooms[es.levelID];\r\n  if (es.type === EnemyType.BARREL) enemy = new Barrel(level, game, es.x, es.y);\r\n  if (es.type === EnemyType.BIGSKULL) {\r\n    enemy = new BigSkullEnemy(level, game, es.x, es.y, Random.rand);\r\n    enemy.ticks = es.ticks;\r\n    enemy.ticksSinceFirstHit = es.ticksSinceFirstHit;\r\n    enemy.seenPlayer = es.seenPlayer;\r\n    if (es.seenPlayer) {\r\n      enemy.targetPlayer = game.players[es.targetPlayerID];\r\n      if (!enemy.targetPlayer)\r\n        enemy.targetPlayer = game.offlinePlayers[es.targetPlayerID];\r\n    }\r\n    enemy.drops = [];\r\n    for (const d of es.drops) enemy.drops.push(loadItem(d, game));\r\n  }\r\n  if (es.type === EnemyType.CHARGE) {\r\n    enemy = new ChargeEnemy(level, game, es.x, es.y);\r\n    enemy.ticks = es.ticks;\r\n    enemy.state = es.chargeEnemyState;\r\n    enemy.startX = es.startX;\r\n    enemy.startY = es.startY;\r\n    enemy.targetX = es.targetX;\r\n    enemy.targetY = es.targetY;\r\n    enemy.visualTargetX = es.visualTargetX;\r\n    enemy.visualTargetY = es.visualTargetY;\r\n  }\r\n  if (es.type === EnemyType.CHEST)\r\n    enemy = new Chest(level, game, es.x, es.y, Random.rand);\r\n  if (es.type === EnemyType.COAL)\r\n    enemy = new CoalResource(level, game, es.x, es.y);\r\n  if (es.type === EnemyType.CRATE) enemy = new Crate(level, game, es.x, es.y);\r\n  if (es.type === EnemyType.EMERALD)\r\n    enemy = new EmeraldResource(level, game, es.x, es.y);\r\n  if (es.type === EnemyType.GOLD)\r\n    enemy = new GoldResource(level, game, es.x, es.y);\r\n  if (es.type === EnemyType.KNIGHT) {\r\n    enemy = new KnightEnemy(level, game, es.x, es.y, Random.rand);\r\n    enemy.ticks = es.ticks;\r\n    enemy.seenPlayer = es.seenPlayer;\r\n    if (es.seenPlayer) {\r\n      enemy.targetPlayer = game.players[es.targetPlayerID];\r\n      if (!enemy.targetPlayer)\r\n        enemy.targetPlayer = game.offlinePlayers[es.targetPlayerID];\r\n    }\r\n  }\r\n  if (es.type === EnemyType.PLANT)\r\n    enemy = new PottedPlant(level, game, es.x, es.y, Random.rand);\r\n  if (es.type === EnemyType.PLANT) enemy = new Pot(level, game, es.x, es.y);\r\n  if (es.type === EnemyType.SKULL) {\r\n    enemy = new SkullEnemy(level, game, es.x, es.y, Random.rand);\r\n    enemy.ticks = es.ticks;\r\n    enemy.ticksSinceFirstHit = es.ticksSinceFirstHit;\r\n    enemy.seenPlayer = es.seenPlayer;\r\n    if (es.seenPlayer) {\r\n      enemy.targetPlayer = game.players[es.targetPlayerID];\r\n      if (!enemy.targetPlayer)\r\n        enemy.targetPlayer = game.offlinePlayers[es.targetPlayerID];\r\n    }\r\n  }\r\n  if (es.type === EnemyType.CRAB) {\r\n    enemy = new CrabEnemy(level, game, es.x, es.y, Random.rand);\r\n    enemy.ticks = es.ticks;\r\n    enemy.seenPlayer = es.seenPlayer;\r\n    if (es.seenPlayer) {\r\n      enemy.targetPlayer = game.players[es.targetPlayerID];\r\n      if (!enemy.targetPlayer)\r\n        enemy.targetPlayer = game.offlinePlayers[es.targetPlayerID];\r\n    }\r\n  }\r\n  if (es.type === EnemyType.SPAWNER) {\r\n    enemy = new Spawner(level, game, es.x, es.y, Random.rand);\r\n    enemy.ticks = es.ticks;\r\n    enemy.seenPlayer = es.seenPlayer;\r\n    enemy.enemySpawnType = es.enemySpawnType;\r\n  }\r\n  if (es.type === EnemyType.VENDINGMACHINE) {\r\n    let item = loadItem(es.item, game);\r\n    enemy = new VendingMachine(level, game, es.x, es.y, item, Random.rand);\r\n    if (es.isPlayerOpened) {\r\n      enemy.playerOpened = game.players[es.playerOpenedID];\r\n      if (!enemy.playerOpened)\r\n        enemy.playerOpened = game.offlinePlayers[es.playerOpenedID];\r\n    }\r\n    enemy.open = es.open;\r\n    enemy.costItems = [];\r\n    for (const item of es.costItems) enemy.costItems.push(loadItem(item, game));\r\n    enemy.isInf = es.isInf;\r\n    enemy.quantity = es.quantity;\r\n  }\r\n  if (es.type === EnemyType.WIZARD) {\r\n    enemy = new WizardEnemy(level, game, es.x, es.y, Random.rand);\r\n    enemy.ticks = es.ticks;\r\n    enemy.state = es.wizardState;\r\n    enemy.seenPlayer = es.seenPlayer;\r\n  }\r\n  if (es.type === EnemyType.ZOMBIE) {\r\n    enemy = new ZombieEnemy(level, game, es.x, es.y, Random.rand);\r\n    enemy.ticks = es.ticks;\r\n    enemy.seenPlayer = es.seenPlayer;\r\n    if (es.seenPlayer) {\r\n      enemy.targetPlayer = game.players[es.targetPlayerID];\r\n      if (!enemy.targetPlayer)\r\n        enemy.targetPlayer = game.offlinePlayers[es.targetPlayerID];\r\n    }\r\n  }\r\n\r\n  enemy.x = es.x;\r\n  enemy.y = es.y;\r\n  enemy.health = es.health;\r\n  enemy.direction = es.direction;\r\n  enemy.dead = es.dead;\r\n  enemy.skipNextTurns = es.skipNextTurns;\r\n  if (es.hasDrop) enemy.drop = loadItem(es.drop, game);\r\n  enemy.alertTicks = es.alertTicks;\r\n\r\n  return enemy;\r\n};\r\n\r\nexport class LevelState {\r\n  levelID: number;\r\n  entered: boolean;\r\n  enemies: Array<EnemyState>;\r\n  items: Array<ItemState>;\r\n  projectiles: Array<ProjectileState>;\r\n  hitwarnings: Array<HitWarningState>;\r\n\r\n  constructor(level: Room, game: Game) {\r\n    this.levelID = game.rooms.indexOf(level);\r\n    this.entered = level.entered;\r\n    this.enemies = [];\r\n    this.items = [];\r\n    this.projectiles = [];\r\n    this.hitwarnings = [];\r\n    for (const enemy of level.entities)\r\n      this.enemies.push(new EnemyState(enemy, game));\r\n    for (const item of level.items) this.items.push(new ItemState(item, game));\r\n    for (const projectile of level.projectiles)\r\n      this.projectiles.push(new ProjectileState(projectile, game));\r\n    for (const hw of level.hitwarnings)\r\n      this.hitwarnings.push(new HitWarningState(hw));\r\n  }\r\n}\r\n\r\nlet loadLevel = (level: Room, levelState: LevelState, game: Game) => {\r\n  level.entered = levelState.entered;\r\n  level.entities = [];\r\n  level.items = [];\r\n  level.projectiles = [];\r\n  level.hitwarnings = [];\r\n  for (const enemy of levelState.enemies)\r\n    level.entities.push(loadEnemy(enemy, game));\r\n  for (const item of levelState.items) level.items.push(loadItem(item, game));\r\n  for (const projectile of levelState.projectiles)\r\n    level.projectiles.push(loadProjectile(projectile, game));\r\n  for (const hw of levelState.hitwarnings)\r\n    level.hitwarnings.push(loadHitWarning(hw, game));\r\n};\r\n\r\nexport enum ItemType {\r\n  ARMOR,\r\n  BLUEGEM,\r\n  CANDLE,\r\n  COAL,\r\n  COIN,\r\n  GOLD,\r\n  GOLDENKEY,\r\n  GREENGEM,\r\n  HEART,\r\n  KEY,\r\n  LANTERN,\r\n  REDGEM,\r\n  TORCH,\r\n  DAGGER,\r\n  DUALDAGGER,\r\n  SHOTGUN,\r\n  SPEAR,\r\n  PICKAXE,\r\n  BACKPACK,\r\n}\r\n\r\nexport class ItemState {\r\n  type: ItemType;\r\n  x: number;\r\n  y: number;\r\n  levelID: number;\r\n  stackCount: number;\r\n  pickedUp: boolean;\r\n  equipped: boolean;\r\n\r\n  constructor(item: Item, game: Game) {\r\n    if (item instanceof Armor) this.type = ItemType.ARMOR;\r\n    if (item instanceof BlueGem) this.type = ItemType.BLUEGEM;\r\n    if (item instanceof Candle) this.type = ItemType.CANDLE;\r\n    if (item instanceof Coal) this.type = ItemType.COAL;\r\n    if (item instanceof Coin) this.type = ItemType.COIN;\r\n    if (item instanceof Gold) this.type = ItemType.GOLD;\r\n    if (item instanceof GoldenKey) this.type = ItemType.GOLDENKEY;\r\n    if (item instanceof GreenGem) this.type = ItemType.GREENGEM;\r\n    if (item instanceof Heart) this.type = ItemType.HEART;\r\n    if (item instanceof Key) this.type = ItemType.KEY;\r\n    if (item instanceof Lantern) this.type = ItemType.LANTERN;\r\n    if (item instanceof RedGem) this.type = ItemType.REDGEM;\r\n    if (item instanceof Torch) this.type = ItemType.TORCH;\r\n    if (item instanceof Dagger) this.type = ItemType.DAGGER;\r\n    if (item instanceof DualDagger) this.type = ItemType.DUALDAGGER;\r\n    if (item instanceof Shotgun) this.type = ItemType.SHOTGUN;\r\n    if (item instanceof Spear) this.type = ItemType.SPEAR;\r\n    if (item instanceof Pickaxe) this.type = ItemType.PICKAXE;\r\n    if (item instanceof Backpack) this.type = ItemType.BACKPACK;\r\n\r\n    this.equipped = item instanceof Equippable && item.equipped;\r\n    this.x = item.x;\r\n    this.y = item.y;\r\n    this.levelID = game.rooms.indexOf(item.level);\r\n    if (this.levelID === -1) this.levelID = 0;\r\n    this.stackCount = item.stackCount;\r\n    this.pickedUp = item.pickedUp;\r\n  }\r\n}\r\n\r\nlet loadItem = (i: ItemState, game: Game, player?: Player): Item => {\r\n  let level = game.rooms[i.levelID];\r\n  let item;\r\n  if (i.type === ItemType.ARMOR) item = new Armor(level, i.x, i.y);\r\n  if (i.type === ItemType.BLUEGEM) item = new BlueGem(level, i.x, i.y);\r\n  if (i.type === ItemType.CANDLE) item = new Candle(level, i.x, i.y);\r\n  if (i.type === ItemType.COAL) item = new Coal(level, i.x, i.y);\r\n  if (i.type === ItemType.COIN) item = new Coin(level, i.x, i.y);\r\n  if (i.type === ItemType.GOLD) item = new Gold(level, i.x, i.y);\r\n  if (i.type === ItemType.GOLDENKEY) item = new GoldenKey(level, i.x, i.y);\r\n  if (i.type === ItemType.GREENGEM) item = new GreenGem(level, i.x, i.y);\r\n  if (i.type === ItemType.HEART) item = new Heart(level, i.x, i.y);\r\n  if (i.type === ItemType.KEY) item = new Key(level, i.x, i.y);\r\n  if (i.type === ItemType.LANTERN) item = new Lantern(level, i.x, i.y);\r\n  if (i.type === ItemType.REDGEM) item = new RedGem(level, i.x, i.y);\r\n  if (i.type === ItemType.TORCH) item = new Torch(level, i.x, i.y);\r\n  if (i.type === ItemType.DAGGER) {\r\n    item = new Dagger(level, i.x, i.y);\r\n  }\r\n  if (i.type === ItemType.DUALDAGGER) {\r\n    item = new DualDagger(level, i.x, i.y);\r\n  }\r\n  if (i.type === ItemType.SHOTGUN) {\r\n    item = new Shotgun(level, i.x, i.y);\r\n  }\r\n  if (i.type === ItemType.SPEAR) {\r\n    item = new Spear(level, i.x, i.y);\r\n  }\r\n  if (i.type === ItemType.PICKAXE) {\r\n    item = new Pickaxe(level, i.x, i.y);\r\n  }\r\n  if (i.type === ItemType.BACKPACK) {\r\n    item = new Backpack(level, i.x, i.y);\r\n  }\r\n  if (i.equipped) item.equipped = true;\r\n  if (item instanceof Equippable) item.setWielder(player);\r\n  item.stackCount = i.stackCount;\r\n  item.pickedUp = i.pickedUp;\r\n  return item;\r\n};\r\n\r\nexport class InventoryState {\r\n  isOpen: boolean;\r\n  cols: number;\r\n  rows: number;\r\n  selX: number;\r\n  selY: number;\r\n  equipAnimAmount: Array<number>;\r\n  isWeaponEquipped: boolean;\r\n  weaponI: number;\r\n  coins: number;\r\n  items: Array<ItemState>;\r\n\r\n  constructor(inventory: Inventory, game: Game) {\r\n    this.isOpen = inventory.isOpen;\r\n    this.cols = inventory.cols;\r\n    this.rows = inventory.rows;\r\n    this.equipAnimAmount = inventory.equipAnimAmount.map((x) => x);\r\n    this.isWeaponEquipped = false;\r\n    if (inventory.weapon) {\r\n      this.isWeaponEquipped = true;\r\n      this.weaponI = inventory.items.indexOf(inventory.weapon);\r\n    }\r\n    this.coins = inventory.coins;\r\n    this.selX = inventory.selX;\r\n    this.selY = inventory.selY;\r\n    this.items = Array<ItemState>();\r\n    for (const item of inventory.items) {\r\n      this.items.push(new ItemState(item, game));\r\n    }\r\n  }\r\n}\r\n\r\nlet loadInventory = (inventory: Inventory, i: InventoryState, game: Game) => {\r\n  inventory.clear();\r\n  inventory.isOpen = i.isOpen;\r\n  inventory.cols = i.cols;\r\n  inventory.rows = i.rows;\r\n  inventory.selX = i.selX;\r\n  inventory.selY = i.selY;\r\n  inventory.equipAnimAmount = i.equipAnimAmount.map((x) => x);\r\n  inventory.coins = i.coins;\r\n  for (const item of i.items)\r\n    inventory.items.push(loadItem(item, game, inventory.player));\r\n\r\n  if (i.isWeaponEquipped)\r\n    inventory.weapon = inventory.items[i.weaponI] as Weapon;\r\n};\r\n\r\nexport class PlayerState {\r\n  x: number;\r\n  y: number;\r\n  dead: boolean;\r\n  levelID: number;\r\n  direction: PlayerDirection;\r\n  health: number;\r\n  maxHealth: number;\r\n  lastTickHealth: number;\r\n  inventory: InventoryState;\r\n  hasOpenVendingMachine: boolean;\r\n  openVendingMachineLevelID: number;\r\n  openVendingMachineID: number;\r\n  sightRadius: number;\r\n\r\n  constructor(player: Player, game: Game) {\r\n    this.x = player.x;\r\n    this.y = player.y;\r\n    this.dead = player.dead;\r\n    this.levelID = player.levelID;\r\n    this.direction = player.direction;\r\n    this.health = player.health;\r\n    this.maxHealth = player.maxHealth;\r\n    this.lastTickHealth = player.lastTickHealth;\r\n    this.inventory = new InventoryState(player.inventory, game);\r\n    this.hasOpenVendingMachine = false;\r\n    if (player.openVendingMachine) {\r\n      this.hasOpenVendingMachine = true;\r\n      this.openVendingMachineLevelID = game.rooms.indexOf(\r\n        player.openVendingMachine.room\r\n      );\r\n      this.openVendingMachineID =\r\n        player.openVendingMachine.room.entities.indexOf(\r\n          player.openVendingMachine\r\n        );\r\n    }\r\n    this.sightRadius = player.sightRadius;\r\n  }\r\n}\r\n\r\nlet loadPlayer = (id: string, p: PlayerState, game: Game): Player => {\r\n  let player = new Player(game, p.x, p.y, id === game.localPlayerID);\r\n  player.dead = p.dead;\r\n\r\n  player.levelID = p.levelID;\r\n  if (player.levelID < game.levelgen.currentFloorFirstLevelID) {\r\n    // catch up to the current level\r\n    player.levelID = game.levelgen.currentFloorFirstLevelID;\r\n    player.x =\r\n      game.rooms[player.levelID].roomX +\r\n      Math.floor(game.rooms[player.levelID].width / 2);\r\n    player.y =\r\n      game.rooms[player.levelID].roomY +\r\n      Math.floor(game.rooms[player.levelID].height / 2);\r\n  }\r\n  player.direction = p.direction;\r\n  player.health = p.health;\r\n  player.maxHealth = p.maxHealth;\r\n  player.lastTickHealth = p.lastTickHealth;\r\n  loadInventory(player.inventory, p.inventory, game);\r\n  if (p.hasOpenVendingMachine) {\r\n    player.openVendingMachine = game.rooms[p.openVendingMachineLevelID]\r\n      .entities[p.openVendingMachineID] as VendingMachine;\r\n  }\r\n  player.sightRadius = p.sightRadius;\r\n\r\n  return player;\r\n};\r\n\r\nexport class GameState {\r\n  seed: number;\r\n  randomState: number;\r\n  depth: number;\r\n  players: Record<string, PlayerState>;\r\n  offlinePlayers: Record<string, PlayerState>;\r\n  levels: Array<LevelState>;\r\n\r\n  constructor() {\r\n    this.seed = 0;\r\n    this.randomState = 0;\r\n    this.depth = 0;\r\n    this.players = {};\r\n    this.offlinePlayers = {};\r\n    this.levels = [];\r\n  }\r\n}\r\n\r\nexport const createGameState = (game: Game): GameState => {\r\n  let gs = new GameState();\r\n  gs.seed = game.levelgen.seed; // random state for generating levels\r\n  gs.randomState = Random.state; // current random state\r\n  gs.depth = game.levelgen.depthReached;\r\n  for (const i in game.players)\r\n    gs.players[i] = new PlayerState(game.players[i], game);\r\n  for (const i in game.offlinePlayers) {\r\n    gs.offlinePlayers[i] = new PlayerState(game.offlinePlayers[i], game);\r\n  }\r\n  for (let level of game.rooms) {\r\n    level.catchUp();\r\n    gs.levels.push(new LevelState(level, game));\r\n  }\r\n  return gs;\r\n};\r\n\r\nexport const loadGameState = (\r\n  game: Game,\r\n  activeUsernames: Array<string>,\r\n  gameState: GameState,\r\n  newWorld: boolean\r\n) => {\r\n  game.rooms = Array<Room>();\r\n  game.levelgen = new LevelGenerator();\r\n  game.levelgen.setSeed(gameState.seed);\r\n  if (newWorld) gameState.depth = 0;\r\n  game.levelgen.generateFirstNFloors(game, gameState.depth);\r\n\r\n  if (!newWorld) {\r\n    if (gameState.players) {\r\n      for (const i in gameState.players) {\r\n        if (activeUsernames.includes(i))\r\n          game.players[i] = loadPlayer(i, gameState.players[i], game);\r\n        else game.offlinePlayers[i] = loadPlayer(i, gameState.players[i], game);\r\n      }\r\n    }\r\n    if (gameState.offlinePlayers) {\r\n      for (const i in gameState.offlinePlayers) {\r\n        if (i === game.localPlayerID)\r\n          game.players[i] = loadPlayer(i, gameState.offlinePlayers[i], game);\r\n        else if (activeUsernames.includes(i))\r\n          game.players[i] = loadPlayer(i, gameState.offlinePlayers[i], game);\r\n        else\r\n          game.offlinePlayers[i] = loadPlayer(\r\n            i,\r\n            gameState.offlinePlayers[i],\r\n            game\r\n          );\r\n      }\r\n    }\r\n    for (let levelState of gameState.levels) {\r\n      for (let i = 0; i < game.rooms.length; i++) {\r\n        if (i === levelState.levelID) {\r\n          loadLevel(game.rooms[i], levelState, game);\r\n        }\r\n      }\r\n    }\r\n    if (\r\n      !(game.localPlayerID in gameState.players) &&\r\n      !(game.localPlayerID in gameState.offlinePlayers)\r\n    ) {\r\n      // we're not in the gamestate, create a new player\r\n      game.players[game.localPlayerID] = new Player(game, 0, 0, true);\r\n      game.players[game.localPlayerID].levelID =\r\n        game.levelgen.currentFloorFirstLevelID;\r\n      game.players[game.localPlayerID].x =\r\n        game.rooms[game.levelgen.currentFloorFirstLevelID].roomX +\r\n        Math.floor(\r\n          game.rooms[game.levelgen.currentFloorFirstLevelID].width / 2\r\n        );\r\n      game.players[game.localPlayerID].y =\r\n        game.rooms[game.levelgen.currentFloorFirstLevelID].roomY +\r\n        Math.floor(\r\n          game.rooms[game.levelgen.currentFloorFirstLevelID].height / 2\r\n        );\r\n      game.room = game.rooms[game.levelgen.currentFloorFirstLevelID];\r\n      game.room.enterLevel(game.players[game.localPlayerID]);\r\n    } else {\r\n      game.room = game.rooms[game.players[game.localPlayerID].levelID];\r\n    }\r\n  } else {\r\n    // stub game state, start a new world\r\n    game.players[game.localPlayerID] = new Player(game, 0, 0, true);\r\n    game.room = game.rooms[game.players[game.localPlayerID].levelID];\r\n    game.room.enterLevel(game.players[game.localPlayerID]);\r\n  }\r\n  Random.setState(gameState.randomState);\r\n  game.room.updateLighting();\r\n\r\n  game.chat = [];\r\n};\r\n","import { Game } from \"./game\";\r\nimport { LevelConstants } from \"./levelConstants\";\r\n\r\nexport class HealthBar {\r\n  hurtTimer: number;\r\n\r\n  constructor() {\r\n    this.hurtTimer = 0;\r\n  }\r\n\r\n  hurt = () => {\r\n    this.hurtTimer = Date.now();\r\n  };\r\n\r\n  draw = (delta: number, hearts: number, maxHearts: number, x: number, y: number, flashing: boolean) => {\r\n    let t = Date.now() - this.hurtTimer;\r\n    if (t <= LevelConstants.HEALTH_BAR_TOTALTIME) {\r\n      let fullHearts = Math.floor(hearts);\r\n\r\n      let halfHearts = Math.ceil(hearts - fullHearts);\r\n\r\n      let emptyHearts = maxHearts - fullHearts - halfHearts;\r\n\r\n      // I wouldn't normally use magic numbers here, but these are hardcoded based on the tileset\r\n      //   (which isn't really parameterizable)\r\n      let drawWidth = Math.round(\r\n        Math.min(9, Math.min(0.05 * (LevelConstants.HEALTH_BAR_TOTALTIME - t), 0.05 * t))\r\n      );\r\n      let drawHeight =\r\n        Math.round(\r\n          Math.min(0.5, Math.min(0.003 * (LevelConstants.HEALTH_BAR_TOTALTIME - t), 0.003 * t)) * 16\r\n        ) / 16.0;\r\n      let width = (drawWidth * (maxHearts - 1) + 8) / 16.0;\r\n      let xxStart = 0.5 + -width / 2;\r\n      for (let i = 0; i < Math.ceil(0.5 * maxHearts); i++) {\r\n        let tileX = 0;\r\n        if (!flashing) tileX = 1.5;\r\n        else if (i < fullHearts) tileX = 0;\r\n        else if (i < fullHearts + halfHearts) tileX = 0.5;\r\n        else tileX = 1;\r\n        let xx = (drawWidth * i) / 16.0 + xxStart;\r\n        Game.drawFX(tileX, 8, 0.5, 0.5, x + xx, y - 1 - drawHeight / 2, 0.5, drawHeight);\r\n        xx += 9.0 / 16.0;\r\n\r\n        let j = maxHearts - i - 1;\r\n        if (j !== i) {\r\n          let tileX = 0;\r\n          if (!flashing) tileX = 1.5;\r\n          else if (j < fullHearts) tileX = 0;\r\n          else if (j < fullHearts + halfHearts) tileX = 0.5;\r\n          else tileX = 1;\r\n          let xx = (drawWidth * j) / 16.0 + xxStart;\r\n          Game.drawFX(tileX, 8, 0.5, 0.5, x + xx, y - 1 - drawHeight / 2, 0.5, drawHeight);\r\n          xx += 9.0 / 16.0;\r\n        }\r\n      }\r\n    }\r\n  };\r\n}\r\n","import { Game } from \"./game\";\r\nimport { Drawable } from \"./drawable\";\r\nimport { Room } from \"./room\";\r\nimport { Entity } from \"./entity/entity\";\r\n\r\nenum Direction {\r\n  North,\r\n  NorthEast,\r\n  East,\r\n  SouthEast,\r\n  South,\r\n  SouthWest,\r\n  West,\r\n  NorthWest,\r\n  Center,\r\n}\r\n\r\nexport class HitWarning extends Drawable {\r\n  x: number;\r\n  y: number;\r\n  dead: boolean;\r\n  static frame = 0;\r\n  game: Game;\r\n  entity: Entity;\r\n  dir: Direction;\r\n  tileX: number;\r\n  tileY: number;\r\n  eX: number;\r\n  eY: number;\r\n  offsetY: number;\r\n  pointerOffsetX: number;\r\n  pointerOffsetY: number;\r\n  animLength: number;\r\n  isEnemy: Boolean;\r\n\r\n  constructor(\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    eX?: number,\r\n    eY?: number,\r\n    isEnemy?: Boolean\r\n  ) {\r\n    super();\r\n    this.x = x;\r\n    this.y = y;\r\n    this.dead = false;\r\n    this.game = game;\r\n    this.dir = Direction.North;\r\n    this.tileX = 0;\r\n    this.tileY = 22;\r\n    this.eX = eX;\r\n    this.eY = eY;\r\n    this.offsetY = 0.2;\r\n    this.pointerOffsetX = 0;\r\n    this.pointerOffsetY = 0;\r\n    this.isEnemy = isEnemy !== undefined ? isEnemy : true;\r\n    this.setPointerDir();\r\n    this.setPointerOffset();\r\n    this.removeOverlapping();\r\n  }\r\n\r\n  tick = () => {\r\n    this.dead = true;\r\n  };\r\n\r\n  static updateFrame = (delta: number) => {\r\n    HitWarning.frame += 0.125 * delta;\r\n    if (HitWarning.frame >= 2) HitWarning.frame = 0;\r\n  };\r\n\r\n  removeOverlapping = () => {\r\n    for (const entity of this.game.room.entities) {\r\n      if (entity.x === this.x && entity.y === this.y) {\r\n        this.dead = true;\r\n        break;\r\n      }\r\n    }\r\n    /*for (const door of this.game.room.doors) {\r\n      if (door.x === this.x && door.y === this.y) {\r\n        this.dead = true;\r\n        break;\r\n      }\r\n    }*/\r\n  };\r\n\r\n  setPointerDir = () => {\r\n    const dx = this.eX - this.x;\r\n    const dy = this.eY - this.y;\r\n\r\n    if (dx === 0 && dy === 0) {\r\n      this.dir = Direction.Center;\r\n    } else {\r\n      if (dx === 0) {\r\n        this.dir = dy < 0 ? Direction.South : Direction.North;\r\n      } else if (dy === 0) {\r\n        this.dir = dx < 0 ? Direction.East : Direction.West;\r\n      } else if (dx < 0) {\r\n        this.dir = dy < 0 ? Direction.SouthEast : Direction.NorthEast;\r\n      } else {\r\n        this.dir = dy < 0 ? Direction.SouthWest : Direction.NorthWest;\r\n      }\r\n\r\n      this.tileX = 0 + 2 * this.dir;\r\n      console.log(this.tileX);\r\n      console.log(this.dir);\r\n    }\r\n  };\r\n\r\n  setPointerOffset = () => {\r\n    const offsets = {\r\n      [Direction.North]: { x: 0, y: 0.5 },\r\n      [Direction.South]: { x: 0, y: -0.6 },\r\n      [Direction.West]: { x: 0.6, y: 0 },\r\n      [Direction.East]: { x: -0.6, y: 0 },\r\n      [Direction.NorthEast]: { x: -0.5, y: 0.5 },\r\n      [Direction.NorthWest]: { x: 0.5, y: 0.5 },\r\n      [Direction.SouthEast]: { x: -0.5, y: -0.5 },\r\n      [Direction.SouthWest]: { x: 0.5, y: -0.5 },\r\n      [Direction.Center]: { x: 0, y: -0.25 },\r\n    };\r\n\r\n    const offset = offsets[this.dir];\r\n    this.pointerOffsetX = offset.x;\r\n    this.pointerOffsetY = offset.y;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (\r\n      Math.abs(this.x - this.game.players[this.game.localPlayerID].x) <= 1 &&\r\n      Math.abs(this.y - this.game.players[this.game.localPlayerID].y) <= 1\r\n    ) {\r\n      if (this.isEnemy) {\r\n        Game.drawFX(\r\n          this.tileX + Math.floor(HitWarning.frame),\r\n          this.tileY,\r\n          1,\r\n          1,\r\n          this.x + this.pointerOffsetX,\r\n          this.y + this.pointerOffsetY - this.offsetY,\r\n          1,\r\n          1\r\n        );\r\n      }\r\n      Game.drawFX(\r\n        18 + Math.floor(HitWarning.frame),\r\n        5,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y - this.offsetY,\r\n        1,\r\n        1\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    if (this.isEnemy) {\r\n      Game.drawFX(\r\n        this.tileX + Math.floor(HitWarning.frame),\r\n        this.tileY + 1,\r\n        1,\r\n        1,\r\n        this.x + this.pointerOffsetX,\r\n        this.y + this.pointerOffsetY - this.offsetY,\r\n        1,\r\n        1\r\n      );\r\n    }\r\n    if (\r\n      Math.abs(this.x - this.game.players[this.game.localPlayerID].x) <= 1 &&\r\n      Math.abs(this.y - this.game.players[this.game.localPlayerID].y) <= 1\r\n    ) {\r\n      Game.drawFX(\r\n        18 + Math.floor(HitWarning.frame),\r\n        6,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y - this.offsetY,\r\n        1,\r\n        1\r\n      );\r\n    }\r\n  };\r\n}\r\n","import { GameConstants } from \"./gameConstants\";\r\nimport { Game } from \"./game\";\r\n\r\nexport enum InputEnum {\r\n  I,\r\n  M,\r\n  M_UP,\r\n  Q,\r\n  LEFT,\r\n  RIGHT,\r\n  UP,\r\n  DOWN,\r\n  SPACE\r\n}\r\n\r\nexport const Input = {\r\n  _pressed: {},\r\n\r\n  isTapHold: false,\r\n  tapStartTime: null,\r\n  IS_TAP_HOLD_THRESH: 300,\r\n  keyDownListener: function (key: string) { },\r\n  iListener: function () { },\r\n  mListener: function () { },\r\n  mUpListener: function () { },\r\n  qListener: function () { },\r\n  leftListener: function () { },\r\n  rightListener: function () { },\r\n  upListener: function () { },\r\n  downListener: function () { },\r\n  aListener: function () { Input.leftListener(); },\r\n  dListener: function () { Input.rightListener(); },\r\n  wListener: function () { Input.upListener(); },\r\n  sListener: function () { Input.downListener(); },\r\n  spaceListener: function () { },\r\n  leftSwipeListener: function () { },\r\n  rightSwipeListener: function () { },\r\n  upSwipeListener: function () { },\r\n  downSwipeListener: function () { },\r\n  tapListener: function () { },\r\n\r\n  mouseLeftClickListeners: [],\r\n\r\n  mouseLeftClickListener: function (x: number, y: number) {\r\n    for (let i = 0; i < Input.mouseLeftClickListeners.length; i++)\r\n      Input.mouseLeftClickListeners[i](x, y);\r\n  },\r\n\r\n  mouseX: 0,\r\n  mouseY: 0,\r\n\r\n  lastPressTime: 0,\r\n  lastPressKey: \"\",\r\n\r\n  SPACE: \"Space\",\r\n  LEFT: \"ArrowLeft\",\r\n  UP: \"ArrowUp\",\r\n  RIGHT: \"ArrowRight\",\r\n  DOWN: \"ArrowDown\",\r\n  W: \"KeyW\",\r\n  A: \"KeyA\",\r\n  S: \"KeyS\",\r\n  D: \"KeyD\",\r\n  M: \"KeyM\",\r\n  N: \"KeyN\",\r\n  I: \"KeyI\",\r\n  Q: \"KeyQ\",\r\n\r\n  isDown: function (keyCode: string) {\r\n    return this._pressed[keyCode];\r\n  },\r\n\r\n  onKeydown: (event: KeyboardEvent) => {\r\n    if (event.repeat) return; // ignore repeat keypresses\r\n    if (event.key) Input.keyDownListener(event.key);\r\n    if (event.cancelable && event.key != \"F12\" && event.key != \"F5\") event.preventDefault();\r\n    Input.lastPressTime = Date.now();\r\n    Input.lastPressKey = event.key;\r\n    Input._pressed[event.code] = true;\r\n    switch (event.code) {\r\n      case Input.LEFT:\r\n        Input.leftListener();\r\n        break;\r\n      case Input.A:\r\n        Input.aListener();\r\n        break;\r\n      case Input.RIGHT:\r\n        Input.rightListener();\r\n        break;\r\n      case Input.D:\r\n        Input.dListener();\r\n        break;\r\n      case Input.UP:\r\n        Input.upListener();\r\n        break;\r\n      case Input.W:\r\n        Input.wListener();\r\n        break;\r\n      case Input.DOWN:\r\n        Input.downListener();\r\n        break;\r\n      case Input.S:\r\n        Input.sListener();\r\n        break;\r\n      case Input.SPACE:\r\n        Input.spaceListener();\r\n        break;\r\n      case Input.M:\r\n        Input.mListener();\r\n        break;\r\n      case Input.I:\r\n        Input.iListener();\r\n        break;\r\n      case Input.Q:\r\n        Input.qListener();\r\n        break;\r\n    }\r\n  },\r\n\r\n  onKeyup: function (event: KeyboardEvent) {\r\n    delete this._pressed[event.code];\r\n    if (event.key === this.lastPressKey) {\r\n      this.lastPressTime = 0;\r\n      this.lastPressKey = 0;\r\n    }\r\n    if (event.code === Input.M) Input.mUpListener();\r\n  },\r\n\r\n  mouseClickListener: function (event: MouseEvent) {\r\n    if (event.button === 0) {\r\n      let rect = window.document.getElementById(\"gameCanvas\").getBoundingClientRect();\r\n      let x = event.clientX - rect.left;\r\n      let y = event.clientY - rect.top;\r\n      Input.mouseLeftClickListener(Math.floor(x / Game.scale), Math.floor(y / Game.scale));\r\n    }\r\n  },\r\n\r\n  updateMousePos: function (event: MouseEvent) {\r\n    let rect = window.document.getElementById(\"gameCanvas\").getBoundingClientRect();\r\n    let x = event.clientX - rect.left;\r\n    let y = event.clientY - rect.top;\r\n\r\n    Input.mouseX = Math.floor(x / Game.scale);\r\n    Input.mouseY = Math.floor(y / Game.scale);\r\n  },\r\n\r\n  getTouches: function (evt) {\r\n    return (\r\n      evt.touches || evt.originalEvent.touches // browser API\r\n    ); // jQuery\r\n  },\r\n\r\n  xDown: null,\r\n  yDown: null,\r\n  currentX: 0,\r\n  currentY: 0,\r\n  swiped: false,\r\n\r\n  handleTouchStart: function (evt) {\r\n    evt.preventDefault();\r\n\r\n    const firstTouch = Input.getTouches(evt)[0];\r\n    Input.xDown = firstTouch.clientX;\r\n    Input.yDown = firstTouch.clientY;\r\n    Input.currentX = firstTouch.clientX;\r\n    Input.currentY = firstTouch.clientY;\r\n\r\n    Input.tapStartTime = Date.now();\r\n\r\n    Input.updateMousePos({\r\n      clientX: Input.currentX,\r\n      clientY: Input.currentY,\r\n    } as MouseEvent);\r\n\r\n    Input.swiped = false;\r\n  },\r\n\r\n  handleTouchMove: function (evt) {\r\n    evt.preventDefault();\r\n\r\n    Input.currentX = evt.touches[0].clientX;\r\n    Input.currentY = evt.touches[0].clientY;\r\n\r\n    Input.updateMousePos({\r\n      clientX: Input.currentX,\r\n      clientY: Input.currentY,\r\n    } as MouseEvent);\r\n\r\n    if (Input.swiped) return;\r\n\r\n    var xDiff = Input.xDown - Input.currentX;\r\n    var yDiff = Input.yDown - Input.currentY;\r\n\r\n    // we have not swiped yet\r\n    // check if we've swiped\r\n    if (xDiff ** 2 + yDiff ** 2 >= GameConstants.SWIPE_THRESH) {\r\n      if (Math.abs(xDiff) > Math.abs(yDiff)) {\r\n        /*most significant*/\r\n        if (xDiff > 0) {\r\n          Input.leftSwipeListener();\r\n        } else {\r\n          Input.rightSwipeListener();\r\n        }\r\n        Input.swiped = true;\r\n      } else {\r\n        if (yDiff > 0) {\r\n          Input.upSwipeListener();\r\n        } else {\r\n          Input.downSwipeListener();\r\n        }\r\n        Input.swiped = true;\r\n      }\r\n    }\r\n  },\r\n\r\n  handleTouchEnd: function (evt) {\r\n    evt.preventDefault();\r\n\r\n    if (!Input.isTapHold && !Input.swiped) Input.tapListener();\r\n    Input.isTapHold = false;\r\n    Input.tapStartTime = null;\r\n\r\n    // we've already swiped, don't count the click\r\n    if (Input.swiped) return;\r\n    Input.mouseClickListener({\r\n      button: 0,\r\n      clientX: Input.currentX,\r\n      clientY: Input.currentY,\r\n    } as MouseEvent);\r\n\r\n    Input.updateMousePos({\r\n      clientX: 0,\r\n      clientY: 0,\r\n    } as MouseEvent);\r\n  },\r\n\r\n  checkIsTapHold: function () {\r\n    if (Input.tapStartTime !== null && Date.now() >= Input.tapStartTime + Input.IS_TAP_HOLD_THRESH)\r\n      Input.isTapHold = true;\r\n  },\r\n};\r\nwindow.addEventListener(\r\n  \"keyup\",\r\n  function (event) {\r\n    Input.onKeyup(event);\r\n  },\r\n  false\r\n);\r\nwindow.addEventListener(\r\n  \"keydown\",\r\n  function (event) {\r\n    Input.onKeydown(event);\r\n  },\r\n  false\r\n);\r\nwindow.document\r\n  .getElementById(\"gameCanvas\")\r\n  .addEventListener(\"click\", event => Input.mouseClickListener(event), false);\r\nwindow.document\r\n  .getElementById(\"gameCanvas\")\r\n  .addEventListener(\"mousemove\", event => Input.updateMousePos(event));\r\n","import { Item } from \"./item/item\";\r\nimport { LevelConstants } from \"./levelConstants\";\r\nimport { Game } from \"./game\";\r\nimport { Key } from \"./item/key\";\r\nimport { Input } from \"./input\";\r\nimport { GameConstants } from \"./gameConstants\";\r\nimport { Equippable } from \"./item/equippable\";\r\nimport { Armor } from \"./item/armor\";\r\nimport { GoldenKey } from \"./item/goldenKey\";\r\nimport { Coin } from \"./item/coin\";\r\nimport { Gold } from \"./item/gold\";\r\nimport { GreenGem } from \"./item/greengem\";\r\nimport { Coal } from \"./item/coal\";\r\nimport { Weapon } from \"./weapon/weapon\";\r\nimport { Dagger } from \"./weapon/dagger\";\r\nimport { Room } from \"./room\";\r\nimport { Usable } from \"./item/usable\";\r\nimport { Shotgun } from \"./weapon/shotgun\";\r\nimport { DualDagger } from \"./weapon/dualdagger\";\r\nimport { Candle } from \"./item/candle\";\r\nimport { Torch } from \"./item/torch\";\r\nimport { Lantern } from \"./item/lantern\";\r\nimport { Player } from \"./player\";\r\nimport { Spear } from \"./weapon/spear\";\r\nimport { Pickaxe } from \"./weapon/pickaxe\";\r\nimport { Spellbook } from \"./weapon/spellbook\";\r\nimport { Backpack } from \"./item/backpack\";\r\nimport { Slingshot } from \"./weapon/slingshot\";\r\nimport { Heart } from \"./item/heart\";\r\n\r\nlet OPEN_TIME = 100; // milliseconds\r\nlet FILL_COLOR = \"#5a595b\";\r\nlet OUTLINE_COLOR = \"#292c36\";\r\nlet EQUIP_COLOR = \"#85a8e6\";\r\nlet FULL_OUTLINE = \"white\";\r\n\r\nexport class Inventory {\r\n  player: Player;\r\n  items: Array<Item>;\r\n  rows = 2;\r\n  cols = 5;\r\n  selX = 0;\r\n  selY = 0;\r\n  game: Game;\r\n  isOpen: boolean;\r\n  openTime: number;\r\n  coins: number;\r\n  equipAnimAmount: Array<number>;\r\n  weapon: Weapon;\r\n  expansion: number = 0;\r\n\r\n  constructor(game: Game, player: Player) {\r\n    this.game = game;\r\n    this.player = player;\r\n    this.items = new Array<Item>();\r\n    this.equipAnimAmount = [];\r\n    for (let i = 0; i < this.rows * this.cols; i++) {\r\n      this.equipAnimAmount[i] = 0;\r\n    }\r\n    //Input.mouseLeftClickListeners.push(this.mouseLeftClickListener);\r\n    this.coins = 0;\r\n    this.openTime = Date.now();\r\n    this.weapon = null;\r\n    this.expansion = 0;\r\n\r\n    let a = (i: Item) => {\r\n      if (i instanceof Equippable) {\r\n        i.setWielder(this.player);\r\n      }\r\n      if (i instanceof Weapon) {\r\n        i.toggleEquip();\r\n        this.weapon = i;\r\n        //this.player.weapon = this.weapon;\r\n      }\r\n\r\n      this.addItem(i);\r\n    };\r\n    const startingInv = [Dagger, Heart];\r\n    startingInv.forEach((item) => {\r\n      a(new item({ game: this.game } as Room, 0, 0));\r\n    });\r\n  }\r\n\r\n  clear = () => {\r\n    this.items = [];\r\n    for (let i = 0; i < (this.rows + this.expansion) * this.cols; i++)\r\n      this.equipAnimAmount[i] = 0;\r\n  };\r\n\r\n  open = () => {\r\n    this.isOpen = !this.isOpen;\r\n    if (this.isOpen) this.openTime = Date.now();\r\n  };\r\n\r\n  close = () => {\r\n    this.isOpen = false;\r\n  };\r\n\r\n  left = () => {\r\n    this.selX--;\r\n    if (this.selX < 0) this.selX = 0;\r\n  };\r\n  right = () => {\r\n    this.selX++;\r\n    if (this.selX > this.cols - 1) this.selX = this.cols - 1;\r\n  };\r\n  up = () => {\r\n    this.selY--;\r\n    if (this.selY < 0) this.selY = 0;\r\n  };\r\n  down = () => {\r\n    this.selY++;\r\n    if (this.selY > this.rows + this.expansion - 1)\r\n      this.selY = this.rows + this.expansion - 1;\r\n  };\r\n  space = () => {\r\n    let i = this.selX + this.selY * this.cols;\r\n\r\n    if (this.items[i] instanceof Usable) {\r\n      (this.items[i] as Usable).onUse(this.player);\r\n      //this.items.splice(i, 0);\r\n    } else if (this.items[i] instanceof Equippable) {\r\n      //dont equip on the same tick as using an item\r\n      let e = this.items[i] as Equippable;\r\n      e.toggleEquip();\r\n      if (e instanceof Weapon) {\r\n        if (e.equipped) this.weapon = e;\r\n        else this.weapon = null;\r\n      }\r\n      if (e.equipped) {\r\n        for (const i of this.items) {\r\n          if (i instanceof Equippable && i !== e && !e.coEquippable(i)) {\r\n            i.equipped = false; // prevent user from equipping two not coEquippable items\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  drop = () => {\r\n    let i = this.selX + this.selY * this.cols;\r\n    if (i < this.items.length) {\r\n      if (this.items[i] instanceof Equippable)\r\n        (this.items[i] as Equippable).equipped = false;\r\n      this.items[i].level = this.game.rooms[this.player.levelID];\r\n      this.items[i].x = this.player.x;\r\n      this.items[i].y = this.player.y;\r\n      this.items[i].pickedUp = false;\r\n      this.equipAnimAmount[i] = 0;\r\n      this.game.rooms[this.player.levelID].items.push(this.items[i]);\r\n      this.items.splice(i, 1);\r\n    }\r\n  };\r\n\r\n  hasItem = (itemType: any): Item => {\r\n    // itemType is class of Item we're looking for\r\n    for (const i of this.items) {\r\n      if (i instanceof itemType) return i;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  hasItemCount = (item: Item) => {\r\n    if (item instanceof Coin) return this.coinCount() >= item.stackCount;\r\n    for (const i of this.items) {\r\n      if (i.constructor === item.constructor && i.stackCount >= item.stackCount)\r\n        return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  subtractItemCount = (item: Item) => {\r\n    if (item instanceof Coin) {\r\n      this.subtractCoins(item.stackCount);\r\n      return;\r\n    }\r\n    for (const i of this.items) {\r\n      if (i.constructor === item.constructor) {\r\n        i.stackCount -= item.stackCount;\r\n        if (i.stackCount <= 0) this.items.splice(this.items.indexOf(i), 1);\r\n      }\r\n    }\r\n  };\r\n\r\n  coinCount = (): number => {\r\n    return this.coins;\r\n  };\r\n\r\n  subtractCoins = (n: number) => {\r\n    this.coins -= n;\r\n    if (this.coins < 0) this.coins = 0;\r\n  };\r\n\r\n  addCoins = (n: number) => {\r\n    this.coins += n;\r\n  };\r\n\r\n  isFull = (): boolean => {\r\n    return this.items.length >= (this.rows + this.expansion) * this.cols;\r\n  };\r\n\r\n  addItem = (item: Item): boolean => {\r\n    if (item instanceof Coin) {\r\n      this.coins += item.stack;\r\n      return true;\r\n    }\r\n    if (item instanceof Equippable) {\r\n      item.setWielder(this.player);\r\n    }\r\n    if (item.stackable) {\r\n      for (let i of this.items) {\r\n        if (i.constructor === item.constructor) {\r\n          // we already have an item of the same type\r\n          i.stackCount += item.stackCount;\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    if (!this.isFull()) {\r\n      // item is either not stackable, or it's stackable but we don't have one yet\r\n      this.items.push(item);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  removeItem = (item: Item) => {\r\n    let i = this.items.indexOf(item);\r\n    if (i !== -1) {\r\n      this.items.splice(i, 1);\r\n    }\r\n  };\r\n\r\n  getArmor = (): Armor => {\r\n    for (const i of this.items) {\r\n      if (i instanceof Armor && i.equipped) return i;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  hasWeapon = () => {\r\n    return this.weapon !== null;\r\n  };\r\n\r\n  getWeapon = () => {\r\n    return this.weapon;\r\n  };\r\n\r\n  tick = () => {\r\n    for (const i of this.items) {\r\n      i.tickInInventory();\r\n    }\r\n  };\r\n\r\n  textWrap = (text: string, x: number, y: number, maxWidth: number): number => {\r\n    // returns y value for next line\r\n    let words = text.split(\" \");\r\n    let line = \"\";\r\n\r\n    while (words.length > 0) {\r\n      if (Game.measureText(line + words[0]).width > maxWidth) {\r\n        Game.fillText(line, x, y);\r\n        line = \"\";\r\n        y += 8;\r\n      } else {\r\n        if (line !== \"\") line += \" \";\r\n        line += words[0];\r\n        words.splice(0, 1);\r\n      }\r\n    }\r\n    if (line !== \" \") {\r\n      Game.fillText(line, x, y);\r\n      y += 8;\r\n    }\r\n    return y;\r\n  };\r\n\r\n  drawCoins = (delta: number) => {\r\n    let coinX = LevelConstants.SCREEN_W - 1;\r\n    let coinY = LevelConstants.SCREEN_H - 1;\r\n\r\n    Game.drawItem(19, 0, 1, 2, coinX, coinY - 1, 1, 2);\r\n\r\n    let countText = \"\" + this.coins;\r\n    let width = Game.measureText(countText).width;\r\n    let countX = 4 - width;\r\n    let countY = -1;\r\n\r\n    Game.fillTextOutline(\r\n      countText,\r\n      coinX * GameConstants.TILESIZE + countX,\r\n      coinY * GameConstants.TILESIZE + countY,\r\n      GameConstants.OUTLINE,\r\n      \"white\"\r\n    );\r\n\r\n    let turnCountText = this.player.turnCount.toString();\r\n    Game.fillTextOutline(\r\n      turnCountText,\r\n      coinX * GameConstants.TILESIZE + countX,\r\n      coinY * GameConstants.TILESIZE + countY - 15,\r\n      GameConstants.OUTLINE,\r\n      \"white\"\r\n    );\r\n  };\r\n\r\n  pointInside = (x: number, y: number): boolean => {\r\n    let s = Math.min(18, (18 * (Date.now() - this.openTime)) / OPEN_TIME); // size of box\r\n    let b = 2; // border\r\n    let g = -2; // gap\r\n    let hg = 3 + Math.round(0.5 * Math.sin(Date.now() * 0.01) + 0.5); // highlighted growth\r\n    let ob = 1; // outer border\r\n    let width = this.cols * (s + 2 * b + g) - g;\r\n    let height = (this.rows + this.expansion) * (s + 2 * b + g) - g;\r\n\r\n    return (\r\n      x >= Math.round(0.5 * GameConstants.WIDTH - 0.5 * width) - ob &&\r\n      x <=\r\n        Math.round(0.5 * GameConstants.WIDTH - 0.5 * width) -\r\n          ob +\r\n          Math.round(width + 2 * ob) &&\r\n      y >= Math.round(0.5 * GameConstants.HEIGHT - 0.5 * height) - ob &&\r\n      y <=\r\n        Math.round(0.5 * GameConstants.HEIGHT - 0.5 * height) -\r\n          ob +\r\n          Math.round(height + 2 * ob)\r\n    );\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    this.drawCoins(delta);\r\n\r\n    if (this.isOpen) {\r\n      for (let i = 0; i < this.equipAnimAmount.length; i++) {\r\n        if (this.items[i] instanceof Equippable) {\r\n          if ((this.items[i] as Equippable).equipped) {\r\n            this.equipAnimAmount[i] += 0.2 * (1 - this.equipAnimAmount[i]);\r\n          } else {\r\n            this.equipAnimAmount[i] += 0.2 * (0 - this.equipAnimAmount[i]);\r\n          }\r\n        } else {\r\n          this.equipAnimAmount[i] = 0;\r\n        }\r\n      }\r\n\r\n      Game.ctx.fillStyle = \"rgb(0, 0, 0, 0.8)\";\r\n      Game.ctx.fillRect(0, 0, GameConstants.WIDTH, GameConstants.HEIGHT);\r\n\r\n      Game.ctx.globalAlpha = 1;\r\n\r\n      let s = Math.min(18, (18 * (Date.now() - this.openTime)) / OPEN_TIME); // size of box\r\n      let b = 2; // border\r\n      let g = -2; // gap\r\n      let hg = 3 + Math.round(0.5 * Math.sin(Date.now() * 0.01) + 0.5); // highlighted growth\r\n      let ob = 1; // outer border\r\n      let width = this.cols * (s + 2 * b + g) - g;\r\n      let height = (this.rows + this.expansion) * (s + 2 * b + g) - g;\r\n\r\n      Game.ctx.fillStyle = FULL_OUTLINE;\r\n      Game.ctx.fillRect(\r\n        Math.round(0.5 * GameConstants.WIDTH - 0.5 * width) - ob,\r\n        Math.round(0.5 * GameConstants.HEIGHT - 0.5 * height) - ob,\r\n        Math.round(width + 2 * ob),\r\n        Math.round(height + 2 * ob)\r\n      );\r\n      Game.ctx.fillRect(\r\n        Math.round(\r\n          0.5 * GameConstants.WIDTH - 0.5 * width + this.selX * (s + 2 * b + g)\r\n        ) -\r\n          hg -\r\n          ob,\r\n        Math.round(\r\n          0.5 * GameConstants.HEIGHT -\r\n            0.5 * height +\r\n            this.selY * (s + 2 * b + g)\r\n        ) -\r\n          hg -\r\n          ob,\r\n        Math.round(s + 2 * b + 2 * hg) + 2 * ob,\r\n        Math.round(s + 2 * b + 2 * hg) + 2 * ob\r\n      );\r\n\r\n      for (let x = 0; x < this.cols; x++) {\r\n        for (let y = 0; y < this.rows + this.expansion; y++) {\r\n          Game.ctx.fillStyle = OUTLINE_COLOR;\r\n          Game.ctx.fillRect(\r\n            Math.round(\r\n              0.5 * GameConstants.WIDTH - 0.5 * width + x * (s + 2 * b + g)\r\n            ),\r\n            Math.round(\r\n              0.5 * GameConstants.HEIGHT - 0.5 * height + y * (s + 2 * b + g)\r\n            ),\r\n            Math.round(s + 2 * b),\r\n            Math.round(s + 2 * b)\r\n          );\r\n          Game.ctx.fillStyle = FILL_COLOR;\r\n          Game.ctx.fillRect(\r\n            Math.round(\r\n              0.5 * GameConstants.WIDTH - 0.5 * width + x * (s + 2 * b + g) + b\r\n            ),\r\n            Math.round(\r\n              0.5 * GameConstants.HEIGHT -\r\n                0.5 * height +\r\n                y * (s + 2 * b + g) +\r\n                b\r\n            ),\r\n            Math.round(s),\r\n            Math.round(s)\r\n          );\r\n          let i = x + y * this.cols;\r\n          Game.ctx.fillStyle = EQUIP_COLOR;\r\n          let yOff = s * (1 - this.equipAnimAmount[i]);\r\n          Game.ctx.fillRect(\r\n            Math.round(\r\n              0.5 * GameConstants.WIDTH - 0.5 * width + x * (s + 2 * b + g) + b\r\n            ),\r\n            Math.round(\r\n              0.5 * GameConstants.HEIGHT -\r\n                0.5 * height +\r\n                y * (s + 2 * b + g) +\r\n                b +\r\n                yOff\r\n            ),\r\n            Math.round(s),\r\n            Math.round(s - yOff)\r\n          );\r\n        }\r\n      }\r\n      if (Date.now() - this.openTime >= OPEN_TIME) {\r\n        for (let i = 0; i < this.items.length; i++) {\r\n          let x = i % this.cols;\r\n          let y = Math.floor(i / this.cols);\r\n\r\n          let drawX = Math.round(\r\n            0.5 * GameConstants.WIDTH -\r\n              0.5 * width +\r\n              x * (s + 2 * b + g) +\r\n              b +\r\n              Math.floor(0.5 * s) -\r\n              0.5 * GameConstants.TILESIZE\r\n          );\r\n          let drawY = Math.round(\r\n            0.5 * GameConstants.HEIGHT -\r\n              0.5 * height +\r\n              y * (s + 2 * b + g) +\r\n              b +\r\n              Math.floor(0.5 * s) -\r\n              0.5 * GameConstants.TILESIZE\r\n          );\r\n\r\n          let drawXScaled = drawX / GameConstants.TILESIZE;\r\n          let drawYScaled = drawY / GameConstants.TILESIZE;\r\n\r\n          this.items[i].drawIcon(delta, drawXScaled, drawYScaled);\r\n\r\n          //if (this.items[i] instanceof Equippable && (this.items[i] as Equippable).equipped) {\r\n          //  Game.drawItem(0, 4, 2, 2, x - 0.5, y - 0.5, 2, 2);\r\n          //}\r\n        }\r\n        Game.ctx.fillStyle = OUTLINE_COLOR;\r\n        Game.ctx.fillRect(\r\n          Math.round(\r\n            0.5 * GameConstants.WIDTH -\r\n              0.5 * width +\r\n              this.selX * (s + 2 * b + g)\r\n          ) - hg,\r\n          Math.round(\r\n            0.5 * GameConstants.HEIGHT -\r\n              0.5 * height +\r\n              this.selY * (s + 2 * b + g)\r\n          ) - hg,\r\n          Math.round(s + 2 * b + 2 * hg),\r\n          Math.round(s + 2 * b + 2 * hg)\r\n        );\r\n        Game.ctx.fillStyle = FILL_COLOR;\r\n        Game.ctx.fillRect(\r\n          Math.round(\r\n            0.5 * GameConstants.WIDTH -\r\n              0.5 * width +\r\n              this.selX * (s + 2 * b + g) +\r\n              b -\r\n              hg\r\n          ),\r\n          Math.round(\r\n            0.5 * GameConstants.HEIGHT -\r\n              0.5 * height +\r\n              this.selY * (s + 2 * b + g) +\r\n              b -\r\n              hg\r\n          ),\r\n          Math.round(s + 2 * hg),\r\n          Math.round(s + 2 * hg)\r\n        );\r\n        let i = this.selX + this.selY * this.cols;\r\n        Game.ctx.fillStyle = EQUIP_COLOR;\r\n        let yOff = (s + 2 * hg) * (1 - this.equipAnimAmount[i]);\r\n        Game.ctx.fillRect(\r\n          Math.round(\r\n            0.5 * GameConstants.WIDTH -\r\n              0.5 * width +\r\n              this.selX * (s + 2 * b + g) +\r\n              b -\r\n              hg\r\n          ),\r\n          Math.round(\r\n            0.5 * GameConstants.HEIGHT -\r\n              0.5 * height +\r\n              this.selY * (s + 2 * b + g) +\r\n              b -\r\n              hg +\r\n              yOff\r\n          ),\r\n          Math.round(s + 2 * hg),\r\n          Math.round(s + 2 * hg - yOff)\r\n        );\r\n\r\n        let drawX = Math.round(\r\n          0.5 * GameConstants.WIDTH -\r\n            0.5 * width +\r\n            this.selX * (s + 2 * b + g) +\r\n            b +\r\n            Math.floor(0.5 * s) -\r\n            0.5 * GameConstants.TILESIZE\r\n        );\r\n        let drawY = Math.round(\r\n          0.5 * GameConstants.HEIGHT -\r\n            0.5 * height +\r\n            this.selY * (s + 2 * b + g) +\r\n            b +\r\n            Math.floor(0.5 * s) -\r\n            0.5 * GameConstants.TILESIZE\r\n        );\r\n\r\n        let drawXScaled = drawX / GameConstants.TILESIZE;\r\n        let drawYScaled = drawY / GameConstants.TILESIZE;\r\n\r\n        if (i < this.items.length)\r\n          this.items[i].drawIcon(delta, drawXScaled, drawYScaled);\r\n      }\r\n\r\n      let i = this.selX + this.selY * this.cols;\r\n\r\n      if (i < this.items.length) {\r\n        Game.ctx.fillStyle = \"white\";\r\n\r\n        let topPhrase = \"\";\r\n        if (this.items[i] instanceof Equippable) {\r\n          let e = this.items[i] as Equippable;\r\n          topPhrase = \"[SPACE] to equip\";\r\n          if (e.equipped) topPhrase = \"[SPACE] to unequip\";\r\n        }\r\n        if (this.items[i] instanceof Usable) {\r\n          topPhrase = \"[SPACE] to use\";\r\n        }\r\n\r\n        Game.ctx.fillStyle = \"white\";\r\n        let w = Game.measureText(topPhrase).width;\r\n        Game.fillText(topPhrase, 0.5 * (GameConstants.WIDTH - w), 5);\r\n\r\n        let lines = this.items[i].getDescription().split(\"\\n\");\r\n        let nextY = Math.round(\r\n          0.5 * GameConstants.HEIGHT -\r\n            0.5 * height +\r\n            (this.rows + this.expansion) * (s + 2 * b + g) +\r\n            b +\r\n            5\r\n        );\r\n        for (let j = 0; j < lines.length; j++) {\r\n          nextY = this.textWrap(lines[j], 5, nextY, GameConstants.WIDTH - 10);\r\n        }\r\n      }\r\n    }\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Game } from \"../game\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Player } from \"../player\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { Equippable } from \"./equippable\";\r\n\r\nexport class Armor extends Equippable {\r\n  health: number;\r\n  rechargeTurnCounter: number;\r\n  readonly RECHARGE_TURNS = 15;\r\n\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n    this.health = 1;\r\n    this.rechargeTurnCounter = -1;\r\n    this.tileX = 5;\r\n    this.tileY = 0;\r\n  }\r\n\r\n  coEquippable = (other: Equippable): boolean => {\r\n    if (other instanceof Armor) return false;\r\n    return true;\r\n  };\r\n\r\n  getDescription = (): string => {\r\n    return (\r\n      \"ENCHANTED ARMOR\\nA magic suit of armor. Absorbs one hit and regenerates after \" +\r\n      this.RECHARGE_TURNS +\r\n      \" turns.\"\r\n    );\r\n  };\r\n\r\n  tickInInventory = () => {\r\n    if (this.rechargeTurnCounter > 0) {\r\n      this.rechargeTurnCounter--;\r\n      if (this.rechargeTurnCounter === 0) {\r\n        this.rechargeTurnCounter = -1;\r\n        this.health = 1;\r\n      }\r\n    }\r\n  };\r\n\r\n  hurt = (damage: number) => {\r\n    if (this.health <= 0) return;\r\n    this.health -= damage;\r\n    this.rechargeTurnCounter = this.RECHARGE_TURNS + 1;\r\n  };\r\n\r\n  drawGUI = (delta: number, playerHealth: number) => {\r\n    if (this.rechargeTurnCounter === -1)\r\n      Game.drawFX(5, 2, 1, 1, playerHealth, LevelConstants.SCREEN_H - 1, 1, 1);\r\n    else {\r\n      let rechargeProportion = 1 - this.rechargeTurnCounter / this.RECHARGE_TURNS;\r\n\r\n      if (rechargeProportion < 0.5)\r\n        Game.drawFX(7, 2, 1, 1, playerHealth, LevelConstants.SCREEN_H - 1, 1, 1);\r\n      else Game.drawFX(8, 2, 1, 1, playerHealth, LevelConstants.SCREEN_H - 1, 1, 1);\r\n    }\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Sound } from \"../sound\";\r\nimport { Room } from \"../room\";\r\nimport { Usable } from \"./usable\";\r\nimport { Inventory } from \"../inventory\";\r\n\r\nexport class Backpack extends Usable {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 4;\r\n    this.tileY = 0;\r\n    this.offsetY = 0;\r\n  }\r\n\r\n  onUse = (player: Player) => {\r\n    if (this.level.game.rooms[player.levelID] === this.level.game.room)\r\n      Sound.heal();\r\n   \r\n\r\n      \r\n    player.inventory.expansion += 1;\r\n    //this.level.items = this.level.items.filter((x) => x !== this); // removes itself from the level\r\n  };\r\n  getDescription = () => {\r\n    return \"BACKPACK\\nA normal looking backpack. Increases the amount you can carry. \";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\n\r\nexport class BlueGem extends Item {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 13;\r\n    this.tileY = 0;\r\n\r\n    this.stackable = true;\r\n  }\r\n\r\n  getDescription = (): string => {\r\n    return \"ZIRCON\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Equippable } from \"./equippable\";\r\nimport { Torch } from \"./torch\";\r\nimport { Lantern } from \"./lantern\";\r\nimport { Inventory } from \"../inventory\";\r\nimport { Player } from \"../player\";\r\nimport { Light } from \"./light\";\r\n\r\nexport class Candle extends Light {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n    this.fuel = 100; //how many turns before it burns out\r\n    this.tileX = 27;\r\n    this.tileY = 0;\r\n  }\r\n\r\n  tickInInventory = () => {\r\n    if (this.fuel <= 0) {\r\n      this.wielder.game.pushMessage(\"Your candle burns out.\");\r\n      this.wielder.inventory.removeItem(this);\r\n    } else if (this.ignite()) {\r\n      this.fuel--;\r\n      this.wielder.sightRadius = Math.min(this.fuel / 5 + 2, 4);\r\n    }\r\n    console.log(`fuel: ${this.fuel}`);\r\n  };\r\n\r\n  coEquippable = (other: Light): boolean => {\r\n    return !(\r\n      other instanceof Candle ||\r\n      other instanceof Torch ||\r\n      other instanceof Lantern\r\n    );\r\n  };\r\n  \r\n  toggleEquip = () => {\r\n    this.equipped = !this.equipped;\r\n    if (this.ignite()) {\r\n      this.wielder.sightRadius = Math.min(this.fuel / 5 + 2, 4);\r\n    }\r\n    //if (!this.equipped) this.wielder.sightRadius = this.wielder.defaultSightRadius\r\n  };\r\n\r\n  getDescription = () => {\r\n    const percentage = (this.fuel / 50) * 100;\r\n    return `Candle: ${percentage}%`;\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { Usable } from \"./usable\";\r\nimport { Lantern } from \"./lantern\";\r\n\r\nexport class Coal extends Usable {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 17;\r\n    this.tileY = 0;\r\n    this.stackable = true;\r\n  }\r\n  onUse = (player: Player) => {\r\n    let l = player.inventory.hasItem(Lantern);\r\n    if (l instanceof Lantern) {\r\n      if (l.fuel <= l.fuelCap - 50) {\r\n        l.addFuel(50);\r\n        player.game.pushMessage(\"You add some fuel to your lantern.\");\r\n        this.stackCount -= 1;\r\n        if (this.stackCount <= 0) {\r\n          player.inventory.removeItem(this);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  getDescription = (): string => {\r\n    return \"COAL\\nA lump of coal.\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { Sound } from \"../sound\";\r\n\r\nexport class Coin extends Item {\r\n  stack: number;\r\n  //checked: boolean;\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 19;\r\n    this.tileY = 0;\r\n    this.stack = 1;\r\n    this.stackable = true;\r\n  }\r\n  onDrop = () => {\r\n    const coinList = []; //array to store coin objects\r\n    for (const item of this.level.items) {\r\n      if (item instanceof Coin) coinList.push(item);\r\n    }\r\n      for (const otherCoin of coinList) {\r\n        if (\r\n          this !== otherCoin &&\r\n          this.x === otherCoin.x &&\r\n          this.y === otherCoin.y\r\n        ) {\r\n          this.stack += otherCoin.stack;\r\n          this.level.items = this.level.items.filter((x) => x !== otherCoin);\r\n        }\r\n        if (this.stack === 2) this.tileX = 20;\r\n        else if (this.stack >= 3) this.tileX = 21;\r\n      }\r\n  };\r\n  draw = (delta: number) => {\r\n    if (!this.pickedUp) {\r\n      this.drawableY = this.y;\r\n\r\n      if (this.scaleFactor < 1) this.scaleFactor += 0.04;\r\n      else this.scaleFactor = 1;\r\n\r\n      Game.drawItem(0, 0, 1, 1, this.x, this.y, 1, 1);\r\n      this.frame += (delta * (Math.PI * 2)) / 60;\r\n      Game.drawItem(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x + this.w * (this.scaleFactor * -0.5 + 0.5),\r\n        this.y +\r\n          Math.sin(this.frame) * 0.07 -\r\n          1 +\r\n          this.offsetY +\r\n          this.h * (this.scaleFactor * -0.5 + 0.5),\r\n        this.w * this.scaleFactor,\r\n        this.h * this.scaleFactor,\r\n        this.level.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n  pickupSound = () => {\r\n    if (this.level === this.level.game.room) Sound.pickupCoin();\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\n\r\nexport class Equippable extends Item {\r\n  wielder: Player;\r\n  equipped: boolean;\r\n\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n    this.equipped = false;\r\n  }\r\n\r\n  setWielder = (wielder: Player) => {\r\n    this.wielder = wielder;\r\n  }\r\n\r\n  coEquippable = (other: Equippable): boolean => {\r\n    return true;\r\n  };\r\n\r\n  toggleEquip = () => {\r\n    this.equipped = !this.equipped;\r\n  };\r\n\r\n  drawEquipped = (delta: number, x: number, y: number) => {\r\n    Game.drawItem(this.tileX, this.tileY, 1, 2, x, y - 1, this.w, this.h);\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\n\r\nexport class Gold extends Item {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 18;\r\n    this.tileY = 0;\r\n\r\n    this.stackable = true;\r\n  }\r\n\r\n  getDescription = (): string => {\r\n    return \"GOLD\\nA nugget of gold.\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Equippable } from \"./equippable\";\r\nimport { Room } from \"../room\";\r\n\r\nexport class GoldenKey extends Equippable {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 6;\r\n    this.tileY = 0;\r\n  }\r\n\r\n  getDescription = (): string => {\r\n    return \"GOLD KEY\\nA heavy gold key.\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\n\r\nexport class GreenGem extends Item {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 11;\r\n    this.tileY = 0;\r\n\r\n    this.stackable = true;\r\n  }\r\n\r\n  getDescription = (): string => {\r\n    return \"PERIDOT\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Sound } from \"../sound\";\r\nimport { Room } from \"../room\";\r\nimport { Usable } from \"./usable\";\r\n\r\nexport class Heart extends Usable {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n    this.tileX = 8;\r\n    this.tileY = 0;\r\n    this.offsetY = 0;\r\n  }\r\n\r\n  onUse = (player: Player) => {\r\n    player.health = Math.min(player.maxHealth, player.health + 1);\r\n    if (this.level.game.rooms[player.levelID] === this.level.game.room)\r\n      Sound.heal();\r\n    player.inventory.removeItem(this);\r\n\r\n    //this.level.items = this.level.items.filter((x) => x !== this); // removes itself from the level\r\n  };\r\n\r\n  getDescription = () => {\r\n    return \"HEALTH POTION\\nRestores 1 heart\";\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Player } from \"../player\";\r\nimport { Room } from \"../room\";\r\nimport { Sound } from \"../sound\";\r\nimport { Drawable } from \"../drawable\";\r\n\r\n// Item class extends Drawable class and represents an item in the game\r\nexport class Item extends Drawable {\r\n  // Item properties\r\n  x: number; // x-coordinate of the item\r\n  y: number; // y-coordinate of the item\r\n  w: number; // width of the item\r\n  h: number; // height of the item\r\n  offsetY: number; // offset of the item on the y-axis\r\n  tileX: number; // x-coordinate of the tile where the item is located\r\n  tileY: number; // y-coordinate of the tile where the item is located\r\n  frame: number; // frame number for animation\r\n  level: Room; // level where the item is located\r\n  stackable: boolean; // whether the item is stackable or not\r\n  stackCount: number; // number of items in the stack\r\n  pickedUp: boolean; // whether the item has been picked up or not\r\n  alpha: number; // alpha value for transparency\r\n  scaleFactor: number; // scale factor for size adjustment\r\n\r\n  // Constructor for the Item class\r\n  constructor(level: Room, x: number, y: number) {\r\n    super();\r\n\r\n    // Initialize properties\r\n    this.level = level;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.drawableY = y;\r\n    this.w = 1;\r\n    this.h = 2;\r\n    this.tileX = 0;\r\n    this.tileY = 0;\r\n    this.frame = 0;\r\n    this.stackable = false;\r\n    this.stackCount = 1;\r\n    this.pickedUp = false;\r\n    this.alpha = 1;\r\n    this.scaleFactor = 0.2;\r\n    this.offsetY = -0.25;\r\n  }\r\n\r\n  // Empty tick function to be overridden by subclasses\r\n  tick = () => {};\r\n  // Empty tick function for inventory behavior to be overridden by subclasses\r\n  tickInInventory = () => {};\r\n\r\n  // Function to get description of the item, to be overridden by subclasses\r\n  getDescription = (): string => {\r\n    return \"\";\r\n  };\r\n\r\n  // Function to play sound when item is picked up\r\n  pickupSound = () => {\r\n    if (this.level === this.level.game.room) Sound.genericPickup();\r\n  };\r\n\r\n  // Empty function to be called when item is dropped, to be overridden by subclasses\r\n  onDrop = () => {}\r\n\r\n  // Function to be called when item is picked up\r\n  onPickup = (player: Player) => {\r\n    if (!this.pickedUp) {\r\n      this.pickedUp = player.inventory.addItem(this);\r\n      if (this.pickedUp) this.pickupSound();\r\n    }\r\n  };\r\n\r\n  // Function to get the amount of shade at the item's location\r\n  shadeAmount = () => {\r\n    return this.level.softVis[this.x][this.y];\r\n  };\r\n\r\n  // Function to draw the item\r\n  draw = (delta: number) => {\r\n    if (!this.pickedUp) {\r\n      this.drawableY = this.y;\r\n\r\n      if (this.scaleFactor < 1) this.scaleFactor += 0.04;\r\n      else this.scaleFactor = 1;\r\n\r\n      Game.drawItem(0, 0, 1, 1, this.x, this.y, 1, 1);\r\n      this.frame += (delta * (Math.PI * 2)) / 60;\r\n      Game.drawItem(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x + this.w * (this.scaleFactor * -0.5 + 0.5),\r\n        this.y +\r\n          Math.sin(this.frame) * 0.07 -\r\n          1 +\r\n          this.offsetY +\r\n          this.h * (this.scaleFactor * -0.5 + 0.5),\r\n        this.w * this.scaleFactor,\r\n        this.h * this.scaleFactor,\r\n        this.level.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n  // Function to draw the top layer of the item\r\n  drawTopLayer = (delta: number) => {\r\n    if (this.pickedUp) {\r\n      this.y -= 0.125;\r\n      this.alpha -= 0.03;\r\n      if (this.y < -1)\r\n        this.level.items = this.level.items.filter((x) => x !== this); // removes itself from the level\r\n\r\n      if (GameConstants.ALPHA_ENABLED)\r\n        Game.ctx.globalAlpha = Math.max(0, this.alpha);\r\n\r\n      Game.drawItem(\r\n        this.tileX,\r\n        this.tileY,\r\n        1,\r\n        2,\r\n        this.x,\r\n        this.y - 1,\r\n        this.w,\r\n        this.h\r\n      );\r\n\r\n      Game.ctx.globalAlpha = 1.0;\r\n    }\r\n  };\r\n  // Function to draw the item's icon\r\n  drawIcon = (delta: number, x: number, y: number, opacity = 1) => {\r\n    if (GameConstants.ALPHA_ENABLED) Game.ctx.globalAlpha = opacity;\r\n    Game.drawItem(this.tileX, this.tileY, 1, 2, x, y - 1, this.w, this.h);\r\n    Game.ctx.globalAlpha = 1;\r\n\r\n    let countText = this.stackCount <= 1 ? \"\" : \"\" + this.stackCount;\r\n    let width = Game.measureText(countText).width;\r\n    let countX = 16 - width;\r\n    let countY = 10;\r\n\r\n    Game.fillTextOutline(\r\n      countText,\r\n      x * GameConstants.TILESIZE + countX,\r\n      y * GameConstants.TILESIZE + countY,\r\n      GameConstants.OUTLINE,\r\n      \"white\"\r\n    );\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Equippable } from \"./equippable\";\r\nimport { Room } from \"../room\";\r\n\r\nexport class Key extends Equippable {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 1;\r\n    this.tileY = 0;\r\n  }\r\n\r\n  getDescription = (): string => {\r\n    return \"KEY\\nAn iron key.\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Equippable } from \"./equippable\";\r\nimport { Candle } from \"./candle\";\r\nimport { Torch } from \"./torch\";\r\nimport { Coal } from \"./coal\";\r\nimport { Light } from \"./light\";\r\n\r\nexport class Lantern extends Light {\r\n  fuelCap: number;\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n    this.fuel = 0;\r\n    this.tileX = 29;\r\n    this.tileY = 0;\r\n    this.fuelCap = 250;\r\n  }\r\n  addFuel = (amount: number) => {\r\n    this.fuel += amount;\r\n  };\r\n  \r\n  coEquippable = (other: Light): boolean => {\r\n    return !(\r\n      other instanceof Candle ||\r\n      other instanceof Torch ||\r\n      other instanceof Lantern\r\n    );\r\n  };\r\n\r\n  tickInInventory = () => {\r\n    if (this.fuel === 0 && this.equipped) {\r\n      this.equipped = false;\r\n      this.wielder.game.pushMessage(\"Your lantern runs out of fuel.\");\r\n    }\r\n    if (this.ignite()) {\r\n      this.fuel -= 1;\r\n      this.wielder.sightRadius = Math.min(this.fuel / 4 + 3, 7);\r\n      console.log(\"sight radius:\" + this.wielder.sightRadius);\r\n    }\r\n    console.log(\"fuel:\" + this.fuel);\r\n  };\r\n\r\n  toggleEquip = () => {\r\n    if (this.fuel > 0) {\r\n      this.equipped = !this.equipped;\r\n      if (this.ignite()) {\r\n        this.wielder.sightRadius = Math.min(this.fuel / 4 + 3, 7);\r\n      } //else this.wielder.sightRadius = 3;\r\n    } else\r\n      this.wielder.game.pushMessage(\r\n        \"I'll need some fuel before I can use this\"\r\n      );\r\n    //Math.max(this.wielder.defaultSightRadius, this.fuel / 25)}\r\n  };\r\n\r\n  getDescription = () => {\r\n    const percentage = Math.round((this.fuel / this.fuelCap) * 100);\r\n    return `LANTERN - Fuel: ${percentage}%, Capacity: ${this.fuelCap / 50}`;\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Equippable } from \"./equippable\";\r\nimport { Candle } from \"./candle\";\r\nimport { Lantern } from \"./lantern\";\r\nimport { Torch } from \"./torch\";\r\n\r\nexport class Light extends Equippable {\r\n    fuel: number;\r\n  fuelCap: number;\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 28;\r\n    this.tileY = 0;\r\n    this.fuel = 0;\r\n    this.fuelCap = 250;\r\n  }\r\n\r\n  ignite = () => {\r\n    if (this.fuel > 0 && this.equipped) {\r\n      return true;\r\n    } else return false;\r\n  };\r\n\r\n  toggleEquip = () => {\r\n    this.equipped = !this.equipped;\r\n    if (this.equipped) {\r\n      this.wielder.sightRadius = 12;\r\n    } else this.wielder.sightRadius = this.wielder.defaultSightRadius;\r\n  };\r\n\r\n  getDescription = () => {\r\n    return \"TORCH\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\n\r\nexport class RedGem extends Item {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 12;\r\n    this.tileY = 0;\r\n\r\n    this.stackable = true;\r\n  }\r\n\r\n  getDescription = (): string => {\r\n    return \"GARNET\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\n\r\nexport class Shrooms extends Item {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 6;\r\n    this.tileY = 0;\r\n\r\n    this.stackable = true;\r\n  }\r\n\r\n  getDescription = (): string => {\r\n    return \"SHROOMS\\nI don't think I should eat these...\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { TextParticle } from \"../particle/textParticle\";\r\nimport { GameConstants } from \"../gameConstants\";\r\n\r\nexport class Stone extends Item {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 15;\r\n    this.tileY = 0;\r\n\r\n    this.stackable = true;\r\n  }\r\n\r\n  getDescription = (): string => {\r\n    return \"STONE\\nSome fragments of stone.\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Equippable } from \"./equippable\";\r\nimport { Candle } from \"./candle\";\r\nimport { Lantern } from \"./lantern\";\r\nimport { Light } from \"./light\";\r\n\r\nexport class Torch extends Light {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 28;\r\n    this.tileY = 0;\r\n  }\r\n\r\n  toggleEquip = () => {\r\n    this.equipped = !this.equipped;\r\n    if (this.equipped) {\r\n      this.wielder.sightRadius = 12;\r\n    } else this.wielder.sightRadius = this.wielder.defaultSightRadius;\r\n  };\r\n\r\n  coEquippable = (other: Light): boolean => {\r\n    return !(\r\n      other instanceof Candle ||\r\n      other instanceof Torch ||\r\n      other instanceof Lantern\r\n    );\r\n  };\r\n  \r\n  getDescription = () => {\r\n    return \"TORCH\";\r\n  };\r\n}\r\n","import { Item } from \"./item\";\r\nimport { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Sound } from \"../sound\";\r\nimport { Room } from \"../room\";\r\n\r\nexport class Usable extends Item {\r\n  user: Player;\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n  }\r\n  onUse = (player: Player) => {};\r\n\r\n}\r\n","import { GameConstants } from \"./gameConstants\";\r\n\r\nexport class LevelConstants {\r\n  static SCREEN_W = 1;\r\n  static SCREEN_H = 1;\r\n\r\n  static readonly COMPUTER_TURN_DELAY = 300; // milliseconds\r\n  static readonly TURN_TIME = 1000; // milliseconds\r\n  static readonly LEVEL_TRANSITION_TIME = 300; // milliseconds\r\n  static readonly LEVEL_TRANSITION_TIME_LADDER = 1000; // milliseconds\r\n  static readonly ROOM_COUNT = 50;\r\n\r\n  static readonly HEALTH_BAR_FADEIN = 100;\r\n  static readonly HEALTH_BAR_FADEOUT = 100;\r\n  static readonly HEALTH_BAR_TOTALTIME = 1000;\r\n\r\n  static readonly SHADED_TILE_CUTOFF = 1;\r\n  static SMOOTH_LIGHTING = false; //doesn't work\r\n  static readonly MIN_VISIBILITY = 0; // visibility level of places you've already seen\r\n  static readonly LIGHTING_ANGLE_STEP = 3; // how many degrees between each ray, previously 5\r\n\r\n  static readonly LEVEL_TEXT_COLOR = \"yellow\";\r\n}\r\n","import { Game } from \"./game\";\r\nimport { Room, RoomType } from \"./room\";\r\nimport { Door } from \"./tile/door\";\r\nimport { LevelConstants } from \"./levelConstants\";\r\nimport { Random } from \"./random\";\r\nimport { DownLadder } from \"./tile/downLadder\";\r\n//Goal: CRACK THE LEVEL GENERATOR\r\nclass PartitionConnection {\r\n  x: number;\r\n  y: number;\r\n  other: Partition;\r\n\r\n  constructor(x: number, y: number, other: Partition) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.other = other;\r\n  }\r\n}\r\n\r\nclass Partition {\r\n  x: number;\r\n  y: number;\r\n  w: number;\r\n  h: number;\r\n  type: RoomType;\r\n  connections: Array<PartitionConnection>;\r\n  distance: number;\r\n\r\n  constructor(x: number, y: number, w: number, h: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.w = w;\r\n    this.h = h;\r\n    this.type = RoomType.DUNGEON;\r\n    this.connections = [];\r\n    this.distance = 1000;\r\n  }\r\n\r\n  split = () => {\r\n    // This function generates a random number around the center (0.5) within a certain width (0.6).\r\n    // It uses the Random.rand() function to generate a random number between 0 and 1, subtracts 0.5 to center it around 0,\r\n    // multiplies it by the width to scale it, and then adds the center (0.5) to shift it back to being between 0 and 1.\r\n    let rand_mid = () => {\r\n      let center = 0.5;\r\n      let width = 0.6;\r\n      return (Random.rand() - 0.5) * width + center;\r\n    };\r\n\r\n    let sizeRange = () => {\r\n      let sizes = [\r\n        { size: 1, probability: 0.2 },\r\n        { size: 3, probability: 0.6 },\r\n        { size: 10, probability: 0.2 },\r\n      ];\r\n      let rand = Random.rand();\r\n      let sum = 0;\r\n      for (let size of sizes) {\r\n        sum += size.probability;\r\n        if (rand <= sum) return size.size;\r\n      }\r\n      return sizes[sizes.length - 1].size;\r\n    };\r\n    let MIN_SIZE = 3;\r\n\r\n    if (this.w > this.h) {\r\n      //if the partitions width is greater than its height\r\n      let w1 = Math.floor(rand_mid() * this.w);\r\n      //choose a random tile within the width of the tiles\r\n      let w2 = this.w - w1 - 1;\r\n      //The remaining border - 1\r\n      if (w1 < MIN_SIZE || w2 < MIN_SIZE) return [this];\r\n      //if either of these are less than the min size: return an array with this Partition\r\n      return [\r\n        new Partition(this.x, this.y, w1, this.h),\r\n        new Partition(this.x + w1 + 1, this.y, w2, this.h),\r\n      ];\r\n      //return an array with two new partitions\r\n    } else {\r\n      let h1 = Math.floor(rand_mid() * this.h);\r\n      let h2 = this.h - h1 - 1;\r\n      if (h1 < MIN_SIZE || h2 < MIN_SIZE) return [this];\r\n      return [\r\n        new Partition(this.x, this.y, this.w, h1),\r\n        new Partition(this.x, this.y + h1 + 1, this.w, h2),\r\n      ];\r\n      //identical code for case where height > width\r\n    }\r\n  };\r\n\r\n  point_in = (x: number, y: number): boolean => {\r\n    //given the input argument x,y coordinates output boolean\r\n    return (\r\n      x >= this.x && x < this.x + this.w && y >= this.y && y < this.y + this.h\r\n    );\r\n\r\n    //only return true if both input x and input y are within the partitions x and y\r\n  };\r\n\r\n  point_next_to = (x: number, y: number): boolean => {\r\n    return (\r\n      (x >= this.x - 1 &&\r\n        x < this.x + this.w + 1 &&\r\n        y >= this.y &&\r\n        y < this.y + this.h) ||\r\n      (x >= this.x &&\r\n        x < this.x + this.w &&\r\n        y >= this.y - 1 &&\r\n        y < this.y + this.h + 1)\r\n    );\r\n    //return true if the input x and y are next to any point of the partition\r\n  };\r\n\r\n  area = (): number => {\r\n    return this.w * this.h;\r\n    //return the damn area\r\n  };\r\n\r\n  overlaps = (other: Partition): boolean => {\r\n    return (\r\n      other.x < this.x + this.w + 1 &&\r\n      other.x + other.w > this.x - 1 &&\r\n      other.y < this.y + this.h + 1 &&\r\n      other.y + other.h > this.y - 1\r\n    );\r\n    //takes another partition instance as argument\r\n    //returns true if any points of each overlap\r\n  };\r\n\r\n  get_branch_point = (): { x: number; y: number } => {\r\n    let points = [];\r\n    for (let x = this.x; x < this.x + this.w; x++) {\r\n      //count up from the partitions x to it's width\r\n      points.push({ x: x, y: this.y - 1 /*one row above partition*/ });\r\n      points.push({ x: x, y: this.y + this.h /*one row below partition*/ });\r\n    } // pushes the points above and below the partition\r\n    for (let y = this.y; y < this.y + this.h; y++) {\r\n      points.push({ x: this.x - 1, y: y });\r\n      points.push({ x: this.x + this.w, y: y });\r\n    } //pushes points to left an right of the partition\r\n    points = points.filter(\r\n      (p) =>\r\n        !this.connections.some(\r\n          (c) => Math.abs(c.x - p.x) + Math.abs(c.y - p.y) <= 1\r\n        )\r\n      //if the sum of the distance between the input x and y values and the partitions x and y values is > 1\r\n      //delete those from the points array\r\n    );\r\n    points.sort(() => 0.5 - Random.rand());\r\n    return points[0]; //return first or last object of x y points in array points\r\n  };\r\n} //end of Partition class\r\n\r\nlet split_partitions = (\r\n  partitions: Array<Partition>,\r\n  prob: number\r\n): Array<Partition> => {\r\n  for (let partition of partitions) {\r\n    if (Random.rand() < prob) {\r\n      partitions = partitions.filter((p) => p !== partition); // remove partition\r\n      partitions = partitions.concat(partition.split()); // add splits\r\n    }\r\n  }\r\n  return partitions;\r\n  //takes input partitions array, randomly removes partitions and adds splits, output modified partitions array\r\n};\r\n\r\nlet remove_wall_rooms = (\r\n  partitions: Array<Partition>,\r\n  w: number,\r\n  h: number\r\n): Array<Partition> => {\r\n  for (const partition of partitions) {\r\n    if (\r\n      partition.x === 0 ||\r\n      partition.y === 0 ||\r\n      partition.x + partition.w === w ||\r\n      partition.y + partition.h === h\r\n      //delete any partition where the x or y is zero\r\n    ) {\r\n      partitions = partitions.filter((p) => p != partition);\r\n    }\r\n  }\r\n  return partitions;\r\n  //return partitions array with no wall rooms\r\n};\r\n\r\nlet populate_grid = (\r\n  partitions: Array<Partition>,\r\n  grid: Array<Array<Partition | false>>,\r\n  w: number,\r\n  h: number\r\n): Array<Array<Partition | false>> => {\r\n  for (let x = 0; x < w; x++) {\r\n    //loop through the horizontal tiles\r\n    grid[x] = []; //empty array at x index\r\n    for (let y = 0; y < h; y++) {\r\n      grid[x][y] = false;\r\n      for (const partition of partitions) {\r\n        if (partition.point_in(x, y)) grid[x][y] = partition;\r\n      }\r\n    }\r\n  }\r\n  return grid;\r\n  //input grid array, partitions array and width and height\r\n  //output grid array that indicates which cells are in which partition\r\n};\r\n\r\nlet generate_dungeon_candidate = (\r\n  map_w: number,\r\n  map_h: number\r\n): Array<Partition> => {\r\n  let partitions = [new Partition(0, 0, map_w, map_h)];\r\n  let grid = [];\r\n  //add a new partition and define grid as empty array\r\n\r\n  for (let i = 0; i < 3; i++) partitions = split_partitions(partitions, 0.75);\r\n  for (let i = 0; i < 3; i++) partitions = split_partitions(partitions, 1);\r\n  for (let i = 0; i < 3; i++) partitions = split_partitions(partitions, 0.25);\r\n  //split partitions 3 times with different probabilities\r\n  grid = populate_grid(partitions, grid, map_w, map_h);\r\n  //remove wall rooms and populate dat grid\r\n  partitions.sort((a, b) => a.area() - b.area());\r\n  //sort the partitions list by ... area? I think?\r\n  let spawn = partitions[0];\r\n  //spawn is the first Partition instance\r\n  spawn.type = RoomType.START;\r\n  //set the roomtype for the partition accordingly\r\n  partitions[partitions.length - 1].type = RoomType.BOSS;\r\n  //set the largest room as boss room?\r\n\r\n  let connected = [spawn];\r\n  let frontier = [spawn];\r\n\r\n  let found_boss = false;\r\n\r\n  // connect rooms until we find the boss\r\n  while (frontier.length > 0 && !found_boss) {\r\n    let room = frontier[0];\r\n    frontier.splice(0, 1);\r\n\r\n    let doors_found = 0;\r\n    const num_doors = Math.floor(Random.rand() * 2 + 1);\r\n\r\n    let tries = 0;\r\n    const max_tries = 1000;\r\n\r\n    while (doors_found < num_doors && tries < max_tries) {\r\n      let point = room.get_branch_point();\r\n      for (const p of partitions) {\r\n        if (\r\n          p !== room &&\r\n          connected.indexOf(p) === -1 &&\r\n          p.point_next_to(point.x, point.y)\r\n        ) {\r\n          room.connections.push(new PartitionConnection(point.x, point.y, p));\r\n          p.connections.push(new PartitionConnection(point.x, point.y, room));\r\n          frontier.push(p);\r\n          connected.push(p);\r\n          doors_found++;\r\n          if (p.type === RoomType.BOSS) found_boss = true;\r\n          console.log(`Door Tries: ${tries}`);\r\n          break;\r\n        }\r\n      }\r\n      tries++;\r\n    }\r\n  }\r\n\r\n  // remove rooms we haven't connected to yet\r\n  for (const partition of partitions) {\r\n    if (partition.connections.length === 0)\r\n      partitions = partitions.filter((p) => p !== partition);\r\n  }\r\n  grid = populate_grid(partitions, grid, map_w, map_h); // recalculate with removed rooms\r\n\r\n  // make sure we haven't removed all the rooms\r\n  if (partitions.length === 0) {\r\n    return []; // for now just return an empty list so we can retry\r\n  }\r\n\r\n  // make some loops\r\n  let num_loop_doors = Math.floor(Random.rand() * 4 + 4);\r\n  for (let i = 0; i < num_loop_doors; i++) {\r\n    let roomIndex = Math.floor(Random.rand() * partitions.length);\r\n    let room = partitions[roomIndex];\r\n\r\n    let found_door = false;\r\n\r\n    let tries = 0;\r\n    const max_tries = 10;\r\n\r\n    let not_already_connected = partitions.filter(\r\n      (p) => !room.connections.some((c) => c.other === p)\r\n    );\r\n\r\n    while (!found_door && tries < max_tries) {\r\n      let point = room.get_branch_point();\r\n      for (const p of not_already_connected) {\r\n        if (p !== room && p.point_next_to(point.x, point.y)) {\r\n          room.connections.push(new PartitionConnection(point.x, point.y, p));\r\n          p.connections.push(new PartitionConnection(point.x, point.y, room));\r\n          found_door = true;\r\n          console.log(`Door Tries: ${tries}`);\r\n          break;\r\n        }\r\n      }\r\n      tries++;\r\n    }\r\n  }\r\n\r\n  // add stair room\r\n  if (!partitions.some((p) => p.type === RoomType.BOSS)) return [];\r\n  let boss = partitions.find((p) => p.type === RoomType.BOSS);\r\n  let found_stair = false;\r\n  const max_stair_tries = 100;\r\n  for (let stair_tries = 0; stair_tries < max_stair_tries; stair_tries++) {\r\n    let stair = new Partition(\r\n      Game.rand(boss.x - 1, boss.x + boss.w - 2, Random.rand),\r\n      boss.y - 4,\r\n      3,\r\n      3\r\n    );\r\n    stair.type = RoomType.DOWNLADDER;\r\n    if (!partitions.some((p) => p.overlaps(stair))) {\r\n      found_stair = true;\r\n      partitions.push(stair);\r\n      stair.connections.push(\r\n        new PartitionConnection(stair.x + 1, stair.y + 3, boss)\r\n      );\r\n      boss.connections.push(\r\n        new PartitionConnection(stair.x + 1, stair.y + 3, stair)\r\n      );\r\n      break;\r\n    }\r\n  }\r\n  if (!found_stair) return [];\r\n\r\n  // calculate room distances\r\n  frontier = [spawn];\r\n  let seen = [];\r\n  spawn.distance = 0;\r\n  while (frontier.length > 0) {\r\n    let room = frontier[0];\r\n    frontier.splice(0, 1);\r\n    seen.push(room);\r\n\r\n    for (let c of room.connections) {\r\n      let other = c.other;\r\n      other.distance = Math.min(other.distance, room.distance + 1);\r\n\r\n      if (seen.indexOf(other) === -1) frontier.push(other);\r\n    }\r\n  }\r\n\r\n  // add special rooms\r\n  let added_rope_hole = false;\r\n  for (const p of partitions) {\r\n    if (p.type === RoomType.DUNGEON) {\r\n      if (p.distance > 4 && p.area() <= 30 && Random.rand() < 0.1) {\r\n        p.type = RoomType.TREASURE;\r\n      } else if (\r\n        !added_rope_hole &&\r\n        p.distance > 3 &&\r\n        p.area() <= 20 &&\r\n        Random.rand() < 0.5\r\n      ) {\r\n        p.type = RoomType.ROPEHOLE;\r\n        added_rope_hole = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return partitions;\r\n};\r\n\r\nlet generate_dungeon = (map_w: number, map_h: number): Array<Partition> => {\r\n  let passes_checks = false;\r\n  let partitions: Array<Partition>;\r\n\r\n  let tries = 0;\r\n\r\n  while (!passes_checks) {\r\n    partitions = generate_dungeon_candidate(map_w, map_h);\r\n\r\n    passes_checks = true;\r\n    if (partitions.length < 6) passes_checks = false;\r\n    if (!partitions.some((p) => p.type === RoomType.BOSS))\r\n      passes_checks = false;\r\n    else if (partitions.find((p) => p.type === RoomType.BOSS).distance < 3)\r\n      passes_checks = false;\r\n\r\n    tries++;\r\n    //if (tries > 100) break;\r\n  }\r\n\r\n  return partitions;\r\n};\r\n\r\nlet generate_cave_candidate = (\r\n  map_w: number,\r\n  map_h: number,\r\n  num_rooms: number\r\n): Array<Partition> => {\r\n  let partitions = [new Partition(0, 0, map_w, map_h)];\r\n  let grid = [];\r\n\r\n  for (let i = 0; i < 3; i++) partitions = split_partitions(partitions, 0.75);\r\n  for (let i = 0; i < 3; i++) partitions = split_partitions(partitions, 1);\r\n  for (let i = 0; i < 3; i++) partitions = split_partitions(partitions, 0.5);\r\n  grid = populate_grid(partitions, grid, map_w, map_h);\r\n\r\n  partitions.sort((a, b) => a.area() - b.area());\r\n\r\n  if (partitions.length === 0) {\r\n    throw new Error(\"No partitions generated.\"); // Throw an error if no partitions\r\n  }\r\n\r\n  let spawn = partitions[0];\r\n  spawn.type = RoomType.ROPECAVE;\r\n  for (let i = 1; i < partitions.length; i++)\r\n    partitions[i].type = RoomType.CAVE;\r\n\r\n  let connected = [spawn];\r\n  let frontier = [spawn];\r\n\r\n  // connect rooms until we hit num_rooms\r\n  while (frontier.length > 0 && connected.length < num_rooms) {\r\n    let room = frontier[0];\r\n    frontier.splice(0, 1);\r\n\r\n    let doors_found = 0;\r\n    const num_doors = Math.floor(Random.rand() * 2 + 1);\r\n\r\n    let tries = 0;\r\n    const max_tries = 1000;\r\n\r\n    while (\r\n      doors_found < num_doors &&\r\n      tries < max_tries &&\r\n      connected.length < num_rooms\r\n    ) {\r\n      let point = room.get_branch_point();\r\n      if (!point) {\r\n      }\r\n\r\n      for (const p of partitions) {\r\n        if (\r\n          p !== room &&\r\n          connected.indexOf(p) === -1 &&\r\n          p.point_next_to(point.x, point.y)\r\n        ) {\r\n          room.connections.push(new PartitionConnection(point.x, point.y, p));\r\n          p.connections.push(new PartitionConnection(point.x, point.y, room));\r\n          frontier.push(p);\r\n          connected.push(p);\r\n          doors_found++;\r\n          break;\r\n        }\r\n      }\r\n      tries++;\r\n    }\r\n  }\r\n\r\n  // remove rooms we haven't connected to yet\r\n  // remove rooms we haven't connected to yet\r\n  partitions = partitions.filter(\r\n    (partition) => partition.connections.length > 0\r\n  );\r\n  grid = populate_grid(partitions, grid, map_w, map_h); // recalculate with removed rooms\r\n\r\n  // make sure we haven't removed all the rooms\r\n  if (partitions.length === 0) {\r\n    throw new Error(\"No valid rooms after filtering.\"); // Throw an error if no valid rooms\r\n  }\r\n\r\n  // make some loops\r\n  let num_loop_doors = Math.floor(Random.rand() * 4 + 4);\r\n  for (let i = 0; i < num_loop_doors; i++) {\r\n    let roomIndex = Math.floor(Random.rand() * partitions.length);\r\n    let room = partitions[roomIndex];\r\n\r\n    let found_door = false;\r\n\r\n    let tries = 0;\r\n    const max_tries = 100;\r\n\r\n    let not_already_connected = partitions.filter(\r\n      (p) => !room.connections.some((c) => c.other === p)\r\n    );\r\n\r\n    while (!found_door && tries < max_tries) {\r\n      let point = room.get_branch_point();\r\n      if (!point) {\r\n        console.warn(\r\n          \"No valid branch point found for room during loop creation:\"\r\n        );\r\n        break; // Skip if no valid branch point found\r\n      }\r\n\r\n      for (const p of not_already_connected) {\r\n        if (p !== room && p.point_next_to(point.x, point.y)) {\r\n          room.connections.push(new PartitionConnection(point.x, point.y, p));\r\n          p.connections.push(new PartitionConnection(point.x, point.y, room));\r\n          found_door = true;\r\n          break;\r\n        }\r\n      }\r\n      tries++;\r\n    }\r\n  }\r\n\r\n  // calculate room distances\r\n  frontier = [spawn];\r\n  let seen = [];\r\n  spawn.distance = 0;\r\n  while (frontier.length > 0) {\r\n    let room = frontier[0];\r\n    frontier.splice(0, 1);\r\n    seen.push(room);\r\n\r\n    for (let c of room.connections) {\r\n      let other = c.other;\r\n      other.distance = Math.min(other.distance, room.distance + 1);\r\n\r\n      if (seen.indexOf(other) === -1) frontier.push(other);\r\n    }\r\n  }\r\n\r\n  return partitions;\r\n};\r\n\r\nlet generate_cave = (mapWidth: number, mapHeight: number): Array<Partition> => {\r\n  let partitions: Array<Partition>;\r\n  const numberOfRooms = 5; // don't set this too high or cave generation will time out\r\n\r\n  do {\r\n    partitions = generate_cave_candidate(mapWidth, mapHeight, numberOfRooms);\r\n  } while (partitions.length < numberOfRooms);\r\n\r\n  return partitions;\r\n};\r\n\r\nexport class LevelGenerator {\r\n  game: Game;\r\n  seed: number;\r\n  depthReached = 0;\r\n  currentFloorFirstLevelID = 0;\r\n\r\n  getLevels = (\r\n    partitions: Array<Partition>,\r\n    depth: number,\r\n    mapGroup: number\r\n  ): Array<Room> => {\r\n    let levels: Array<Room> = [];\r\n\r\n    for (let i = 0; i < partitions.length; i++) {\r\n      let level = new Room(\r\n        this.game,\r\n        partitions[i].x - 1,\r\n        partitions[i].y - 1,\r\n        partitions[i].w + 2,\r\n        partitions[i].h + 2,\r\n        partitions[i].type,\r\n        depth,\r\n        mapGroup,\r\n        Random.rand\r\n      );\r\n      levels.push(level);\r\n    }\r\n\r\n    let doors_added: Array<Door> = [];\r\n\r\n    partitions.forEach((partition, index) => {\r\n      partition.connections.forEach((connection) => {\r\n        let door = levels[index].addDoor(connection.x, connection.y);\r\n        let existingDoor = doors_added.find(\r\n          (existing) => existing.x === door.x && existing.y === door.y\r\n        );\r\n        if (existingDoor) {\r\n          existingDoor.link(door);\r\n          door.link(existingDoor);\r\n        }\r\n        doors_added.push(door);\r\n      });\r\n    });\r\n\r\n    for (let level of levels) {\r\n      level.populate(Random.rand);\r\n    }\r\n\r\n    return levels;\r\n  };\r\n\r\n  setSeed = (seed: number) => {\r\n    this.seed = seed;\r\n  };\r\n\r\n  generate = (game: Game, depth: number, cave = false): Room => {\r\n    // Assert that the depth is correct\r\n    console.assert(\r\n      cave || this.depthReached === 0 || depth === this.depthReached + 1\r\n    );\r\n    this.depthReached = depth;\r\n\r\n    // Set the random state based on the seed and depth\r\n    Random.setState(this.seed + depth);\r\n\r\n    this.game = game;\r\n\r\n    // Determine the map group\r\n    let mapGroup =\r\n      this.game.rooms.length > 0\r\n        ? this.game.rooms[this.game.rooms.length - 1].mapGroup + 1\r\n        : 0;\r\n\r\n    // Generate partitions based on whether it's a cave or a dungeon\r\n    let partitions = cave ? generate_cave(20, 20) : generate_dungeon(35, 35);\r\n\r\n    // Get the levels based on the partitions\r\n    let levels = this.getLevels(partitions, depth, mapGroup);\r\n\r\n    // Update the current floor first level ID if it's not a cave\r\n    if (!cave) this.currentFloorFirstLevelID = this.game.rooms.length;\r\n\r\n    // Add the new levels to the game rooms\r\n    this.game.rooms = [...this.game.rooms, ...levels];\r\n\r\n    // Generate the rope hole if it exists\r\n    for (let room of levels) {\r\n      if (room.type === RoomType.ROPEHOLE) {\r\n        for (let x = room.roomX; x < room.roomX + room.width; x++) {\r\n          for (let y = room.roomY; y < room.roomY + room.height; y++) {\r\n            let tile = room.roomArray[x][y];\r\n            if (tile instanceof DownLadder && tile.isRope) {\r\n              tile.generate();\r\n              return cave\r\n                ? levels.find((l) => l.type === RoomType.ROPECAVE)\r\n                : levels.find((l) => l.type === RoomType.START);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Return the start room or the rope cave room\r\n    return cave\r\n      ? levels.find((l) => l.type === RoomType.ROPECAVE)\r\n      : levels.find((l) => l.type === RoomType.START);\r\n  };\r\n\r\n  generateFirstNFloors = (game, numFloors) => {\r\n    this.generate(game, 0, false);\r\n    for (let i = 0; i < numFloors; i++) {\r\n      let foundRoom = this.game.rooms\r\n        .slice()\r\n        .reverse()\r\n        .find((room) => room.type === RoomType.DOWNLADDER);\r\n\r\n      if (foundRoom) {\r\n        for (\r\n          let x = foundRoom.roomX;\r\n          x < foundRoom.roomX + foundRoom.width;\r\n          x++\r\n        ) {\r\n          for (\r\n            let y = foundRoom.roomY;\r\n            y < foundRoom.roomY + foundRoom.height;\r\n            y++\r\n          ) {\r\n            let tile = foundRoom.roomArray[x][y];\r\n            if (tile instanceof DownLadder) {\r\n              tile.generate();\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n}\r\n","export class LightSource {\r\n  x: number;\r\n  y: number;\r\n  r: number;\r\n\r\n  constructor(x: number, y: number, r: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.r = r;\r\n  }\r\n}\r\n","import { Game } from \"./game\";\r\nimport { GameConstants } from \"./gameConstants\";\r\nimport { Room, RoomType } from \"./room\";\r\nimport { Entity, EntityType } from \"./entity/entity\";\r\nimport { Wall } from \"./tile/wall\";\r\nimport { Player } from \"./player\";\r\n\r\nexport class Map {\r\n  game: Game;\r\n  mapData: any[] = [];\r\n  oldMapData: any[] = [];\r\n  depth: number;\r\n  scale: number;\r\n\r\n  constructor(game: Game, player: Player) {\r\n    this.game = game;\r\n    this.scale = 2\r\n    //this.depth = player.game.level.depth\r\n  }\r\n\r\n  saveMapData = () => {\r\n    this.clearMap();\r\n    for (const level of this.game.rooms) {\r\n      if (this.game.room.mapGroup === level.mapGroup && level.entered) {\r\n        this.mapData.push({\r\n          room: level,\r\n          walls: level.walls,\r\n          doors: level.doors,\r\n          entities: level.entities,\r\n          items: level.items,\r\n          players: this.game.players,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  clearMap = () => {\r\n    this.mapData = [];\r\n  }\r\n\r\n  saveOldMap = () => {\r\n    this.oldMapData = [...this.mapData];\r\n  }\r\n\r\n  renderMap = (delta: number) => {\r\n    this.setInitialCanvasSettings(1);\r\n    this.translateCanvas(0);\r\n    for (const data of this.mapData) {\r\n      this.drawRoom(data, delta);\r\n    }\r\n    /*for (const data of this.oldMapData) {\r\n      this.drawRoom(data);\r\n    }*/ \r\n    this.resetCanvasTransform();\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    this.renderMap(delta);\r\n  };\r\n\r\n  setInitialCanvasSettings = (alpha: number) => {\r\n    Game.ctx.globalAlpha = alpha;\r\n    Game.ctx.globalCompositeOperation = \"source-over\";\r\n  };\r\n\r\n  translateCanvas = (offset: number) => {\r\n    Game.ctx.translate(\r\n      0.75 * GameConstants.WIDTH -\r\n        this.game.room.roomX -\r\n        Math.floor(0.5 * this.game.room.width) +\r\n        20,\r\n      0.25 * GameConstants.HEIGHT -\r\n        this.game.room.roomY -\r\n        Math.floor(0.5 * this.game.room.height) - offset\r\n    );\r\n  };\r\n\r\n  drawRoom = (data, delta: number) => {\r\n    this.drawRoomOutline(data.room);\r\n    this.drawRoomWalls(data.walls);\r\n    this.drawRoomDoors(data.doors);\r\n    this.drawRoomEntities(data.entities);\r\n    this.drawRoomItems(data.items);\r\n    this.drawRoomPlayers(data.players, delta);\r\n  };\r\n\r\n  drawRoomOutline = (level) => {\r\n    const s = this.scale\r\n    Game.ctx.fillStyle = \"#5A5A5A\";\r\n    Game.ctx.fillRect(\r\n      level.roomX * s + 0,\r\n      level.roomY * s + 0,\r\n      level.width * s - 0,\r\n      level.height * s - 0\r\n    );\r\n    if (level.type === RoomType.UPLADDER) Game.ctx.fillStyle = \"#101460\";\r\n    if (level.type === RoomType.DOWNLADDER) Game.ctx.fillStyle = \"#601410\";\r\n    Game.ctx.fillStyle = \"black\";\r\n    Game.ctx.fillRect(\r\n      level.roomX * s + 1,\r\n      level.roomY * s + 1,\r\n      level.width * s - 2,\r\n      level.height * s - 2\r\n    );\r\n  };\r\n\r\n  drawRoomWalls = (walls) => {\r\n    const s = this.scale;\r\n    for (const wall of walls) {\r\n      Game.ctx.fillStyle = \"#404040\";\r\n      Game.ctx.fillRect(wall.x * s, wall.y * s, 1 * s, 1 * s);\r\n    }\r\n  };\r\n\r\n  drawRoomDoors = (doors) => {\r\n    const s = this.scale;\r\n    for (const door of doors) {\r\n      if (door.opened === false) Game.ctx.fillStyle = \"#5A5A5A\";\r\n      if (door.opened === true)\r\n        (Game.ctx.fillStyle = \"black\"),\r\n          Game.ctx.fillRect(door.x * s, door.y * s, 1 * s, 1 * s);\r\n    }\r\n  };\r\n\r\n  drawRoomPlayers = (players, delta: number) => {\r\n    const s = this.scale;\r\n    for (const i in players) {\r\n      Game.ctx.fillStyle = \"white\";\r\n      if (\r\n        this.game.rooms[players[i].levelID].mapGroup ===\r\n        this.game.room.mapGroup\r\n      ) {\r\n        Game.ctx.fillRect(\r\n          players[i].x * s,\r\n          players[i].y * s,\r\n          1 * s,\r\n          1 * s\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  drawRoomEntities = (entities) => {\r\n    const s = this.scale;\r\n    for (const enemy of entities) {\r\n      this.setEntityColor(enemy);\r\n      Game.ctx.fillRect(enemy.x * s, enemy.y * s, 1 * s, 1 * s);\r\n    }\r\n  };\r\n\r\n  setEntityColor = (enemy) => {\r\n    if (enemy.entityType === EntityType.ENEMY) {\r\n      Game.ctx.fillStyle = \"yellow\";\r\n    }\r\n    if (enemy.entityType === EntityType.PROP) {\r\n      Game.ctx.fillStyle = \"#847e87\";\r\n    }\r\n    if (enemy.entityType === EntityType.RESOURCE) {\r\n      Game.ctx.fillStyle = \"#5a595b\";\r\n    }\r\n    if (enemy.entityType === EntityType.FRIENDLY) {\r\n      Game.ctx.fillStyle = \"cyan\";\r\n    }\r\n  };\r\n\r\n  drawRoomItems = (items) => {\r\n    const s = this.scale;\r\n    for (const item of items) {\r\n      let x = item.x;\r\n      let y = item.y;\r\n      Game.ctx.fillStyle = \"#ac3232\";\r\n      if (!item.pickedUp) {\r\n        Game.ctx.fillRect(item.x * s, item.y * s, 1 * s, 1 * s);\r\n      }\r\n    }\r\n  };\r\n\r\n  resetCanvasTransform = () => {\r\n    Game.ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { Particle } from \"./particle\";\r\n\r\nexport class DeathParticle extends Particle {\r\n  x: number;\r\n  y: number;\r\n  frame: number;\r\n\r\n  constructor(x: number, y: number) {\r\n    super();\r\n    this.x = x;\r\n    this.y = y - 1.5;\r\n    this.dead = false;\r\n    this.frame = 0;\r\n  }\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    if (this.dead) return;\r\n\r\n    let yOffset = Math.max(0, ((this.frame - 3) * 3) / GameConstants.TILESIZE);\r\n    let f = Math.round(this.frame);\r\n    if (f == 2 || f == 4 || f == 6) Game.drawMob(2, 0, 1, 2, this.x, this.y - yOffset, 1, 2);\r\n    else Game.drawFX(Math.round(this.frame), 4, 1, 2, this.x, this.y - yOffset, 1, 2);\r\n\r\n    this.frame += 0.3 * delta;\r\n    if (this.frame > 10) this.dead = true;\r\n  };\r\n}\r\n","import { Room } from \"../room\";\r\nimport { Particle } from \"./particle\";\r\nimport { Game } from \"../game\";\r\nimport { GameConstants } from \"../gameConstants\";\r\n\r\nexport class GenericParticle extends Particle {\r\n  level: Room;\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n  s: number;\r\n  dx: number;\r\n  dy: number;\r\n  targetX: number;\r\n  targetY: number;\r\n  targetZ: number;\r\n  dz: number;\r\n  color: string;\r\n  alpha: number;\r\n  delay: number;\r\n  expirationTimer: number;\r\n\r\n  static shotgun = (\r\n    level: Room,\r\n    cx: number,\r\n    cy: number,\r\n    tx: number,\r\n    ty: number,\r\n    color: string\r\n  ) => {\r\n    for (let i = 0; i < 4; i++) {\r\n      level.particles.push(\r\n        new GenericParticle(\r\n          level,\r\n          cx,\r\n          cy,\r\n          0,\r\n          Math.random() * 0.5 + 0.3,\r\n          0,\r\n          0,\r\n          0,\r\n          color,\r\n          0,\r\n          10000000,\r\n          tx + Math.random() - 0.5,\r\n          ty + Math.random() - 0.5,\r\n          0\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  static spawnCluster = (\r\n    level: Room,\r\n    cx: number,\r\n    cy: number,\r\n    color: string\r\n  ) => {\r\n    for (let i = 0; i < 4; i++) {\r\n      level.particles.push(\r\n        new GenericParticle(\r\n          level,\r\n          cx + Math.random() * 0.05 - 0.025,\r\n          cy + Math.random() * 0.05 - 0.025,\r\n          Math.random() * 0.5,\r\n          0.0625 * (i + 8),\r\n          0.025 * (Math.random() * 2 - 1),\r\n          0.025 * (Math.random() * 2 - 1),\r\n          0.2 * (Math.random() - 1),\r\n          color,\r\n          0\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    level: Room,\r\n    x: number,\r\n    y: number,\r\n    z: number,\r\n    s: number,\r\n    dx: number,\r\n    dy: number,\r\n    dz: number,\r\n    color: string,\r\n    delay?: number,\r\n    expirationTimer?: number,\r\n    targetX?: number,\r\n    targetY?: number,\r\n    targetZ?: number\r\n  ) {\r\n    super();\r\n    this.level = level;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n    this.s = s;\r\n    this.dx = dx;\r\n    this.dy = dy;\r\n    this.dz = dz;\r\n    this.color = color;\r\n    this.alpha = 1.0;\r\n    if (delay !== undefined) this.delay = delay;\r\n    this.targetX = targetX;\r\n    this.targetY = targetY;\r\n    this.targetZ = targetZ;\r\n    this.expirationTimer = 1000000;\r\n    if (expirationTimer !== undefined) this.expirationTimer = expirationTimer;\r\n  }\r\n\r\n  render = () => {\r\n    let scale = GameConstants.TILESIZE;\r\n    let scaledS = this.s * this.alpha; // using alpha for scaling, not alpha\r\n    let halfS = 0.5 * scaledS;\r\n    let oldFillStyle = Game.ctx.fillStyle;\r\n    Game.ctx.fillStyle = this.color;\r\n    Game.ctx.imageSmoothingEnabled = false;\r\n\r\n    Game.ctx.beginPath();\r\n    Game.ctx.arc(\r\n      Math.round(this.x * scale),\r\n      Math.round((this.y - this.z) * scale),\r\n      Math.round(halfS * scale),\r\n      0,\r\n      2 * Math.PI,\r\n      false\r\n    );\r\n    Game.ctx.fill();\r\n\r\n    Game.ctx.fillStyle = oldFillStyle;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (this.targetX) this.x += 0.1 * (this.targetX - this.x);\r\n    else this.x += this.dx;\r\n    if (this.targetY) this.y += 0.1 * (this.targetY - this.y);\r\n    else this.y += this.dy;\r\n    if (this.targetZ) this.z += 0.1 * (this.targetZ - this.z);\r\n    else this.z += this.dz;\r\n\r\n    this.dx *= 0.97;\r\n    this.dy *= 0.97;\r\n    if (this.z <= 0) {\r\n      this.z = 0;\r\n      this.dz *= -0.8;\r\n    }\r\n\r\n    // apply gravity\r\n    this.dz -= 0.01;\r\n\r\n    if (this.alpha < 0.2) this.alpha -= 0.007;\r\n    else this.alpha -= 0.02;\r\n    if (this.alpha <= 0.1) this.dead = true;\r\n\r\n    this.expirationTimer--;\r\n    if (this.expirationTimer <= 0) this.dead = true;\r\n\r\n    if (this.dead) return;\r\n\r\n    this.drawableY = this.y;\r\n\r\n    this.render();\r\n  };\r\n}\r\n","import { Room } from \"../room\";\r\nimport { Particle } from \"./particle\";\r\nimport { Direction, Game } from \"../game\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { Random } from \"../random\";\r\nimport { Player, PlayerDirection } from \"../player\";\r\n\r\nexport class ImageParticle extends Particle {\r\n  level: Room;\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n  s: number;\r\n  dx: number;\r\n  dy: number;\r\n  targetX: number;\r\n  targetY: number;\r\n  targetZ: number;\r\n  dz: number;\r\n  color: string;\r\n  alpha: number;\r\n  delay: number;\r\n  expirationTimer: number;\r\n  tileX: number;\r\n  tileY: number;\r\n  size: number;\r\n\r\n  static shotgun = (\r\n    level: Room,\r\n    cx: number,\r\n    cy: number,\r\n    tx: number,\r\n    ty: number,\r\n    tileX: number,\r\n    tileY: number\r\n  ) => {\r\n    for (let i = 0; i < 4; i++) {\r\n      level.particles.push(\r\n        new ImageParticle(\r\n          level,\r\n          cx,\r\n          cy,\r\n          0,\r\n          Math.random() * 0.5 + 0.3,\r\n          0,\r\n          0,\r\n          0,\r\n          tileX,\r\n          tileY,\r\n          0 //size\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  static spawnCluster = (\r\n    level: Room,\r\n    cx: number,\r\n    cy: number,\r\n    tileX: number,\r\n    tileY: number,\r\n  ) => {\r\n\r\n    for (let i = Math.floor(Math.random() * 3); i < 5; i++) {\r\n      level.particles.push(\r\n        new ImageParticle(\r\n          level,\r\n          cx + Math.random() * 0.05 - 0.025, // x\r\n          cy + Math.random() * 0.05 - 0.025, // y\r\n          Math.random() * 0.5, // z\r\n          0.0625 * (i + 8), // s\r\n          0.025 * (Math.random() * 2 - 1), //dx\r\n          0.025 * (Math.random() * 2 - 1), //dy\r\n          0.2 * (Math.random() - 1), //dz\r\n          tileX,\r\n          tileY,\r\n          [2, 1, 0, 1, 2, 2, 2][i] //size\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    level: Room,\r\n    x: number,\r\n    y: number,\r\n    z: number,\r\n    s: number,\r\n    dx: number,\r\n    dy: number,\r\n    dz: number,\r\n    tileX: number,\r\n    tileY: number,\r\n    size: number,\r\n    delay?: number,\r\n    expirationTimer?: number,\r\n    targetX?: number,\r\n    targetY?: number,\r\n    targetZ?: number\r\n  ) {\r\n    super();\r\n    this.level = level;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z; // Use provided height\r\n    this.s = s;\r\n    this.dx = dx;\r\n    this.dy = dy;\r\n    this.dz = dz;\r\n    this.tileX = tileX;\r\n    this.tileY = tileY;\r\n    this.size = size;\r\n    this.alpha = 1.0;\r\n    if (delay !== undefined) this.delay = delay;\r\n    this.targetX = targetX;\r\n    this.targetY = targetY;\r\n    this.targetZ = targetZ;\r\n    this.expirationTimer = 100; // Increased life duration\r\n    if (expirationTimer !== undefined) this.expirationTimer = expirationTimer;\r\n  }\r\n  \r\n  render = () => {\r\n    let scale = GameConstants.TILESIZE;\r\n    let yOffset = this.z * scale;\r\n    let frame = this.s > 0.5 ? 1 : 0; // Placeholder frames for large and small particles\r\n    Game.ctx.imageSmoothingEnabled = false;\r\n\r\n    let adjustedTileX = this.tileX + this.size;\r\n    Game.drawFX(\r\n      adjustedTileX,\r\n      this.tileY,\r\n      1,\r\n      1,\r\n      this.x - this.alpha / 2,\r\n      this.y - this.z - this.alpha / 2,\r\n      this.alpha,\r\n      this.alpha\r\n    );\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    Game.ctx.imageSmoothingEnabled = false;\r\n    \r\n    if (this.targetX) this.x += 0.2 * (this.targetX - this.x);\r\n    else this.x += this.dx;\r\n    if (this.targetY) this.y += 0.2 * (this.targetY - this.y);\r\n    else this.y += this.dy;\r\n    if (this.targetZ) this.z += 0.2 * (this.targetZ - this.z);\r\n    else this.z += this.dz;\r\n\r\n    this.dx *= 0.97;\r\n    this.dy *= 0.97;\r\n    if (this.z <= 0) {\r\n      this.z = 0;\r\n      this.dz *= -0.8;\r\n    }\r\n\r\n    // apply gravity\r\n    this.dz -= 0.01;\r\n    /*\r\n    if (this.alpha < 0.2) this.alpha -= ((0.01 * this.size) + 0.005);\r\n    else this.alpha -= ((0.005 * this.size) + 0.005);\r\n    if (this.alpha <= 0.6) this.dead = true;\r\n    */\r\n\r\n    this.expirationTimer--;\r\n    if (this.expirationTimer <= 0) this.dead = true;\r\n\r\n    if (this.dead) return;\r\n\r\n    this.drawableY = this.y;\r\n\r\n    this.render();\r\n  };\r\n}\r\n","import { Drawable } from \"../drawable\";\r\n\r\nexport class Particle extends Drawable {\r\n  dead: boolean;\r\n  drawTopLayer = (delta) => {};\r\n}\r\n","import { Game } from \"../game\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { Particle } from \"./particle\";\r\n\r\nexport class SlashParticle extends Particle {\r\n  x: number;\r\n  y: number;\r\n  frame: number;\r\n\r\n  constructor(x: number, y: number) {\r\n    super();\r\n    this.x = x;\r\n    this.y = y - 0.25;\r\n    this.dead = false;\r\n    this.frame = 0;\r\n  }\r\n\r\n  draw = (delta: number) => {\r\n    if (this.dead) return;\r\n\r\n    Game.drawFX(Math.round(this.frame), 13, 1, 1, this.x, this.y, 1, 1);\r\n\r\n    this.frame += 0.5 * delta;\r\n    if (this.frame > 9) this.dead = true;\r\n  };\r\n}\r\n","import { Particle } from \"./particle\";\r\nimport { Game } from \"../game\";\r\n\r\nexport class WizardTeleportParticle extends Particle {\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n  dz: number;\r\n  frame: number;\r\n  dead: boolean;\r\n\r\n  constructor(x: number, y: number) {\r\n    super();\r\n    this.x = x;\r\n    this.y = y;\r\n    this.dead = false;\r\n    this.frame = 0;\r\n    this.z = 0;\r\n    this.dz = 0.1;\r\n  }\r\n\r\n  draw = (delta: number) => {\r\n    if (this.dead) return;\r\n    Game.drawFX(Math.floor(this.frame), 3, 1, 1, this.x, this.y - this.z, 1, 1);\r\n    this.z += this.dz;\r\n    this.dz *= 0.9;\r\n    this.frame += 0.25 * delta;\r\n    if (this.frame > 6) this.dead = true;\r\n  };\r\n}\r\n","import { Input, InputEnum } from \"./input\";\r\nimport { GameConstants } from \"./gameConstants\";\r\nimport { Game, LevelState } from \"./game\";\r\nimport { Door, DoorType } from \"./tile/door\";\r\nimport { Trapdoor } from \"./tile/trapdoor\";\r\nimport { Inventory } from \"./inventory\";\r\nimport { Sound } from \"./sound\";\r\nimport { LevelConstants } from \"./levelConstants\";\r\nimport { Map } from \"./map\";\r\nimport { SlashParticle } from \"./particle/slashParticle\";\r\nimport { HealthBar } from \"./healthbar\";\r\nimport { VendingMachine } from \"./entity/vendingMachine\";\r\nimport { Drawable } from \"./drawable\";\r\nimport { Random } from \"./random\";\r\nimport { GenericParticle } from \"./particle/genericParticle\";\r\nimport { ActionState, ActionTab } from \"./actionTab\";\r\nimport { HitWarning } from \"./hitWarning\";\r\nimport { Entity } from \"./entity/entity\";\r\nimport { ZombieEnemy } from \"./entity/zombieEnemy\";\r\nimport { Item } from \"./item/item\";\r\nimport { PostProcessor } from \"./postProcess\";\r\nimport { Weapon } from \"./weapon/weapon\";\r\nimport { Room } from \"./room\";\r\nimport { ImageParticle } from \"./particle/imageParticle\";\r\n\r\nexport enum PlayerDirection {\r\n  DOWN = 0,\r\n  UP = 1,\r\n  RIGHT = 2,\r\n  LEFT = 3,\r\n}\r\n\r\nexport class Player extends Drawable {\r\n  x: number;\r\n  y: number;\r\n  w: number;\r\n  h: number;\r\n  drawX: number;\r\n  drawY: number;\r\n  frame: number;\r\n  direction: PlayerDirection;\r\n  game: Game;\r\n  levelID: number; // which room we're in (level[levelID])\r\n  flashing: boolean;\r\n  flashingFrame: number;\r\n  health: number;\r\n  maxHealth: number;\r\n  healthBar: HealthBar;\r\n  dead: boolean;\r\n  lastTickHealth: number;\r\n  inventory: Inventory;\r\n  sightRadius: number;\r\n  defaultSightRadius: number;\r\n  guiHeartFrame: number;\r\n  map: Map;\r\n  openVendingMachine: VendingMachine;\r\n  isLocalPlayer: boolean;\r\n  mapToggled: boolean;\r\n  actionTab: ActionTab;\r\n  lastHitBy: string;\r\n  turnCount: number;\r\n\r\n  constructor(game: Game, x: number, y: number, isLocalPlayer: boolean) {\r\n    super();\r\n\r\n    this.game = game;\r\n\r\n    this.levelID = 0;\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n    this.w = 1;\r\n    this.h = 1;\r\n    this.drawX = 0;\r\n    this.drawY = 0;\r\n\r\n    this.frame = 0;\r\n\r\n    this.direction = PlayerDirection.UP;\r\n\r\n    this.isLocalPlayer = isLocalPlayer;\r\n    if (isLocalPlayer) {\r\n      Input.leftSwipeListener = () => this.inputHandler(InputEnum.LEFT);\r\n      Input.rightSwipeListener = () => this.inputHandler(InputEnum.RIGHT);\r\n      Input.upSwipeListener = () => this.inputHandler(InputEnum.UP);\r\n      Input.downSwipeListener = () => this.inputHandler(InputEnum.DOWN);\r\n      Input.tapListener = () => {\r\n        if (this.inventory.isOpen) {\r\n          if (this.inventory.pointInside(Input.mouseX, Input.mouseY)) {\r\n            this.inputHandler(InputEnum.SPACE);\r\n          } else {\r\n            this.inputHandler(InputEnum.I);\r\n          }\r\n        } else this.inputHandler(InputEnum.I);\r\n      };\r\n    }\r\n    this.mapToggled = true;\r\n    this.health = 2;\r\n    this.maxHealth = 2;\r\n    this.healthBar = new HealthBar();\r\n    this.dead = false;\r\n    this.flashing = false;\r\n    this.flashingFrame = 0;\r\n    this.lastTickHealth = this.health;\r\n    this.guiHeartFrame = 0;\r\n\r\n    this.inventory = new Inventory(game, this);\r\n\r\n    this.defaultSightRadius = 6;\r\n    this.sightRadius = this.defaultSightRadius;\r\n\r\n    this.map = new Map(this.game, this);\r\n    this.actionTab = new ActionTab(this.inventory, this.game);\r\n    this.turnCount = 0;\r\n  }\r\n\r\n  inputHandler = (input: InputEnum) => {\r\n    switch (input) {\r\n      case InputEnum.I:\r\n        this.iListener();\r\n        break;\r\n      case InputEnum.Q:\r\n        this.qListener();\r\n        break;\r\n      case InputEnum.LEFT:\r\n        if (!this.ignoreDirectionInput()) this.leftListener(false);\r\n        break;\r\n      case InputEnum.RIGHT:\r\n        if (!this.ignoreDirectionInput()) this.rightListener(false);\r\n        break;\r\n      case InputEnum.UP:\r\n        if (!this.ignoreDirectionInput()) this.upListener(false);\r\n        break;\r\n      case InputEnum.DOWN:\r\n        if (!this.ignoreDirectionInput()) this.downListener(false);\r\n        break;\r\n      case InputEnum.SPACE:\r\n        this.spaceListener();\r\n        break;\r\n    }\r\n  };\r\n\r\n  tapListener = () => {\r\n    this.inventory.open();\r\n  };\r\n  iListener = () => {\r\n    this.inventory.open();\r\n  };\r\n  qListener = () => {\r\n    if (this.inventory.isOpen) {\r\n      this.inventory.drop();\r\n    }\r\n  };\r\n  ignoreDirectionInput = (): boolean => {\r\n    return (\r\n      !this.inventory.isOpen &&\r\n      (this.dead || this.game.levelState !== LevelState.IN_LEVEL)\r\n    );\r\n  };\r\n  leftListener = (isLocal: boolean): boolean => {\r\n    if (this.inventory.isOpen) {\r\n      this.inventory.left();\r\n      return true;\r\n    }\r\n    if (\r\n      !this.dead &&\r\n      (!isLocal || this.game.levelState === LevelState.IN_LEVEL)\r\n    ) {\r\n      this.left();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n  rightListener = (isLocal: boolean): boolean => {\r\n    if (this.inventory.isOpen) {\r\n      this.inventory.right();\r\n      return true;\r\n    }\r\n    if (\r\n      !this.dead &&\r\n      (!isLocal || this.game.levelState === LevelState.IN_LEVEL)\r\n    ) {\r\n      this.right();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n  upListener = (isLocal: boolean): boolean => {\r\n    if (this.inventory.isOpen) {\r\n      this.inventory.up();\r\n      return true;\r\n    }\r\n    if (\r\n      !this.dead &&\r\n      (!isLocal || this.game.levelState === LevelState.IN_LEVEL)\r\n    ) {\r\n      this.up();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n  downListener = (isLocal: boolean): boolean => {\r\n    if (this.inventory.isOpen) {\r\n      this.inventory.down();\r\n      return true;\r\n    }\r\n    if (\r\n      !this.dead &&\r\n      (!isLocal || this.game.levelState === LevelState.IN_LEVEL)\r\n    ) {\r\n      this.down();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n  spaceListener = () => {\r\n    if (this.inventory.isOpen) {\r\n      this.inventory.space();\r\n      return;\r\n    }\r\n    if (this.openVendingMachine) {\r\n      this.openVendingMachine.space();\r\n    }\r\n  };\r\n  left = () => {\r\n    this.tryMove(this.x - 1, this.y);\r\n    this.direction = PlayerDirection.LEFT;\r\n  };\r\n  right = () => {\r\n    this.tryMove(this.x + 1, this.y);\r\n    this.direction = PlayerDirection.RIGHT;\r\n  };\r\n  up = () => {\r\n    this.tryMove(this.x, this.y - 1);\r\n    this.direction = PlayerDirection.UP;\r\n  };\r\n  down = () => {\r\n    this.tryMove(this.x, this.y + 1);\r\n    this.direction = PlayerDirection.DOWN;\r\n  };\r\n\r\n  hit = (): number => {\r\n    return 1;\r\n  };\r\n\r\n  tryCollide = (other: any, newX: number, newY: number) => {\r\n    if (newX >= other.x + other.w || newX + this.w <= other.x) return false;\r\n    if (newY >= other.y + other.h || newY + this.h <= other.y) return false;\r\n    return true;\r\n  };\r\n\r\n  tryMove = (x: number, y: number) => {\r\n    let newMove = { x: x, y: y };\r\n    // TODO don't move if hit by enemy\r\n    this.game.rooms[this.levelID].catchUp();\r\n    //if (this.wouldHurt(x, y)) return;\r\n    if (this.dead) return;\r\n\r\n    for (let i = 0; i < 2; i++)\r\n      if (\r\n        this.inventory.hasWeapon() &&\r\n        !this.inventory.getWeapon().weaponMove(x, y)\r\n      ) {\r\n        //for (let h of this.game.levels[this.levelID].hitwarnings) {\r\n        //if (newMove instanceof HitWarning)\r\n        return;\r\n        //}\r\n      }\r\n\r\n    for (let e of this.game.rooms[this.levelID].entities) {\r\n      if (this.tryCollide(e, x, y)) {\r\n        if (e.pushable) {\r\n          // pushing a crate or barrel\r\n          let dx = x - this.x;\r\n          let dy = y - this.y;\r\n          let nextX = x + dx;\r\n          let nextY = y + dy;\r\n          let foundEnd = false; // end of the train of whatever we're pushing\r\n          let enemyEnd = false; // end of the train is a solid enemy (i.e. potted plant)\r\n          let pushedEnemies = [];\r\n          while (true) {\r\n            foundEnd = true;\r\n            for (const f of this.game.rooms[this.levelID].entities) {\r\n              if (f.pointIn(nextX, nextY)) {\r\n                if (!f.chainPushable) {\r\n                  enemyEnd = true;\r\n                  foundEnd = true;\r\n                  break;\r\n                }\r\n                foundEnd = false;\r\n                pushedEnemies.push(f);\r\n                break;\r\n              }\r\n            }\r\n            if (foundEnd) break;\r\n            nextX += dx * pushedEnemies[pushedEnemies.length - 1].w;\r\n            nextY += dy * pushedEnemies[pushedEnemies.length - 1].h;\r\n          }\r\n          /* if no enemies and there is a wall, no move\r\n          otherwise, push everything, killing last enemy if there is a wall */\r\n          // here, (nextX, nextY) is the position immediately after the end of the train\r\n          if (\r\n            pushedEnemies.length === 0 &&\r\n            (this.game.rooms[this.levelID].roomArray[nextX][\r\n              nextY\r\n            ].canCrushEnemy() ||\r\n              enemyEnd)\r\n          ) {\r\n            if (e.destroyable) {\r\n              e.kill();\r\n              if (this.game.rooms[this.levelID] === this.game.room) Sound.hit();\r\n              this.drawX = 0.5 * (this.x - e.x);\r\n              this.drawY = 0.5 * (this.y - e.y);\r\n              this.game.rooms[this.levelID].particles.push(\r\n                new SlashParticle(e.x, e.y)\r\n              );\r\n              this.game.rooms[this.levelID].tick(this);\r\n              this.game.shakeScreen(10 * this.drawX, 10 * this.drawY);\r\n              return;\r\n            }\r\n          } else {\r\n            if (this.game.rooms[this.levelID] === this.game.room) Sound.push();\r\n            // here pushedEnemies may still be []\r\n            for (const f of pushedEnemies) {\r\n              f.x += dx;\r\n              f.y += dy;\r\n              f.drawX = dx;\r\n              f.drawY = dy;\r\n              f.skipNextTurns = 1; // skip next turn, so they don't move while we're pushing them\r\n            }\r\n            if (\r\n              this.game.rooms[this.levelID].roomArray[nextX][\r\n                nextY\r\n              ].canCrushEnemy() ||\r\n              enemyEnd\r\n            ) {\r\n              pushedEnemies[pushedEnemies.length - 1].killNoBones();\r\n              if (this.game.rooms[this.levelID] === this.game.room) Sound.hit();\r\n            }\r\n            e.x += dx;\r\n            e.y += dy;\r\n            e.drawX = dx;\r\n            e.drawY = dy;\r\n            this.move(x, y);\r\n            this.game.rooms[this.levelID].tick(this);\r\n            return;\r\n          }\r\n        } else {\r\n          // if we're trying to hit an enemy, check if it's destroyable\r\n          if (!e.dead) {\r\n            if (e.interactable) e.interact(this);\r\n            this.actionTab.actionState = ActionState.ATTACK;\r\n            //sets the action tab state to Attack\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    let other = this.game.rooms[this.levelID].roomArray[x][y];\r\n    if (!other.isSolid()) {\r\n      this.move(x, y);\r\n      other.onCollide(this);\r\n      if (!(other instanceof Door || other instanceof Trapdoor))\r\n        this.game.rooms[this.levelID].tick(this);\r\n    } else {\r\n      if (other instanceof Door) {\r\n        this.drawX = (this.x - x) * 0.5;\r\n        this.drawY = (this.y - y) * 0.5;\r\n        if (other.canUnlock(this)) other.unlock(this);\r\n      }\r\n    }\r\n  };\r\n\r\n  wouldHurt = (x: number, y: number) => {\r\n    for (let h of this.game.rooms[this.levelID].hitwarnings) {\r\n      if (h instanceof HitWarning && h.x == x && h.y == y) return true;\r\n      else {\r\n        return false;\r\n      }\r\n    }\r\n  };\r\n\r\n  hurt = (damage: number, enemy: string) => {\r\n    if (this.game.rooms[this.levelID] === this.game.room) Sound.hurt();\r\n\r\n    if (this.inventory.getArmor() && this.inventory.getArmor().health > 0) {\r\n      this.inventory.getArmor().hurt(damage);\r\n    } else {\r\n      this.lastHitBy = enemy;\r\n      console.log(\"Last Hit by: \", enemy);\r\n      this.healthBar.hurt();\r\n      this.flashing = true;\r\n      this.health -= damage;\r\n      if (this.health <= 0) {\r\n        this.health = 0;\r\n        this.dead = true;\r\n      }\r\n    }\r\n  };\r\n\r\n  dashMove = (x: number, y: number) => {\r\n    this.x = x;\r\n    this.y = y;\r\n\r\n    for (let i of this.game.rooms[this.levelID].items) {\r\n      if (i.x === x && i.y === y) {\r\n        i.onPickup(this);\r\n      }\r\n    }\r\n\r\n    this.game.rooms[this.levelID].updateLighting();\r\n  };\r\n\r\n  doneMoving = (): boolean => {\r\n    let EPSILON = 0.01;\r\n    return Math.abs(this.drawX) < EPSILON && Math.abs(this.drawY) < EPSILON;\r\n  };\r\n\r\n  move = (x: number, y: number) => {\r\n    this.actionTab.setState(ActionState.MOVE);\r\n    if (this.game.rooms[this.levelID] === this.game.room)\r\n      Sound.playerStoneFootstep();\r\n\r\n    if (this.openVendingMachine) this.openVendingMachine.close();\r\n\r\n    this.drawX = x - this.x;\r\n    this.drawY = y - this.y;\r\n    this.x = x;\r\n    this.y = y;\r\n\r\n    for (let i of this.game.rooms[this.levelID].items) {\r\n      if (i.x === x && i.y === y) {\r\n        i.onPickup(this);\r\n      }\r\n    }\r\n\r\n    this.game.rooms[this.levelID].updateLighting();\r\n  };\r\n\r\n  moveNoSmooth = (x: number, y: number) => {\r\n    // doesn't touch smoothing\r\n    this.x = x;\r\n    this.y = y;\r\n  };\r\n\r\n  moveSnap = (x: number, y: number) => {\r\n    // no smoothing\r\n    this.x = x;\r\n    this.y = y;\r\n    this.drawX = 0;\r\n    this.drawY = 0;\r\n  };\r\n\r\n  update = () => { };\r\n\r\n  finishTick = () => {\r\n    this.turnCount += 1;\r\n    this.inventory.tick();\r\n\r\n    this.flashing = false;\r\n\r\n    let totalHealthDiff = this.health - this.lastTickHealth;\r\n    this.lastTickHealth = this.health; // update last tick health\r\n    if (totalHealthDiff < 0) {\r\n      this.flashing = true;\r\n    }\r\n    this.actionTab.actionState = ActionState.READY;\r\n    //Sets the action tab state to Wait (during enemy turn)\r\n  };\r\n\r\n  drawPlayerSprite = (delta: number) => {\r\n    this.frame += 0.1 * delta;\r\n    if (this.frame >= 4) this.frame = 0;\r\n    Game.drawMob(\r\n      1 + Math.floor(this.frame),\r\n      8 + this.direction * 2,\r\n      1,\r\n      2,\r\n      this.x - this.drawX,\r\n      this.y - 1.5 - this.drawY,\r\n      1,\r\n      2\r\n    );\r\n    if (this.inventory.getArmor() && this.inventory.getArmor().health > 0) {\r\n      // TODO draw armor\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    this.drawableY = this.y;\r\n\r\n    this.flashingFrame += (delta * 12) / GameConstants.FPS;\r\n    if (!this.dead) {\r\n      Game.drawMob(0, 0, 1, 1, this.x - this.drawX, this.y - this.drawY, 1, 1);\r\n      if (!this.flashing || Math.floor(this.flashingFrame) % 2 === 0) {\r\n        this.drawPlayerSprite(delta);\r\n      }\r\n    }\r\n  };\r\n\r\n  heartbeat = () => {\r\n    this.guiHeartFrame = 1;\r\n  };\r\n\r\n  tapHoldHandler = () => {\r\n    this.mapToggled = !this.mapToggled;\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    this.healthBar.draw(\r\n      delta,\r\n      this.health,\r\n      this.maxHealth,\r\n      this.x - this.drawX,\r\n      this.y - this.drawY,\r\n      !this.flashing || Math.floor(this.flashingFrame) % 2 === 0\r\n    );\r\n  };\r\n\r\n  drawGUI = (delta: number) => {\r\n    if (!this.dead) {\r\n      this.inventory.draw(delta);\r\n      this.actionTab.draw(delta);\r\n\r\n      if (this.guiHeartFrame > 0) this.guiHeartFrame += delta;\r\n      if (this.guiHeartFrame > 5) {\r\n        this.guiHeartFrame = 0;\r\n      }\r\n      for (let i = 0; i < this.maxHealth; i++) {\r\n        let frame = this.guiHeartFrame > 0 ? 1 : 0;\r\n        if (i >= Math.floor(this.health)) {\r\n          if (i == Math.floor(this.health) && (this.health * 2) % 2 == 1) {\r\n            // draw half heart\r\n\r\n            Game.drawFX(4, 2, 1, 1, i, LevelConstants.SCREEN_H - 1, 1, 1);\r\n          } else {\r\n            Game.drawFX(3, 2, 1, 1, i, LevelConstants.SCREEN_H - 1, 1, 1);\r\n          }\r\n        } else\r\n          Game.drawFX(frame, 2, 1, 1, i, LevelConstants.SCREEN_H - 1, 1, 1);\r\n      }\r\n      if (this.inventory.getArmor())\r\n        this.inventory.getArmor().drawGUI(delta, this.maxHealth);\r\n    } else {\r\n      Game.ctx.fillStyle = LevelConstants.LEVEL_TEXT_COLOR;\r\n      let gameOverString = \"Game Over\";\r\n      if (this.lastHitBy !== \"enemy\") {\r\n        gameOverString = `You were slain by ${this.lastHitBy}.`;\r\n      }\r\n\r\n      Game.fillText(\r\n        gameOverString,\r\n        GameConstants.WIDTH / 2 - Game.measureText(gameOverString).width / 2,\r\n        GameConstants.HEIGHT / 2 - Game.letter_height + 2\r\n      );\r\n    }\r\n    PostProcessor.draw(delta);\r\n    if (this.mapToggled === true) this.map.draw(delta);\r\n  };\r\n\r\n  updateDrawXY = (delta: number) => {\r\n    this.drawX += -0.5 * this.drawX;\r\n    this.drawY += -0.5 * this.drawY;\r\n  };\r\n}\r\n","import { Game } from \"./game\";\r\nimport { GameConstants } from \"./gameConstants\";\r\n\r\nexport class PostProcessor {\r\n  static draw = (delta: number) => {\r\n    Game.ctx.globalAlpha = 0.2;\r\n    Game.ctx.fillStyle = \"#006A6E\"\r\n    Game.ctx.fillRect(0, 0, GameConstants.WIDTH, GameConstants.HEIGHT);\r\n    Game.ctx.globalCompositeOperation = \"screen\";\r\n  };\r\n}","import { Projectile } from \"./projectile\";\r\nimport { Game } from \"../game\";\r\nimport { WizardEnemy } from \"../entity/wizardEnemy\";\r\nimport { Player } from \"../player\";\r\nimport { Entity } from \"../entity/entity\";\r\nimport { Room } from \"../room\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\nimport { Sound } from \"../sound\";\r\nimport { HitWarning } from \"../hitWarning\";\r\n\r\nexport class EnemySpawnAnimation extends Projectile {\r\n  readonly ANIM_COUNT = 3;\r\n\r\n  room: Room;\r\n  enemy: Entity;\r\n  frame: number;\r\n\r\n  constructor(room: Room, enemy: Entity, x: number, y: number) {\r\n    super(x, y);\r\n    this.room = room;\r\n    this.enemy = enemy;\r\n    this.frame = 0;\r\n  }\r\n\r\n  tick = () => {\r\n    if (this.room === this.room.game.room) Sound.enemySpawn();\r\n\r\n    let hitPlayer = false;\r\n    for (const i in this.room.game.players) {\r\n      if (\r\n        this.room.game.players[i].x === this.x &&\r\n        this.room.game.players[i].y === this.y\r\n      ) {\r\n        this.room.game.players[i].hurt(0.5, \"reaper\");\r\n        hitPlayer = true;\r\n      }\r\n    }\r\n    if (!hitPlayer) {\r\n      this.dead = true;\r\n      this.enemy.skipNextTurns = 1;\r\n      this.room.entities.push(this.enemy);\r\n      GenericParticle.spawnCluster(\r\n        this.room,\r\n        this.x + 0.5,\r\n        this.y + 0.5,\r\n        \"#ffffff\"\r\n      );\r\n      GenericParticle.spawnCluster(\r\n        this.room,\r\n        this.x + 0.5,\r\n        this.y + 0.5,\r\n        \"#ffffff\"\r\n      );\r\n    } else {\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.room.game, this.x, this.y, this.x, this.y)\r\n      );\r\n    }\r\n  };\r\n\r\n  drawTopLayer = (delta: number) => {\r\n    if (this.dead) return;\r\n\r\n    this.frame += 0.25 * delta;\r\n    if (this.frame >= 8) this.frame = 0;\r\n    for (let i = 0; i < this.ANIM_COUNT; i++) {\r\n      let offsetX = 0;\r\n      Game.drawFX(\r\n        Math.floor(this.frame),\r\n        27,\r\n        1,\r\n        1,\r\n        this.x + Math.round(offsetX) / 16.0,\r\n        this.y - 0.5,\r\n        1,\r\n        1\r\n      );\r\n    }\r\n    if (Math.floor(this.frame * 4) % 2 == 0)\r\n      this.room.particles.push(\r\n        new GenericParticle(\r\n          this.room,\r\n          this.x + 0.5 + Math.random() * 0.05 - 0.025,\r\n          this.y + Math.random() * 0.05 - 0.025,\r\n          0.25,\r\n          Math.random() * 0.5,\r\n          0.025 * (Math.random() * 1 - 0.5),\r\n          0.025 * (Math.random() * 1 - 0.5),\r\n          0.2 * (Math.random() - 1),\r\n          \"#ffffff\",\r\n          0\r\n        )\r\n      );\r\n  };\r\n}\r\n","import { Projectile } from \"./projectile\";\r\nimport { Game } from \"../game\";\r\nimport { WizardEnemy } from \"../entity/wizardEnemy\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\n\r\nexport class PlayerFireball extends Projectile {\r\n  state: number;\r\n  frame: number;\r\n  delay: number;\r\n\r\n  constructor(x: number, y: number) {\r\n    super(x, y);\r\n    this.state = 0;\r\n    this.frame = 6;\r\n  }\r\n  drawTopLayer = (delta: number) => {\r\n    if (this.dead) return;\r\n\r\n    this.frame += 0.25 * delta;\r\n\r\n    if (this.frame > 17) this.dead = true;\r\n    Game.drawFX(Math.floor(this.frame), 6, 1, 2, this.x, this.y - 1, 1, 2);\r\n  };\r\n}\r\n","import { Player } from \"../player\";\r\nimport { Entity } from \"../entity/entity\";\r\nimport { Drawable } from \"../drawable\";\r\n\r\nexport class Projectile extends Drawable {\r\n  x: number;\r\n  y: number;\r\n  dead: boolean;\r\n\r\n  constructor(x: number, y: number) {\r\n    super();\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n    this.dead = false;\r\n\r\n    this.drawableY = y;\r\n  }\r\n\r\n  hitPlayer = (player: Player) => { };\r\n  hitEnemy = (enemy: Entity) => { };\r\n\r\n  tick = () => { };\r\n  draw = (delta: number) => { };\r\n  drawTopLayer = (delta: number) => { };\r\n}\r\n","import { Projectile } from \"./projectile\";\r\nimport { Game } from \"../game\";\r\nimport { WizardEnemy } from \"../entity/wizardEnemy\";\r\nimport { Player } from \"../player\";\r\nimport { HitWarning } from \"../hitWarning\";\r\n\r\nexport class WizardFireball extends Projectile {\r\n  state: number;\r\n  frame: number;\r\n  parent: WizardEnemy;\r\n  delay: number;\r\n\r\n  constructor(parent: WizardEnemy, x: number, y: number) {\r\n    super(x, y);\r\n    this.parent = parent;\r\n    this.state = 0;\r\n    this.frame = 0;\r\n  }\r\n\r\n  tick = () => {\r\n    if (this.parent.dead) this.dead = true;\r\n    this.state++;\r\n    if (this.state === 1) {\r\n      this.parent.room.hitwarnings.push(new HitWarning(this.parent.game, this.x, this.y, this.x, this.y, false));\r\n    }\r\n    if (this.state === 2) {\r\n      this.frame = 0;\r\n      this.delay = Game.rand(0, 10, Math.random);\r\n    }\r\n  };\r\n\r\n  hitPlayer = (player: Player) => {\r\n    if (this.state === 2 && !this.dead) {\r\n      player.hurt(1, \"wizard\");\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (this.dead) return;\r\n\r\n    if (this.state === 0) {\r\n      this.frame += 0.25 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n      Game.drawFX(22 + Math.floor(this.frame), 7, 1, 1, this.x, this.y, 1, 1);\r\n    } else if (this.state === 1) {\r\n      this.frame += 0.25 * delta;\r\n      if (this.frame >= 4) this.frame = 0;\r\n      Game.drawFX(18 + Math.floor(this.frame), 7, 1, 1, this.x, this.y, 1, 1);\r\n    } else {\r\n      if (this.delay > 0) {\r\n        this.delay--;\r\n        return;\r\n      }\r\n      this.frame += 0.3 * delta;\r\n      if (this.frame > 17) this.dead = true;\r\n      Game.drawFX(Math.floor(this.frame), 6, 1, 2, this.x, this.y - 1, 1, 2);\r\n    }\r\n  };\r\n}\r\n","export class Random {\r\n  static state: number;\r\n\r\n  static setState = (state: number) => {\r\n    Random.state = state;\r\n  }\r\n\r\n  static rand = () => {\r\n    Random.state ^= (Random.state << 21);\r\n    Random.state ^= (Random.state >>> 35);\r\n    Random.state ^= (Random.state << 4);\r\n    return (Random.state >>> 0) / 4294967296;\r\n  }\r\n}\r\n\r\n// copy and paste into browser console\r\n// let state;\r\n// let rand = () => { state ^= (state << 21); state ^= (state >>> 35); state ^= (state << 4); return (state >>> 0) / 4294967296; }","import { Wall } from \"./tile/wall\";\r\nimport { LevelConstants } from \"./levelConstants\";\r\nimport { Floor } from \"./tile/floor\";\r\nimport { Game, LevelState } from \"./game\";\r\nimport { Door, DoorType } from \"./tile/door\";\r\nimport { Tile, SkinType } from \"./tile/tile\";\r\nimport { Trapdoor } from \"./tile/trapdoor\";\r\nimport { KnightEnemy } from \"./entity/knightEnemy\";\r\nimport { Entity } from \"./entity/entity\";\r\nimport { Chest } from \"./entity/chest\";\r\nimport { Item } from \"./item/item\";\r\nimport { GoldenKey } from \"./item/goldenKey\";\r\nimport { SpawnFloor } from \"./tile/spawnfloor\";\r\n//import { GoldenDoor } from \"./tile/goldenDoor\";\r\nimport { Spike } from \"./tile/spike\";\r\nimport { GameConstants } from \"./gameConstants\";\r\nimport { WizardEnemy } from \"./entity/wizardEnemy\";\r\nimport { SkullEnemy } from \"./entity/skullEnemy\";\r\nimport { Barrel } from \"./entity/barrel\";\r\nimport { Crate } from \"./entity/crate\";\r\nimport { Input } from \"./input\";\r\nimport { Armor } from \"./item/armor\";\r\nimport { Particle } from \"./particle/particle\";\r\nimport { Projectile } from \"./projectile/projectile\";\r\nimport { SpikeTrap } from \"./tile/spiketrap\";\r\nimport { FountainTile } from \"./tile/fountainTile\";\r\nimport { CoffinTile } from \"./tile/coffinTile\";\r\nimport { PottedPlant } from \"./entity/pottedPlant\";\r\nimport { InsideLevelDoor } from \"./tile/insideLevelDoor\";\r\nimport { Button } from \"./tile/button\";\r\nimport { HitWarning } from \"./hitWarning\";\r\nimport { UpLadder } from \"./tile/upLadder\";\r\nimport { DownLadder } from \"./tile/downLadder\";\r\nimport { CoalResource } from \"./entity/coalResource\";\r\nimport { GoldResource } from \"./entity/goldResource\";\r\nimport { EmeraldResource } from \"./entity/emeraldResource\";\r\nimport { Chasm } from \"./tile/chasm\";\r\nimport { Spawner } from \"./entity/spawner\";\r\nimport { VendingMachine } from \"./entity/vendingMachine\";\r\nimport { WallTorch } from \"./tile/wallTorch\";\r\nimport { LightSource } from \"./lightSource\";\r\nimport { ChargeEnemy } from \"./entity/chargeEnemy\";\r\nimport { Shotgun } from \"./weapon/shotgun\";\r\nimport { Heart } from \"./item/heart\";\r\nimport { Spear } from \"./weapon/spear\";\r\nimport { Drawable } from \"./drawable\";\r\nimport { Player } from \"./player\";\r\nimport { CrabEnemy } from \"./entity/crabEnemy\";\r\nimport { ZombieEnemy } from \"./entity/zombieEnemy\";\r\nimport { BigSkullEnemy } from \"./entity/bigSkullEnemy\";\r\nimport { Random } from \"./random\";\r\nimport { Lantern } from \"./item/lantern\";\r\nimport { DualDagger } from \"./weapon/dualdagger\";\r\nimport { Pot } from \"./entity/pot\";\r\nimport { BishopEnemy } from \"./entity/bishopEnemy\";\r\nimport { Rook } from \"./entity/rook\";\r\nimport { Rock } from \"./entity/rockResource\";\r\nimport { Mushrooms } from \"./entity/mushrooms\";\r\nimport { TurningEnemy } from \"./entity/turningEnemy\";\r\nimport { ArmoredzombieEnemy } from \"./entity/armoredzombieEnemy\";\r\nimport { Backpack } from \"./item/backpack\";\r\nimport { DoorDir } from \"./tile/door\";\r\nimport { ActionState, ActionTab } from \"./actionTab\";\r\nimport { TombStone } from \"./entity/tombStone\";\r\nimport { Pumpkin } from \"./entity/pumpkin\";\r\nimport { QueenEnemy } from \"./entity/queenEnemy\";\r\nimport { FrogEnemy } from \"./entity/frogEnemy\";\r\nimport { BigKnightEnemy } from \"./entity/bigKnightEnemy\";\r\nimport { SniperEnemy } from \"./entity/sniperEnemy\";\r\n\r\nexport enum RoomType {\r\n  START,\r\n  DUNGEON,\r\n  BOSS,\r\n  BIGDUNGEON,\r\n  TREASURE,\r\n  FOUNTAIN,\r\n  COFFIN,\r\n  GRASS,\r\n  PUZZLE,\r\n  KEYROOM,\r\n  CHESSBOARD,\r\n  MAZE,\r\n  CORRIDOR,\r\n  SPIKECORRIDOR,\r\n  UPLADDER,\r\n  DOWNLADDER,\r\n  SHOP,\r\n  BIGCAVE,\r\n  CAVE,\r\n  SPAWNER,\r\n  ROPEHOLE,\r\n  ROPECAVE,\r\n}\r\n\r\nexport enum TurnState {\r\n  playerTurn,\r\n  computerTurn,\r\n}\r\n\r\nexport class Room {\r\n  x: number;\r\n  y: number;\r\n  roomArray: Tile[][];\r\n  softVis: number[][]; // this is the one we use for drawing (includes smoothing)\r\n  vis: number[][]; // visibility ranges from 0 (fully visible) to 1 (fully black)\r\n  entities: Array<Entity>;\r\n  items: Array<Item>;\r\n  doors: Array<any>; // (Door | BottomDoor) just a reference for mapping, still access through levelArray\r\n  projectiles: Array<Projectile>;\r\n  particles: Array<Particle>;\r\n  hitwarnings: Array<HitWarning>;\r\n  game: Game;\r\n  roomX: number;\r\n  roomY: number;\r\n  width: number;\r\n  height: number;\r\n  type: RoomType;\r\n  depth: number;\r\n  mapGroup: number;\r\n  name: string;\r\n  message: string;\r\n  turn: TurnState;\r\n  playerTurnTime: number;\r\n  playerTicked: Player;\r\n  skin: SkinType;\r\n  entered: boolean; // has the player entered this level\r\n  lightSources: Array<LightSource>;\r\n  shadeColor = \"black\";\r\n  walls: Array<Wall>;\r\n  actionTab: ActionTab;\r\n\r\n  private pointInside(\r\n    x: number,\r\n    y: number,\r\n    rX: number,\r\n    rY: number,\r\n    rW: number,\r\n    rH: number\r\n  ): boolean {\r\n    if (x < rX || x >= rX + rW) return false;\r\n    if (y < rY || y >= rY + rH) return false;\r\n    return true;\r\n  }\r\n\r\n  tileInside = (tileX: number, tileY: number): boolean => {\r\n    return this.pointInside(\r\n      tileX,\r\n      tileY,\r\n      this.roomX,\r\n      this.roomY,\r\n      this.width,\r\n      this.height\r\n    );\r\n  };\r\n\r\n  private buildEmptyRoom() {\r\n    // fill in wall and floor\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        if (\r\n          this.pointInside(\r\n            x,\r\n            y,\r\n            this.roomX + 1,\r\n            this.roomY + 1,\r\n            this.width - 2,\r\n            this.height - 2\r\n          )\r\n        ) {\r\n          this.roomArray[x][y] = new Floor(this, x, y);\r\n        } else {\r\n          this.roomArray[x][y] = new Wall(this, x, y);\r\n          this.walls.push;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private addWallBlocks(rand: () => number) {\r\n    let numBlocks = Game.randTable([0, 0, 1, 1, 2, 2, 2, 2, 3], rand);\r\n    if (this.width > 8 && rand() > 0.5) numBlocks *= 4;\r\n    for (let i = 0; i < numBlocks; i++) {\r\n      let blockW = Math.min(\r\n        Game.randTable([2, 2, 2, 2, 2, 2, 3, 3, 3, 4, 5], rand),\r\n        this.width - 4\r\n      );\r\n      let blockH = Math.min(blockW + Game.rand(-2, 2, rand), this.height - 4);\r\n\r\n      let x = Game.rand(\r\n        this.roomX + 2,\r\n        this.roomX + this.width - blockW - 2,\r\n        rand\r\n      );\r\n      let y = Game.rand(\r\n        this.roomY + 2,\r\n        this.roomY + this.height - blockH - 2,\r\n        rand\r\n      );\r\n\r\n      for (let xx = x; xx < x + blockW; xx++) {\r\n        for (let yy = y; yy < y + blockH; yy++) {\r\n          let w = new Wall(this, xx, yy);\r\n          this.roomArray[xx][yy] = w;\r\n          this.walls.push(w);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private addFingers(rand: () => number) {}\r\n\r\n  private addTorches(numTorches: number, rand: () => number) {\r\n    let walls = [];\r\n    for (let xx = this.roomX + 1; xx < this.roomX + this.width - 2; xx++) {\r\n      for (let yy = this.roomY; yy < this.roomY + this.height - 1; yy++) {\r\n        if (\r\n          this.roomArray[xx][yy] instanceof Wall &&\r\n          !(this.roomArray[xx][yy + 1] instanceof Wall)\r\n        ) {\r\n          walls.push(this.roomArray[xx][yy]);\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < numTorches; i++) {\r\n      let t, x, y;\r\n      if (walls.length == 0) return;\r\n      t = walls.splice(Game.rand(0, walls.length - 1, rand), 1)[0];\r\n      x = t.x;\r\n      y = t.y;\r\n      this.roomArray[x][y] = new WallTorch(this, x, y);\r\n    }\r\n  }\r\n\r\n  private addChasms(rand: () => number) {\r\n    // add chasms\r\n    let w = Game.rand(2, 4, rand);\r\n    let h = Game.rand(2, 4, rand);\r\n    let xmin = this.roomX + 2;\r\n    let xmax = this.roomX + this.width - w - 2;\r\n    let ymin = this.roomY + 2;\r\n    let ymax = this.roomY + this.height - h - 2;\r\n    if (xmax < xmin || ymax < ymin) return;\r\n    let x = Game.rand(xmin, xmax, rand);\r\n    let y = Game.rand(ymin, ymax, rand);\r\n\r\n    for (let xx = x - 1; xx < x + w + 1; xx++) {\r\n      for (let yy = y - 1; yy < y + h + 1; yy++) {\r\n        // add a floor border\r\n        if (xx === x - 1 || xx === x + w || yy === y - 1 || yy === y + h) {\r\n          if (!(this.roomArray[xx][yy] instanceof SpawnFloor))\r\n            this.roomArray[xx][yy] = new Floor(this, xx, yy);\r\n        } else\r\n          this.roomArray[xx][yy] = new Chasm(\r\n            this,\r\n            xx,\r\n            yy,\r\n            xx === x,\r\n            xx === x + w - 1,\r\n            yy === y,\r\n            yy === y + h - 1\r\n          );\r\n      }\r\n    }\r\n  }\r\n\r\n  private addChests(numChests: number, rand: () => number) {\r\n    // add chests\r\n    let tiles = this.getEmptyTiles();\r\n    for (let i = 0; i < numChests; i++) {\r\n      let t, x, y;\r\n      if (tiles.length == 0) return;\r\n      t = tiles.splice(Game.rand(0, tiles.length - 1, rand), 1)[0];\r\n      x = t.x;\r\n      y = t.y;\r\n      this.entities.push(new Chest(this, this.game, x, y, rand));\r\n    }\r\n  }\r\n\r\n  private addSpikeTraps(numSpikes: number, rand: () => number) {\r\n    // add spikes\r\n    let tiles = this.getEmptyTiles();\r\n    for (let i = 0; i < numSpikes; i++) {\r\n      let t = tiles.splice(Game.rand(0, tiles.length - 1, rand), 1)[0];\r\n      if (tiles.length == 0) return;\r\n      let x = t.x;\r\n      let y = t.y;\r\n\r\n      this.roomArray[x][y] = new SpikeTrap(this, x, y);\r\n    }\r\n  }\r\n\r\n  private addSpikes(numSpikes: number, rand: () => number) {\r\n    // add spikes\r\n    let tiles = this.getEmptyTiles();\r\n    for (let i = 0; i < numSpikes; i++) {\r\n      let t = tiles.splice(Game.rand(0, tiles.length - 1, rand), 1)[0];\r\n      if (tiles.length == 0) return;\r\n      let x = t.x;\r\n      let y = t.y;\r\n\r\n      this.roomArray[x][y] = new Spike(this, x, y);\r\n    }\r\n  }\r\n\r\n  generateLevelTable = (rand: () => number) => {\r\n    let table: number[] = [];\r\n    let e: number;\r\n    for (let i = 0; i <= Game.rand(2, 5, rand); i++) {\r\n      e = Game.rand(1, 2, rand);\r\n      table.push(e);\r\n    }\r\n    return table;\r\n  };\r\n\r\n  // Function to add enemies to the room\r\n  private addEnemies(numEnemies: number, rand: () => number) {\r\n    // Get all empty tiles in the room\r\n    let tiles = this.getEmptyTiles();\r\n    // Loop through the number of enemies to be added\r\n    for (let i = 0; i < numEnemies; i++) {\r\n      // Randomly select a tile and remove it from the list\r\n      let t = tiles.splice(Game.rand(0, tiles.length - 1, rand), 1)[0];\r\n      // If there are no more tiles, return\r\n      if (tiles.length == 0) return;\r\n      // Get the x and y coordinates of the selected tile\r\n      let x = t.x;\r\n      let y = t.y;\r\n      // Define the enemy tables for each depth level\r\n\r\n      let tables = {\r\n        0: [1, 2, 3 /*, 5, 6, 7, 8, 9, 10, 11, 12, 13*/], //this.generateLevelTable(rand),\r\n        1: [3, 4, 5, 9, 7],\r\n        2: [3, 4, 5, 7, 8, 9, 12],\r\n        3: [1, 2, 3, 5, 6, 7, 8, 9, 10],\r\n        4: [4, 5, 6, 7, 8, 9, 10, 11, 12],\r\n        5: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\r\n        6: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\r\n        7: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\r\n      };\r\n      // Define the maximum depth level\r\n      let max_depth_table = 7;\r\n      // Get the current depth level, capped at the maximum\r\n      let d = Math.min(this.depth, max_depth_table);\r\n      // If there is a table for the current depth level\r\n      if (tables[d] && tables[d].length > 0) {\r\n        // Function to add an enemy to the room\r\n        let addEnemy = (enemy: Entity): boolean => {\r\n          // Check if the enemy overlaps with any other enemies\r\n          for (let xx = 0; xx < enemy.w; xx++) {\r\n            for (let yy = 0; yy < enemy.h; yy++) {\r\n              if (\r\n                !this.getEmptyTiles().some(\r\n                  (tt) => tt.x === x + xx && tt.y === y + yy\r\n                )\r\n              ) {\r\n                // If it does, increment the enemy count and return false\r\n                numEnemies++;\r\n                return false;\r\n              }\r\n            }\r\n          }\r\n          // If it doesn't, add the enemy to the room and return true\r\n          this.entities.push(enemy);\r\n          return true;\r\n        };\r\n\r\n        // Randomly select an enemy type from the table\r\n        let type = Game.randTable(tables[d], rand);\r\n        // Add the selected enemy type to the room\r\n        switch (type) {\r\n          case 1:\r\n            addEnemy(new CrabEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 2:\r\n            addEnemy(new FrogEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 3:\r\n            addEnemy(new ZombieEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 4:\r\n            addEnemy(new SkullEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 5:\r\n            addEnemy(new WizardEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 6:\r\n            addEnemy(new ChargeEnemy(this, this.game, x, y));\r\n            break;\r\n          case 7:\r\n            addEnemy(new Spawner(this, this.game, x, y, rand));\r\n            break;\r\n          case 8:\r\n            addEnemy(new BishopEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 9:\r\n            addEnemy(new ArmoredzombieEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 10:\r\n            if (addEnemy(new BigSkullEnemy(this, this.game, x, y, rand))) {\r\n              // clear out some space\r\n              for (let xx = 0; xx < 2; xx++) {\r\n                for (let yy = 0; yy < 2; yy++) {\r\n                  this.roomArray[x + xx][y + yy] = new Floor(\r\n                    this,\r\n                    x + xx,\r\n                    y + yy\r\n                  ); // remove any walls\r\n                }\r\n              }\r\n            }\r\n            break;\r\n          case 11:\r\n            addEnemy(new QueenEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 12:\r\n            addEnemy(new KnightEnemy(this, this.game, x, y, rand));\r\n            break;\r\n          case 13:\r\n            if (addEnemy(new BigKnightEnemy(this, this.game, x, y, rand))) {\r\n              // clear out some space\r\n              for (let xx = 0; xx < 2; xx++) {\r\n                for (let yy = 0; yy < 2; yy++) {\r\n                  this.roomArray[x + xx][y + yy] = new Floor(\r\n                    this,\r\n                    x + xx,\r\n                    y + yy\r\n                  ); // remove any walls\r\n                }\r\n              }\r\n            }\r\n            break;\r\n          case 14:\r\n            addEnemy(new SniperEnemy(this, this.game, x, y, rand));\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private addObstacles(numObstacles: number, rand: () => number) {\r\n    // add crates/barrels\r\n    let tiles = this.getEmptyTiles();\r\n    for (let i = 0; i < numObstacles; i++) {\r\n      let t = tiles.splice(Game.rand(0, tiles.length - 1, rand), 1)[0];\r\n      if (tiles.length == 0) return;\r\n      let x = t.x;\r\n      let y = t.y;\r\n      switch (\r\n        Game.randTable(\r\n          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4],\r\n          rand\r\n        )\r\n      ) {\r\n        case 1:\r\n          this.entities.push(new Crate(this, this.game, x, y));\r\n          break;\r\n        case 2:\r\n          this.entities.push(new Barrel(this, this.game, x, y));\r\n          break;\r\n        case 3:\r\n          this.entities.push(new TombStone(this, this.game, x, y, 1, rand));\r\n          break;\r\n        case 4:\r\n          this.entities.push(new TombStone(this, this.game, x, y, 0, rand));\r\n          break;\r\n        //case 5:\r\n        //this.enemies.push(new TombStone(this, this.game, x, y));\r\n        //break;\r\n      }\r\n    }\r\n  }\r\n\r\n  private addPlants(numPlants: number, rand: () => number) {\r\n    let tiles = this.getEmptyTiles();\r\n    for (let i = 0; i < numPlants; i++) {\r\n      let t = tiles.splice(Game.rand(0, tiles.length - 1, rand), 1)[0];\r\n      if (tiles.length == 0) return;\r\n      let x = t.x;\r\n      let y = t.y;\r\n\r\n      let r = rand();\r\n      if (r <= 0.45)\r\n        this.entities.push(new PottedPlant(this, this.game, x, y, Random.rand));\r\n      else if (r <= 0.65) this.entities.push(new Pot(this, this.game, x, y));\r\n      else if (r <= 0.75) this.entities.push(new Rock(this, this.game, x, y));\r\n      else if (r <= 0.97)\r\n        this.entities.push(new Mushrooms(this, this.game, x, y));\r\n      else this.entities.push(new Chest(this, this.game, x, y, rand));\r\n    }\r\n  }\r\n\r\n  private addResources(numResources: number, rand: () => number) {\r\n    let tiles = this.getEmptyTiles();\r\n    for (let i = 0; i < numResources; i++) {\r\n      let t = tiles.splice(Game.rand(0, tiles.length - 1, rand), 1)[0];\r\n      if (tiles.length == 0) return;\r\n      let x = t.x;\r\n      let y = t.y;\r\n\r\n      let r = rand();\r\n      if (r <= (10 - this.depth ** 3) / 10)\r\n        this.entities.push(new CoalResource(this, this.game, x, y));\r\n      else if (r <= (10 - (this.depth - 2) ** 3) / 10)\r\n        this.entities.push(new GoldResource(this, this.game, x, y));\r\n      else this.entities.push(new EmeraldResource(this, this.game, x, y));\r\n    }\r\n  }\r\n\r\n  private addVendingMachine(rand: () => number) {\r\n    let t = this.getEmptyTiles().sort(() => 0.5 - Random.rand())[0];\r\n    let x = t.x;\r\n    let y = t.y;\r\n    let type = Game.randTable([1, 1, 1, 1, 1, 1, 1, 2, 3, 4, 5, 6], rand);\r\n    switch (type) {\r\n      case 1:\r\n        this.entities.push(\r\n          new VendingMachine(this, this.game, x, y, new Heart(this, 0, 0), rand)\r\n        );\r\n        break;\r\n      case 2:\r\n        this.entities.push(\r\n          new VendingMachine(\r\n            this,\r\n            this.game,\r\n            x,\r\n            y,\r\n            new Lantern(this, 0, 0),\r\n            rand\r\n          )\r\n        );\r\n        break;\r\n      case 3:\r\n        this.entities.push(\r\n          new VendingMachine(this, this.game, x, y, new Armor(this, 0, 0), rand)\r\n        );\r\n        break;\r\n      case 4:\r\n        this.entities.push(\r\n          new VendingMachine(\r\n            this,\r\n            this.game,\r\n            x,\r\n            y,\r\n            new DualDagger(this, 0, 0),\r\n            rand\r\n          )\r\n        );\r\n        break;\r\n      case 5:\r\n        this.entities.push(\r\n          new VendingMachine(this, this.game, x, y, new Spear(this, 0, 0), rand)\r\n        );\r\n        break;\r\n      case 6:\r\n        this.entities.push(\r\n          new VendingMachine(\r\n            this,\r\n            this.game,\r\n            x,\r\n            y,\r\n            new Shotgun(this, 0, 0),\r\n            rand\r\n          )\r\n        );\r\n        break;\r\n    }\r\n  }\r\n\r\n  populateEmpty = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n  };\r\n\r\n  populateDungeon = (rand: () => number) => {\r\n    let factor = Game.rand(1, 36, rand);\r\n\r\n    if (factor < 30) this.addWallBlocks(rand);\r\n    if (factor < 26) this.addFingers(rand);\r\n    if (factor % 4 === 0) this.addChasms(rand);\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n\r\n    if (factor > 15)\r\n      this.addSpikeTraps(Game.randTable([0, 0, 0, 1, 1, 2, 5], rand), rand);\r\n    let numEmptyTiles = this.getEmptyTiles().length;\r\n    let numTotalObstacles = Math.floor(numEmptyTiles * 0.35 * rand());\r\n    let numPlants = Math.ceil(numTotalObstacles * rand());\r\n    let numObstacles = numTotalObstacles - numPlants;\r\n    this.addPlants(numPlants, rand);\r\n    this.addObstacles(numObstacles, rand);\r\n    let numEnemies = Math.ceil(\r\n      (numEmptyTiles - numTotalObstacles) *\r\n        Math.min(this.depth * 0.1 + 0.1, 0.35) //this.depth * 0.01 is starting value\r\n    );\r\n    this.addEnemies(numEnemies, rand);\r\n\r\n    if (factor <= 6) this.addVendingMachine(rand);\r\n  };\r\n  populateBoss = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n\r\n    this.addSpikeTraps(Game.randTable([0, 0, 0, 1, 1, 2, 5], rand), rand);\r\n    let numEmptyTiles = this.getEmptyTiles().length;\r\n    let numTotalObstacles = Math.floor(numEmptyTiles * 0.2);\r\n    let numPlants = Math.floor(numTotalObstacles * rand());\r\n    let numObstacles = numTotalObstacles - numPlants;\r\n    this.addPlants(numPlants, rand);\r\n    this.addObstacles(numObstacles, rand);\r\n    let numEnemies = Math.ceil(\r\n      (numEmptyTiles - numTotalObstacles) *\r\n        Math.min(this.depth * 0.05 + 0.2, 0.5)\r\n    );\r\n    this.addEnemies(numEnemies, rand);\r\n  };\r\n  populateBigDungeon = (rand: () => number) => {\r\n    if (Game.rand(1, 4, rand) === 1) this.addChasms(rand);\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n\r\n    if (Game.rand(1, 4, rand) === 1)\r\n      this.addPlants(\r\n        Game.randTable([0, 0, 0, 0, 0, 1, 1, 2, 2, 3, 4], rand),\r\n        rand\r\n      );\r\n    if (Game.rand(1, 3, rand) === 1)\r\n      this.addSpikeTraps(Game.randTable([3, 5, 7, 8], rand), rand);\r\n    let numEmptyTiles = this.getEmptyTiles().length;\r\n    let numEnemies = Math.ceil(\r\n      numEmptyTiles *\r\n        (this.depth * 0.5 + 0.5) *\r\n        Game.randTable([0.05, 0.05, 0.06, 0.07, 0.1], rand)\r\n    );\r\n    this.addEnemies(numEnemies, rand);\r\n    if (numEnemies > 0)\r\n      this.addObstacles(numEnemies / Game.rand(1, 2, rand), rand);\r\n    else this.addObstacles(Game.randTable([0, 0, 1, 1, 2, 3, 5], rand), rand);\r\n  };\r\n  populateSpawner = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n\r\n    this.entities.push(\r\n      new Spawner(\r\n        this,\r\n        this.game,\r\n        Math.floor(this.roomX + this.width / 2),\r\n        Math.floor(this.roomY + this.height / 2),\r\n        rand\r\n      )\r\n    );\r\n  };\r\n  populateKeyRoom = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n\r\n    this.items.push(\r\n      new GoldenKey(\r\n        this,\r\n        Math.floor(this.roomX + this.width / 2),\r\n        Math.floor(this.roomY + this.height / 2)\r\n      )\r\n    );\r\n  };\r\n  populateFountain = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n\r\n    let centerX = Math.floor(this.roomX + this.width / 2);\r\n    let centerY = Math.floor(this.roomY + this.height / 2);\r\n    for (let x = centerX - 1; x <= centerX + 1; x++) {\r\n      for (let y = centerY - 1; y <= centerY + 1; y++) {\r\n        this.roomArray[x][y] = new FountainTile(\r\n          this,\r\n          x,\r\n          y,\r\n          x - (centerX - 1),\r\n          y - (centerY - 1)\r\n        );\r\n      }\r\n    }\r\n\r\n    this.addPlants(Game.randTable([0, 0, 1, 2], rand), rand);\r\n  };\r\n  placeCoffin = (x: number, y: number) => {\r\n    this.roomArray[x][y] = new CoffinTile(this, x, y, 0);\r\n    this.roomArray[x][y + 1] = new CoffinTile(this, x, y + 1, 1);\r\n  };\r\n  populateCoffin = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n\r\n    this.placeCoffin(\r\n      Math.floor(this.roomX + this.width / 2 - 2),\r\n      Math.floor(this.roomY + this.height / 2)\r\n    );\r\n    this.placeCoffin(\r\n      Math.floor(this.roomX + this.width / 2),\r\n      Math.floor(this.roomY + this.height / 2)\r\n    );\r\n    this.placeCoffin(\r\n      Math.floor(this.roomX + this.width / 2) + 2,\r\n      Math.floor(this.roomY + this.height / 2)\r\n    );\r\n  };\r\n  populatePuzzle = (rand: () => number) => {\r\n    let d;\r\n\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      let y = this.roomY + Math.floor(this.height / 2);\r\n      if (x === this.roomX + Math.floor(this.width / 2)) {\r\n        d = new InsideLevelDoor(this, this.game, x, y + 1);\r\n        this.roomArray[x][y + 1] = d;\r\n      } else {\r\n        this.roomArray[x][y] = new Wall(this, x, y);\r\n      }\r\n    }\r\n\r\n    let x = Game.rand(this.roomX, this.roomX + this.width - 1, rand);\r\n    let y = Game.rand(\r\n      this.roomY + Math.floor(this.height / 2) + 3,\r\n      this.roomY + this.height - 2,\r\n      rand\r\n    );\r\n\r\n    this.roomArray[x][y] = new Button(this, x, y, d);\r\n\r\n    let crateTiles = this.getEmptyTiles().filter(\r\n      (t) =>\r\n        t.x >= this.roomX + 1 &&\r\n        t.x <= this.roomX + this.width - 2 &&\r\n        t.y >= this.roomY + Math.floor(this.height / 2) + 3 &&\r\n        t.y <= this.roomY + this.height - 2\r\n    );\r\n    let numCrates = Game.randTable([1, 2, 2, 3, 4], rand);\r\n\r\n    for (let i = 0; i < numCrates; i++) {\r\n      let t = crateTiles.splice(\r\n        Game.rand(0, crateTiles.length - 1, rand),\r\n        1\r\n      )[0];\r\n\r\n      this.entities.push(new Crate(this, this.game, t.x, t.y));\r\n    }\r\n    this.addPlants(\r\n      Game.randTable([0, 0, 0, 0, 0, 1, 1, 2, 2, 3, 4], rand),\r\n      rand\r\n    );\r\n  };\r\n  populateSpikeCorridor = (rand: () => number) => {\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      for (let y = this.roomY + 1; y < this.roomY + this.height - 1; y++) {\r\n        this.roomArray[x][y] = new SpikeTrap(this, x, y, Game.rand(0, 3, rand));\r\n      }\r\n    }\r\n\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n  };\r\n  populateTreasure = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 1, 1, 2, 2, 3, 4], rand), rand);\r\n\r\n    this.addChests(Game.randTable([4, 4, 5, 5, 5, 6, 8], rand), rand);\r\n    this.addPlants(Game.randTable([0, 1, 2, 4, 5, 6], rand), rand);\r\n  };\r\n  populateChessboard = (rand: () => number) => {};\r\n  populateCave = (rand: () => number) => {\r\n    let factor = Game.rand(1, 36, rand);\r\n\r\n    this.addWallBlocks(rand);\r\n\r\n    if (factor > 15)\r\n      this.addSpikeTraps(Game.randTable([0, 0, 0, 1, 1, 2, 5], rand), rand);\r\n    let numEmptyTiles = this.getEmptyTiles().length;\r\n    let numEnemies = Math.ceil(\r\n      numEmptyTiles * Game.randTable([0.25, 0.3, 0.35], rand)\r\n    );\r\n    this.addEnemies(numEnemies, rand);\r\n    this.addResources(\r\n      (numEmptyTiles - numEnemies) * Game.randTable([0.5, 0.6, 0.7, 0.8], rand),\r\n      rand\r\n    );\r\n  };\r\n  populateUpLadder = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2], rand), rand);\r\n\r\n    let cX = Math.floor(this.roomX + this.width / 2);\r\n    let cY = Math.floor(this.roomY + this.height / 2);\r\n  };\r\n  populateDownLadder = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2], rand), rand);\r\n\r\n    let cX = Math.floor(this.roomX + this.width / 2);\r\n    let cY = Math.floor(this.roomY + this.height / 2);\r\n    this.roomArray[cX][cY] = new DownLadder(this, this.game, cX, cY);\r\n  };\r\n  populateRopeHole = (rand: () => number) => {\r\n    this.addTorches(Game.randTable([0, 0, 0, 1, 1, 2, 2], rand), rand);\r\n\r\n    let cX = Math.floor(this.roomX + this.width / 2);\r\n    let cY = Math.floor(this.roomY + this.height / 2);\r\n    let d = new DownLadder(this, this.game, cX, cY);\r\n    d.isRope = true;\r\n    this.roomArray[cX][cY] = d;\r\n  };\r\n  populateRopeCave = (rand: () => number) => {\r\n    let cX = Math.floor(this.roomX + this.width / 2);\r\n    let cY = Math.floor(this.roomY + this.height / 2);\r\n    let upLadder = new UpLadder(this, this.game, cX, cY);\r\n    upLadder.isRope = true;\r\n    this.roomArray[cX][cY] = upLadder;\r\n  };\r\n  populateShop = (rand: () => number) => {\r\n    this.addTorches(2, rand);\r\n\r\n    let cX = Math.floor(this.roomX + this.width / 2);\r\n    let cY = Math.floor(this.roomY + this.height / 2);\r\n    this.entities.push(\r\n      new VendingMachine(\r\n        this,\r\n        this.game,\r\n        cX - 2,\r\n        cY - 1,\r\n        new Shotgun(this, 0, 0),\r\n        rand\r\n      )\r\n    );\r\n    this.entities.push(\r\n      new VendingMachine(\r\n        this,\r\n        this.game,\r\n        cX + 2,\r\n        cY - 1,\r\n        new Heart(this, 0, 0),\r\n        rand\r\n      )\r\n    );\r\n    this.entities.push(\r\n      new VendingMachine(\r\n        this,\r\n        this.game,\r\n        cX - 2,\r\n        cY + 2,\r\n        new Armor(this, 0, 0),\r\n        rand\r\n      )\r\n    );\r\n    this.entities.push(\r\n      new VendingMachine(\r\n        this,\r\n        this.game,\r\n        cX + 2,\r\n        cY + 2,\r\n        new Spear(this, 0, 0),\r\n        rand\r\n      )\r\n    );\r\n  };\r\n\r\n  populate = (rand: () => number) => {\r\n    this.name = \"\";\r\n    switch (this.type) {\r\n      case RoomType.START:\r\n        this.populateEmpty(rand);\r\n        this.name = \"FLOOR \" + -this.depth;\r\n        break;\r\n      case RoomType.BOSS:\r\n        this.populateBoss(rand);\r\n        this.name = \"BOSS\";\r\n        break;\r\n      case RoomType.DUNGEON:\r\n        this.populateDungeon(rand);\r\n        break;\r\n      case RoomType.BIGDUNGEON:\r\n        this.populateBigDungeon(rand);\r\n        break;\r\n      case RoomType.FOUNTAIN:\r\n        this.populateFountain(rand);\r\n        break;\r\n      case RoomType.COFFIN:\r\n        this.populateCoffin(rand);\r\n        break;\r\n      case RoomType.PUZZLE:\r\n        this.populatePuzzle(rand);\r\n        break;\r\n      case RoomType.SPIKECORRIDOR:\r\n        this.populateSpikeCorridor(rand);\r\n        break;\r\n      case RoomType.TREASURE:\r\n        this.populateTreasure(rand);\r\n        break;\r\n      case RoomType.CHESSBOARD: // TODO\r\n        this.populateChessboard(rand);\r\n        break;\r\n      case RoomType.KEYROOM:\r\n        this.populateKeyRoom(rand);\r\n        break;\r\n      case RoomType.GRASS:\r\n        this.populateDungeon(rand);\r\n        break;\r\n      case RoomType.BIGCAVE:\r\n        this.populateCave(rand);\r\n      case RoomType.CAVE:\r\n        this.populateCave(rand);\r\n        break;\r\n      case RoomType.UPLADDER:\r\n        this.populateUpLadder(rand);\r\n        this.name = \"FLOOR \" + -this.depth;\r\n        break;\r\n      case RoomType.DOWNLADDER:\r\n        this.populateDownLadder(rand);\r\n        this.name = \"FLOOR \" + -this.depth;\r\n        break;\r\n      case RoomType.ROPEHOLE:\r\n        this.populateRopeHole(rand);\r\n        break;\r\n      case RoomType.ROPECAVE:\r\n        this.populateRopeCave(rand);\r\n        break;\r\n      case RoomType.SHOP:\r\n        /* shop rates:\r\n         * 10 coal for an gold coin\r\n         * 1 gold for 10 coins\r\n         * 1 emerald for 100 coins\r\n         *\r\n         * shop items:\r\n         * 1 empty heart   4 ^ (maxHealth + maxHealth ^ 1.05 ^ maxHealth - 2.05) coins\r\n         * fill all hearts  1 coin\r\n         * better torch    5 ^ (torchLevel + 1.05 ^ torchLevel - 2.05) coins\r\n         * weapons\r\n         */\r\n\r\n        this.populateShop(rand);\r\n        break;\r\n      case RoomType.SPAWNER:\r\n        this.populateSpawner(rand);\r\n        break;\r\n    }\r\n    this.message = this.name;\r\n  };\r\n\r\n  constructor(\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    w: number,\r\n    h: number,\r\n    type: RoomType,\r\n    depth: number,\r\n    mapGroup: number,\r\n    rand = Random.rand\r\n  ) {\r\n    this.game = game;\r\n    this.roomX = x; //Math.floor(- this.width / 2);\r\n    this.roomY = y; //Math.floor(- this.height / 2);\r\n    this.width = w;\r\n    this.height = h;\r\n    this.type = type;\r\n    this.depth = depth;\r\n    this.mapGroup = mapGroup;\r\n\r\n    this.entered = false;\r\n    this.turn = TurnState.playerTurn;\r\n    this.playerTurnTime = Date.now();\r\n\r\n    this.items = Array<Item>();\r\n    this.projectiles = Array<Projectile>();\r\n    this.hitwarnings = Array<HitWarning>();\r\n    this.particles = Array<Particle>();\r\n    this.doors = Array<Door>();\r\n    this.entities = Array<Entity>();\r\n    this.lightSources = Array<LightSource>();\r\n    this.walls = Array<Wall>();\r\n\r\n    this.roomArray = [];\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      this.roomArray[x] = [];\r\n    }\r\n    this.vis = [];\r\n    this.softVis = [];\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      this.vis[x] = [];\r\n      this.softVis[x] = [];\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        this.vis[x][y] = 1;\r\n        this.softVis[x][y] = 1;\r\n      }\r\n    }\r\n\r\n    this.skin = SkinType.DUNGEON;\r\n    if (this.type === RoomType.ROPECAVE || this.type === RoomType.CAVE)\r\n      this.skin = SkinType.CAVE;\r\n    this.buildEmptyRoom();\r\n  }\r\n\r\n  addDoor = (x: number, y: number) => {\r\n    let d;\r\n    let t = DoorType.DOOR;\r\n    if (this.type === RoomType.BOSS) t = DoorType.GUARDEDDOOR;\r\n    if (this.type === RoomType.KEYROOM) t = DoorType.LOCKEDDOOR;\r\n    if (x === this.roomX) {\r\n      d = new Door(this, this.game, x, y, 1, t);\r\n      this.roomArray[x + 1][y] = new SpawnFloor(this, x + 1, y);\r\n    } else if (x === this.roomX + this.width - 1) {\r\n      d = new Door(this, this.game, x, y, 3, t);\r\n      this.roomArray[x - 1][y] = new SpawnFloor(this, x - 1, y);\r\n    } else if (y === this.roomY) {\r\n      d = new Door(this, this.game, x, y, 0, t);\r\n      this.roomArray[x][y + 1] = new SpawnFloor(this, x, y + 1);\r\n    } else if (y === this.roomY + this.height - 1) {\r\n      d = new Door(this, this.game, x, y, 2, t);\r\n      this.roomArray[x][y - 1] = new SpawnFloor(this, x, y - 1);\r\n    }\r\n\r\n    this.doors.push(d);\r\n    if (this.roomArray[d.x] == undefined) {\r\n      console.log(\r\n        \"UNDEFINED at \" +\r\n          d.x +\r\n          \" levelArray.length was \" +\r\n          this.roomArray.length\r\n      );\r\n    }\r\n    this.roomArray[d.x][d.y] = d;\r\n\r\n    return d;\r\n  };\r\n\r\n  exitLevel = () => {\r\n    this.particles.splice(0, this.particles.length);\r\n  };\r\n\r\n  enterLevel = (player: Player) => {\r\n    player.moveSnap(\r\n      this.roomX + Math.floor(this.width / 2),\r\n      this.roomY + Math.floor(this.height / 2)\r\n    );\r\n\r\n    this.clearDeadStuff();\r\n    this.updateLighting();\r\n    this.entered = true;\r\n    this.message = this.name;\r\n  };\r\n\r\n  enterLevelThroughDoor = (player: Player, door: any, side?: number) => {\r\n    if (door instanceof Door && door.doorDir === DoorDir.North) {\r\n      //if top door\r\n      (door as Door).opened = true;\r\n      player.moveNoSmooth(door.x, door.y + 1);\r\n    } else if (door instanceof Door && door.doorDir === DoorDir.South) {\r\n      //if bottom door\r\n      player.moveNoSmooth(door.x, door.y - 1);\r\n    } else if (\r\n      door instanceof Door &&\r\n      [DoorDir.East, DoorDir.West].includes(door.doorDir)\r\n    ) {\r\n      // if side door\r\n      player.moveNoSmooth(door.x + side, door.y);\r\n    }\r\n\r\n    this.clearDeadStuff();\r\n    this.updateLighting();\r\n    this.entered = true;\r\n    this.message = this.name;\r\n  };\r\n\r\n  enterLevelThroughLadder = (player: Player, ladder: any) => {\r\n    player.moveSnap(ladder.x, ladder.y + 1);\r\n\r\n    this.clearDeadStuff();\r\n    this.updateLighting();\r\n    this.entered = true;\r\n    this.message = this.name;\r\n  };\r\n\r\n  getEmptyTiles = (): Tile[] => {\r\n    let returnVal: Tile[] = [];\r\n    for (let x = this.roomX + 1; x < this.roomX + this.width - 1; x++) {\r\n      for (let y = this.roomY + 1; y < this.roomY + this.height - 1; y++) {\r\n        if (\r\n          !this.roomArray[x][y].isSolid() &&\r\n          !(this.roomArray[x][y] instanceof SpikeTrap) &&\r\n          !(this.roomArray[x][y] instanceof SpawnFloor)\r\n        ) {\r\n          returnVal.push(this.roomArray[x][y]);\r\n        }\r\n      }\r\n    }\r\n    for (const e of this.entities) {\r\n      returnVal = returnVal.filter((t) => !e.pointIn(t.x, t.y));\r\n    }\r\n    return returnVal;\r\n  };\r\n\r\n  getTile = (x: number, y: number) => {\r\n    if (this.roomArray[x]) return this.roomArray[x][y];\r\n    else return undefined;\r\n  };\r\n\r\n  fadeLighting = () => {\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        if (Math.abs(this.softVis[x][y] - this.vis[x][y]) >= 0.02) {\r\n          if (this.softVis[x][y] < this.vis[x][y]) this.softVis[x][y] += 0.02;\r\n          else if (this.softVis[x][y] > this.vis[x][y])\r\n            this.softVis[x][y] -= 0.02;\r\n        }\r\n        //if (this.softVis[x][y] < 0.05) this.softVis[x][y] = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  updateLighting = () => {\r\n    let oldVis = [];\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      oldVis[x] = [];\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        oldVis[x][y] = this.vis[x][y];\r\n        this.vis[x][y] = 1;\r\n        //if (this.visibilityArray[x][y] > LevelConstants.MIN_VISIBILITY)\r\n        //  this.visibilityArray[x][y] = 0;\r\n      }\r\n    }\r\n    for (const p in this.game.players) {\r\n      if (this === this.game.rooms[this.game.players[p].levelID]) {\r\n        for (let i = 0; i < 360; i += LevelConstants.LIGHTING_ANGLE_STEP) {\r\n          this.castShadowsAtAngle(\r\n            i,\r\n            this.game.players[p].x + 0.5,\r\n            this.game.players[p].y + 0.5,\r\n            this.game.players[p].sightRadius - this.depth\r\n          );\r\n        }\r\n      }\r\n    }\r\n    for (const l of this.lightSources) {\r\n      for (let i = 0; i < 360; i += LevelConstants.LIGHTING_ANGLE_STEP) {\r\n        this.castShadowsAtAngle(i, l.x, l.y, l.r);\r\n      }\r\n    }\r\n    if (LevelConstants.SMOOTH_LIGHTING)\r\n      this.vis = this.blur3x3(this.vis, [\r\n        [1, 2, 1],\r\n        [2, 8, 2],\r\n        [1, 2, 1],\r\n      ]);\r\n\r\n    /*for (let x = 0; x < this.visibilityArray.length; x++) {\r\n      for (let y = 0; y < this.visibilityArray[0].length; y++) {\r\n        if (this.visibilityArray[x][y] < oldVisibilityArray[x][y]) {\r\n          this.visibilityArray[x][y] = Math.min(\r\n            oldVisibilityArray[x][y],\r\n            LevelConstants.MIN_VISIBILITY\r\n          );\r\n        }\r\n      }\r\n    }*/\r\n  };\r\n\r\n  castShadowsAtAngle = (\r\n    angle: number,\r\n    px: number,\r\n    py: number,\r\n    radius: number\r\n  ) => {\r\n    let dx = Math.cos((angle * Math.PI) / 180);\r\n    let dy = Math.sin((angle * Math.PI) / 180);\r\n    let onOpaqueSection = false;\r\n    for (let i = 0; i < radius; i++) {\r\n      if (\r\n        Math.floor(px) < this.roomX ||\r\n        Math.floor(px) >= this.roomX + this.width ||\r\n        Math.floor(py) < this.roomY ||\r\n        Math.floor(py) >= this.roomY + this.height\r\n      )\r\n        return; // we're outside the level\r\n\r\n      let tile = this.roomArray[Math.floor(px)][Math.floor(py)];\r\n      if (tile.isOpaque()) {\r\n        if (i > 0) onOpaqueSection = true;\r\n      } else if (onOpaqueSection) {\r\n        return;\r\n      }\r\n\r\n      this.vis[Math.floor(px)][Math.floor(py)] = Math.min(\r\n        this.vis[Math.floor(px)][Math.floor(py)],\r\n        Math.min(i / radius, 1)\r\n      );\r\n\r\n      px += dx;\r\n      py += dy;\r\n    }\r\n  };\r\n\r\n  blur3x3 = (\r\n    array: Array<Array<number>>,\r\n    weights: Array<Array<number>>\r\n  ): Array<Array<number>> => {\r\n    let blurredArray = [];\r\n    for (let x = 0; x < array.length; x++) {\r\n      blurredArray[x] = [];\r\n      for (let y = 0; y < array[0].length; y++) {\r\n        if (array[x][y] === 0) {\r\n          blurredArray[x][y] = 0;\r\n          continue;\r\n        }\r\n        let total = 0;\r\n        let totalWeights = 0;\r\n        for (let xx = -1; xx <= 1; xx++) {\r\n          for (let yy = -1; yy <= 1; yy++) {\r\n            if (\r\n              x + xx >= 0 &&\r\n              x + xx < array.length &&\r\n              y + yy >= 0 &&\r\n              y + yy < array[0].length\r\n            ) {\r\n              total += array[x + xx][y + yy] * weights[xx + 1][yy + 1];\r\n              totalWeights += weights[xx + 1][yy + 1];\r\n            }\r\n          }\r\n        }\r\n        blurredArray[x][y] = total / totalWeights;\r\n      }\r\n    }\r\n    return blurredArray;\r\n  };\r\n\r\n  catchUp = () => {\r\n    if (this.turn === TurnState.computerTurn) this.computerTurn(); // player skipped computer's turn, catch up\r\n  };\r\n\r\n  tick = (player: Player) => {\r\n    this.entities = this.entities.filter((e) => !e.dead);\r\n    this.updateLighting();\r\n\r\n    for (const h of this.hitwarnings) {\r\n      h.tick();\r\n    }\r\n\r\n    for (const p of this.projectiles) {\r\n      p.tick();\r\n    }\r\n\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        this.roomArray[x][y].tick();\r\n      }\r\n    }\r\n\r\n    this.turn = TurnState.computerTurn;\r\n    player.actionTab.setState(ActionState.WAIT);\r\n    //sets the action tab state to Ready\r\n    this.playerTurnTime = Date.now();\r\n    this.playerTicked = player;\r\n    player.map.saveMapData();\r\n  };\r\n\r\n  update = () => {\r\n    if (this.turn == TurnState.computerTurn) {\r\n      if (\r\n        Date.now() - this.playerTurnTime >=\r\n        LevelConstants.COMPUTER_TURN_DELAY\r\n      ) {\r\n        this.computerTurn();\r\n      }\r\n    }\r\n  };\r\n\r\n  clearDeadStuff = () => {\r\n    this.entities = this.entities.filter((e) => !e.dead);\r\n    this.projectiles = this.projectiles.filter((p) => !p.dead);\r\n    this.hitwarnings = this.hitwarnings.filter((h) => !h.dead);\r\n    this.particles = this.particles.filter((p) => !p.dead);\r\n  };\r\n\r\n  computerTurn = () => {\r\n    // take computer turn\r\n    for (const e of this.entities) {\r\n      e.tick();\r\n    }\r\n    this.entities = this.entities.filter((e) => !e.dead);\r\n    for (const i of this.items) {\r\n      i.tick();\r\n    }\r\n\r\n    for (const h of this.hitwarnings) {\r\n      if (\r\n        !this.roomArray[h.x] ||\r\n        !this.roomArray[h.x][h.y] ||\r\n        this.roomArray[h.x][h.y].isSolid()\r\n      ) {\r\n        h.dead = true;\r\n      }\r\n      h.removeOverlapping();\r\n    }\r\n\r\n    for (const p of this.projectiles) {\r\n      if (this.roomArray[p.x][p.y].isSolid()) p.dead = true;\r\n      for (const i in this.game.players) {\r\n        if (\r\n          this.game.rooms[this.game.players[i].levelID] === this &&\r\n          p.x === this.game.players[i].x &&\r\n          p.y === this.game.players[i].y\r\n        ) {\r\n          p.hitPlayer(this.game.players[i]);\r\n        }\r\n      }\r\n      for (const e of this.entities) {\r\n        if (p.x === e.x && p.y === e.y) {\r\n          p.hitEnemy(e);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        this.roomArray[x][y].tickEnd();\r\n      }\r\n    }\r\n    this.entities = this.entities.filter((e) => !e.dead); // enemies may be killed by spiketrap\r\n\r\n    this.clearDeadStuff();\r\n\r\n    this.playerTicked.finishTick();\r\n    this.turn = TurnState.playerTurn;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    HitWarning.updateFrame(delta);\r\n    this.fadeLighting();\r\n  };\r\n\r\n  drawEntities = (delta: number, skipLocalPlayer?: boolean) => {\r\n    let tiles = [];\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        if (this.softVis[x][y] < 1) this.roomArray[x][y].drawUnderPlayer(delta);\r\n        tiles.push(this.roomArray[x][y]);\r\n      }\r\n    }\r\n\r\n    let drawables = new Array<Drawable>();\r\n\r\n    drawables = drawables.concat(\r\n      tiles,\r\n      this.entities,\r\n      this.hitwarnings,\r\n      this.projectiles,\r\n      this.particles,\r\n      this.items\r\n    );\r\n    for (const i in this.game.players) {\r\n      if (this.game.rooms[this.game.players[i].levelID] === this) {\r\n        if (\r\n          !(\r\n            skipLocalPlayer &&\r\n            this.game.players[i] === this.game.players[this.game.localPlayerID]\r\n          )\r\n        )\r\n          drawables.push(this.game.players[i]);\r\n      }\r\n    }\r\n    drawables.sort((a, b) => {\r\n      if (a instanceof Floor) {\r\n        return -1;\r\n      } else if (b instanceof Floor) {\r\n        return 1;\r\n      }\r\n      if (Math.abs(a.drawableY - b.drawableY) < 0.1) {\r\n        if (a instanceof Player) {\r\n          return 1;\r\n        } else if (b instanceof Player) {\r\n          return -1;\r\n        } else if (a instanceof Entity) {\r\n          return 1;\r\n        } else if (b instanceof Entity) {\r\n          return -1;\r\n        } else return 0;\r\n      } else {\r\n        return a.drawableY - b.drawableY;\r\n      }\r\n    });\r\n\r\n    for (const d of drawables) {\r\n      d.draw(delta);\r\n    }\r\n\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        if (this.softVis[x][y] < 1) this.roomArray[x][y].drawAbovePlayer(delta);\r\n      }\r\n    }\r\n\r\n    for (const i of this.items) {\r\n      i.drawTopLayer(delta);\r\n    }\r\n  };\r\n\r\n  drawShade = (delta: number) => {\r\n    let bestSightRadius = 0;\r\n    for (const p in this.game.players) {\r\n      if (\r\n        this.game.rooms[this.game.players[p].levelID] === this &&\r\n        this.game.players[p].sightRadius > bestSightRadius\r\n      ) {\r\n        bestSightRadius = this.game.players[p].sightRadius;\r\n      }\r\n    }\r\n    let shadingAlpha = Math.max(0, Math.min(0.8, 2 / bestSightRadius));\r\n    if (GameConstants.ALPHA_ENABLED) {\r\n      Game.ctx.globalAlpha = shadingAlpha;\r\n      Game.ctx.fillStyle = this.shadeColor;\r\n      Game.ctx.fillRect(\r\n        (this.roomX - LevelConstants.SCREEN_W) * GameConstants.TILESIZE,\r\n        (this.roomY - LevelConstants.SCREEN_H) * GameConstants.TILESIZE,\r\n        (this.width + 2 * LevelConstants.SCREEN_W) * GameConstants.TILESIZE,\r\n        (this.height + 2 * LevelConstants.SCREEN_H) * GameConstants.TILESIZE\r\n      );\r\n      Game.ctx.globalAlpha = 1;\r\n      Game.ctx.globalCompositeOperation = \"screen\";\r\n    }\r\n  };\r\n\r\n  drawOverShade = (delta: number) => {\r\n    for (const e of this.entities) {\r\n      e.drawTopLayer(delta); // health bars\r\n    }\r\n\r\n    for (const p of this.projectiles) {\r\n      p.drawTopLayer(delta);\r\n    }\r\n\r\n    for (const h of this.hitwarnings) {\r\n      h.drawTopLayer(delta);\r\n    }\r\n\r\n    for (const s of this.particles) {\r\n      s.drawTopLayer(delta);\r\n    }\r\n\r\n    // draw over dithered shading\r\n    for (let x = this.roomX; x < this.roomX + this.width; x++) {\r\n      for (let y = this.roomY; y < this.roomY + this.height; y++) {\r\n        this.roomArray[x][y].drawAboveShading(delta);\r\n      }\r\n    }\r\n  };\r\n\r\n  // for stuff rendered on top of the player\r\n  drawTopLayer = (delta: number) => {\r\n    // gui stuff\r\n\r\n    // room name\r\n    let old = Game.ctx.font;\r\n    Game.ctx.font = GameConstants.SCRIPT_FONT_SIZE + \"px Script\";\r\n    Game.ctx.fillStyle = LevelConstants.LEVEL_TEXT_COLOR;\r\n    Game.fillText(\r\n      this.message,\r\n      GameConstants.WIDTH / 2 - Game.measureText(this.name).width / 2,\r\n      5\r\n    );\r\n    Game.ctx.font = old;\r\n  };\r\n}\r\n","import { Game } from \"./game\";\r\n\r\nexport class Sound {\r\n  static playerStoneFootsteps: Array<HTMLAudioElement>;\r\n  static enemyFootsteps: Array<HTMLAudioElement>;\r\n  static hitSounds: Array<HTMLAudioElement>;\r\n  static enemySpawnSound: HTMLAudioElement;\r\n  static chestSounds: Array<HTMLAudioElement>;\r\n  static coinPickupSounds: Array<HTMLAudioElement>;\r\n  static miningSounds: Array<HTMLAudioElement>;\r\n  static breakRockSound: HTMLAudioElement;\r\n  static hurtSounds: Array<HTMLAudioElement>;\r\n  static genericPickupSound: HTMLAudioElement;\r\n  static pushSounds: Array<HTMLAudioElement>;\r\n  static healSound: HTMLAudioElement;\r\n  static music: HTMLAudioElement;\r\n  static graveSound: HTMLAudioElement;\r\n\r\n  static loadSounds = () => {\r\n    Sound.playerStoneFootsteps = new Array<HTMLAudioElement>();\r\n    [1, 2, 3].forEach((i) =>\r\n      Sound.playerStoneFootsteps.push(\r\n        new Audio(\"res/SFX/footsteps/stone/footstep\" + i + \".wav\")\r\n      )\r\n    );\r\n    for (let f of Sound.playerStoneFootsteps) f.volume = 1.0;\r\n\r\n    Sound.enemyFootsteps = new Array<HTMLAudioElement>();\r\n    [1, 2, 3, 4, 5].forEach((i) =>\r\n      Sound.enemyFootsteps.push(\r\n        new Audio(\"res/SFX/footsteps/enemy/enemyfootstep\" + i + \".wav\")\r\n      )\r\n    );\r\n    for (let f of Sound.enemyFootsteps) f.volume = 1.0;\r\n\r\n    Sound.hitSounds = new Array<HTMLAudioElement>();\r\n    [1, 2, 3, 4].forEach((i) =>\r\n      Sound.hitSounds.push(new Audio(\"res/SFX/attacks/swing\" + i + \".wav\"))\r\n    );\r\n    for (let f of Sound.hitSounds) {\r\n      (f.volume = 0), f.load;\r\n      //f.play();\r\n    }\r\n    Sound.enemySpawnSound = new Audio(\"res/SFX/attacks/enemyspawn.wav\");\r\n    Sound.enemySpawnSound.volume = 0.7;\r\n\r\n    Sound.chestSounds = new Array<HTMLAudioElement>();\r\n    [1, 2, 3].forEach((i) =>\r\n      Sound.chestSounds.push(new Audio(\"res/SFX/chest/chest\" + i + \".wav\"))\r\n    );\r\n    for (let f of Sound.chestSounds) f.volume = 0.5;\r\n\r\n    Sound.coinPickupSounds = new Array<HTMLAudioElement>();\r\n    [1, 2, 3, 4].forEach((i) =>\r\n      Sound.coinPickupSounds.push(new Audio(\"res/SFX/items/coins\" + i + \".wav\"))\r\n    );\r\n    for (let f of Sound.coinPickupSounds) f.volume = 1.0;\r\n\r\n    Sound.miningSounds = new Array<HTMLAudioElement>();\r\n    [1, 2, 3, 4].forEach((i) =>\r\n      Sound.miningSounds.push(\r\n        new Audio(\"res/SFX/resources/Pickaxe\" + i + \".wav\")\r\n      )\r\n    );\r\n    for (let f of Sound.miningSounds) f.volume = 0.3;\r\n\r\n    Sound.hurtSounds = new Array<HTMLAudioElement>();\r\n    [1].forEach((i) =>\r\n      Sound.hurtSounds.push(new Audio(\"res/SFX/attacks/hurt1.wav\"))\r\n    );\r\n    for (let f of Sound.hurtSounds) f.volume = 0.3;\r\n\r\n    Sound.genericPickupSound = new Audio(\"res/SFX/items/pickup.wav\");\r\n    Sound.genericPickupSound.volume = 1.0;\r\n\r\n    Sound.breakRockSound = new Audio(\"res/SFX/resources/rockbreak.wav\");\r\n    Sound.breakRockSound.volume = 1.0;\r\n\r\n    Sound.pushSounds = new Array<HTMLAudioElement>();\r\n    [1, 2].forEach((i) =>\r\n      Sound.pushSounds.push(new Audio(\"res/SFX/pushing/push\" + i + \".wav\"))\r\n    );\r\n    for (let f of Sound.pushSounds) f.volume = 1.0;\r\n\r\n    Sound.healSound = new Audio(\"res/SFX/items/powerup1.wav\");\r\n    Sound.healSound.volume = 0.5;\r\n\r\n    Sound.music = new Audio(\"res/bewitched.mp3\");\r\n    Sound.graveSound = new Audio(\"res/SFX/attacks/skelespawn.wav\");\r\n  };\r\n\r\n  static playerStoneFootstep = () => {\r\n    let f = Game.randTable(Sound.playerStoneFootsteps, Math.random);\r\n    f.play();\r\n    f.currentTime = 0;\r\n  };\r\n\r\n  static enemyFootstep = () => {\r\n    let f = Game.randTable(Sound.enemyFootsteps, Math.random);\r\n    f.play();\r\n    f.currentTime = 0;\r\n  };\r\n\r\n  static hit = () => {\r\n    let f = Game.randTable(Sound.hitSounds, Math.random);\r\n    f.play();\r\n    f.currentTime = 0;\r\n\r\n    setTimeout(() => {\r\n      Sound.hurt();\r\n    }, 100);\r\n    //f = Game.randTable(Sound.hurtSounds, Math.random);\r\n    //f.volume = 0.1;\r\n    //f.play();\r\n    //f.currentTime = 0;\r\n    f.volume = 0.4;\r\n  };\r\n\r\n  static hurt = () => {\r\n    let f = Game.randTable(Sound.hurtSounds, Math.random);\r\n    f.play();\r\n    f.currentTime = 0;\r\n  };\r\n\r\n  static enemySpawn = () => {\r\n    Sound.enemySpawnSound.play();\r\n    Sound.enemySpawnSound.currentTime = 0;\r\n  };\r\n\r\n  static chest = () => {\r\n    let f = Game.randTable(Sound.chestSounds, Math.random);\r\n    f.play();\r\n    f.currentTime = 0;\r\n  };\r\n\r\n  static pickupCoin = () => {\r\n    let f = Game.randTable(Sound.coinPickupSounds, Math.random);\r\n    f.play();\r\n    f.currentTime = 0;\r\n  };\r\n\r\n  static mine = () => {\r\n    let f = Game.randTable(Sound.miningSounds, Math.random);\r\n    f.play();\r\n    f.currentTime = 0;\r\n  };\r\n\r\n  static breakRock = () => {\r\n    setTimeout(() => {\r\n      Sound.breakRockSound.play();\r\n    }, 100);\r\n    Sound.breakRockSound.currentTime = 0;\r\n  };\r\n\r\n  static heal = () => {\r\n    Sound.healSound.play();\r\n    Sound.healSound.currentTime = 0;\r\n  };\r\n\r\n  static genericPickup = () => {\r\n    Sound.genericPickupSound.play();\r\n    Sound.genericPickupSound.currentTime = 0;\r\n  };\r\n\r\n  static push = () => {\r\n    let f = Game.randTable(Sound.pushSounds, Math.random);\r\n    f.play();\r\n    f.currentTime = 0;\r\n  };\r\n\r\n  static skeleSpawn = () => {\r\n    Sound.graveSound.play();\r\n    Sound.graveSound.currentTime = 0;\r\n    Sound.graveSound.volume = 0.3;\r\n  };\r\n\r\n  static playMusic = () => {\r\n    Sound.music.addEventListener(\r\n      \"ended\",\r\n      () => {\r\n        Sound.music.currentTime = 0;\r\n        Sound.music.play();\r\n      },\r\n      false\r\n    );\r\n    //Sound.music.play();\r\n  };\r\n}\r\n","export class TextBox {\r\n  text: string;\r\n  cursor: number;\r\n  enterCallback;\r\n  escapeCallback;\r\n  allowedCharacters = \"all\";\r\n  element: HTMLElement;\r\n\r\n\r\n  constructor(element: HTMLElement) {\r\n    this.text = \"\";\r\n    this.cursor = 0;\r\n    this.enterCallback = () => {};\r\n    this.escapeCallback = () => {};\r\n    this.element = element;\r\n    this.element.addEventListener(\"touchstart\", this.handleTouchStart);\r\n  }\r\n\r\n  setEnterCallback = (callback) => {\r\n    this.enterCallback = callback;\r\n  };\r\n\r\n  setEscapeCallback = (callback) => {\r\n    this.escapeCallback = callback;\r\n  };\r\n\r\n  clear = () => {\r\n    this.text = \"\";\r\n    this.cursor = 0;\r\n  };\r\n\r\n  handleKeyPress = (key: string) => {\r\n    const fontHas = \"abcdefghijklmnopqrstuvwxyz1234567890,.!?:'()[]%-/\".split(\r\n      \"\"\r\n    );\r\n    if (key.length === 1) {\r\n      key = key.toLowerCase();\r\n      if (fontHas.includes(key)) {\r\n        if (\r\n          this.allowedCharacters === \"all\" ||\r\n          this.allowedCharacters.includes(key)\r\n        ) {\r\n          this.text =\r\n            this.text.substring(0, this.cursor) +\r\n            key +\r\n            this.text.substring(this.cursor, this.text.length);\r\n          this.cursor += 1;\r\n        }\r\n      }\r\n      return\r\n    } else {\r\n      switch (key) {\r\n        case \"Backspace\":\r\n          this.text =\r\n            this.text.substring(0, this.cursor - 1) +\r\n            this.text.substring(this.cursor, this.text.length);\r\n          this.cursor = Math.max(0, this.cursor - 1);\r\n          break;\r\n        case \"Delete\":\r\n          this.text =\r\n            this.text.substring(0, this.cursor) +\r\n            this.text.substring(this.cursor + 1, this.text.length);\r\n          break;\r\n        case \"ArrowLeft\":\r\n          this.cursor = Math.max(0, this.cursor - 1);\r\n          break;\r\n        case \"ArrowRight\":\r\n          this.cursor = Math.min(this.text.length, this.cursor + 1);\r\n          break;\r\n        case \"Enter\":\r\n          this.enterCallback();\r\n          break;\r\n        case \"Escape\":\r\n          this.escapeCallback();\r\n          break;\r\n      }\r\n    }\r\n  };\r\n\r\n  handleTouchStart = (e: TouchEvent) => {\r\n    this.focus();\r\n    e.preventDefault();\r\n  };\r\n\r\n  focus = () => {\r\n    // Create a temporary input element to trigger the on-screen keyboard\r\n    const tempInput = document.createElement(\"input\");\r\n    tempInput.type = \"text\";\r\n    tempInput.style.position = \"absolute\";\r\n    tempInput.style.opacity = \"0\";\r\n    tempInput.style.zIndex = \"-1\"; // Ensure it doesn't interfere with the game UI\r\n    document.body.appendChild(tempInput);\r\n    tempInput.focus();\r\n    tempInput.addEventListener(\"blur\", () => {\r\n      document.body.removeChild(tempInput);\r\n    });\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Floor } from \"./floor\";\r\n\r\nexport class Bones extends Floor {\r\n  draw = (delta: number) => {\r\n    Game.drawTile(\r\n      7,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Tile, SkinType } from \"./tile\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { InsideLevelDoor } from \"./insideLevelDoor\";\r\nimport { Entity } from \"../entity/entity\";\r\n\r\nexport class Button extends Tile {\r\n  // all are in grid units\r\n  w: number;\r\n  h: number;\r\n  pressed: boolean;\r\n  turnsSincePressed: number;\r\n  linkedDoor: InsideLevelDoor;\r\n\r\n  constructor(room: Room, x: number, y: number, linkedDoor: InsideLevelDoor) {\r\n    super(room, x, y);\r\n    this.w = 1;\r\n    this.h = 1;\r\n\r\n    this.pressed = false;\r\n    this.turnsSincePressed = 1;\r\n\r\n    this.linkedDoor = linkedDoor;\r\n  }\r\n\r\n  press = () => {\r\n    this.pressed = true;\r\n    this.linkedDoor.opened = true;\r\n  };\r\n\r\n  unpress = () => {\r\n    this.pressed = false;\r\n    this.linkedDoor.opened = false;\r\n  };\r\n\r\n  /*onCollide = (player: Player) => {\r\n    this.press();\r\n  };\r\n\r\n  onCollideEnemy = (enemy: Enemy) => {\r\n    this.press();\r\n  };*/\r\n\r\n  tickEnd = () => {\r\n    this.unpress();\r\n    for (const i in this.room.game.players) {\r\n      if (this.room.game.players[i].x === this.x && this.room.game.players[i].y === this.y) this.press();\r\n    }\r\n    for (const e of this.room.entities) {\r\n      if (e.x === this.x && e.y === this.y) this.press();\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    Game.drawTile(1, 0, 1, 1, this.x, this.y, 1, 1, this.room.shadeColor, this.shadeAmount());\r\n    if (this.pressed)\r\n      Game.drawTile(\r\n        18,\r\n        0,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y,\r\n        this.w,\r\n        this.h,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    else\r\n      Game.drawTile(\r\n        17,\r\n        0,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y,\r\n        this.w,\r\n        this.h,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n  };\r\n}\r\n","import { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Tile } from \"./tile\";\r\n\r\nexport class Chasm extends Tile {\r\n  tileX: number;\r\n  tileY: number;\r\n  topEdge: boolean;\r\n\r\n  constructor(\r\n    room: Room,\r\n    x: number,\r\n    y: number,\r\n    leftEdge: boolean,\r\n    rightEdge: boolean,\r\n    topEdge: boolean,\r\n    bottomEdge: boolean\r\n  ) {\r\n    super(room, x, y);\r\n\r\n    this.tileX = this.skin === 1 ? 24 : 20;\r\n    this.tileY = 1;\r\n\r\n    if (leftEdge) this.tileX--;\r\n    else if (rightEdge) this.tileX++;\r\n    if (topEdge) this.tileY--;\r\n    else if (bottomEdge) this.tileY++;\r\n\r\n    this.topEdge = topEdge;\r\n  }\r\n\r\n  isSolid = (): boolean => {\r\n    return true;\r\n  };\r\n  canCrushEnemy = (): boolean => {\r\n    return true;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (this.topEdge)\r\n      Game.drawTile(22, 0, 1, 2, this.x, this.y, 1, 2, this.room.shadeColor, this.shadeAmount());\r\n    Game.drawTile(\r\n      this.tileX,\r\n      this.tileY,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n}\r\n","import { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Tile } from \"./tile\";\r\n\r\nexport class CoffinTile extends Tile {\r\n  subTileY: number; // each coffin is 1x2, this is the sub-tile coordinate\r\n\r\n  constructor(room: Room, x: number, y: number, subTileY: number) {\r\n    super(room, x, y);\r\n    this.subTileY = subTileY;\r\n  }\r\n\r\n  isSolid = (): boolean => {\r\n    return true;\r\n  };\r\n  canCrushEnemy = (): boolean => {\r\n    return true;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (this.subTileY === 0) {\r\n      Game.drawTile(\r\n        0,\r\n        5,\r\n        1,\r\n        1,\r\n        this.x - 1,\r\n        this.y - 1,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n      Game.drawTile(\r\n        1,\r\n        5,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y - 1,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n      Game.drawTile(\r\n        2,\r\n        5,\r\n        1,\r\n        1,\r\n        this.x + 1,\r\n        this.y - 1,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n      Game.drawTile(\r\n        0,\r\n        6,\r\n        1,\r\n        1,\r\n        this.x - 1,\r\n        this.y,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n      Game.drawTile(1, 6, 1, 1, this.x, this.y, 1, 1, this.room.shadeColor, this.shadeAmount());\r\n      Game.drawTile(\r\n        2,\r\n        6,\r\n        1,\r\n        1,\r\n        this.x + 1,\r\n        this.y,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    } else {\r\n      Game.drawTile(\r\n        0,\r\n        7,\r\n        1,\r\n        1,\r\n        this.x - 1,\r\n        this.y,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n      Game.drawTile(1, 7, 1, 1, this.x, this.y, 1, 1, this.room.shadeColor, this.shadeAmount());\r\n      Game.drawTile(\r\n        2,\r\n        7,\r\n        1,\r\n        1,\r\n        this.x + 1,\r\n        this.y,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    }\r\n  };\r\n}\r\n","import { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { SkinType, Tile } from \"./tile\";\r\nimport { EntityType } from \"../entity/entity\";\r\nimport { Key } from \"../item/key\";\r\n\r\nexport enum DoorDir {\r\n  North,\r\n  East,\r\n  South,\r\n  West,\r\n}\r\n\r\nexport enum DoorType {\r\n  DOOR,\r\n  LOCKEDDOOR,\r\n  GUARDEDDOOR,\r\n}\r\n\r\nexport class Door extends Tile {\r\n  linkedDoor: Door;\r\n  game: Game;\r\n  opened: boolean;\r\n  doorDir: DoorDir;\r\n  guarded: boolean;\r\n  DoorType: DoorType;\r\n  locked: boolean;\r\n\r\n  constructor(\r\n    room: Room,\r\n    game: Game,\r\n    x: number,\r\n    y: number,\r\n    dir: number,\r\n    doorType: DoorType\r\n  ) {\r\n    super(room, x, y);\r\n    this.game = game;\r\n    this.opened = false;\r\n    this.doorDir = dir;\r\n    this.DoorType = doorType;\r\n    this.locked = false;\r\n\r\n    if (this.DoorType === DoorType.GUARDEDDOOR) {\r\n      this.locked = true;\r\n    }\r\n    if (this.DoorType === DoorType.LOCKEDDOOR) {\r\n      this.locked = true;\r\n    }\r\n  }\r\n  canUnlock = (player: Player) => {\r\n    if (this.DoorType === DoorType.LOCKEDDOOR) {\r\n      let k = player.inventory.hasItem(Key);\r\n      if (k !== null) {\r\n        this.game.pushMessage(\"You use the key to unlock the door.\");\r\n        return true;\r\n      } else\r\n        this.game.pushMessage(\"The door is locked tightly and won't budge.\");\r\n      return false;\r\n    }\r\n\r\n    if (this.DoorType === DoorType.GUARDEDDOOR) {\r\n      const inRoom = this.game.room.entities.filter(\r\n        (enemy) => enemy.entityType === EntityType.ENEMY\r\n      );\r\n      if (inRoom.length === 0) {\r\n        this.game.pushMessage(\r\n          \"The foes have been slain and the door allows you passage.\"\r\n        );\r\n        return true;\r\n      } else\r\n        this.game.pushMessage(\r\n          \"There are still remaining foes guarding this door...\"\r\n        );\r\n\r\n      return false;\r\n    }\r\n  };\r\n  unlock = (player: Player) => {\r\n    if (this.DoorType === DoorType.LOCKEDDOOR) {\r\n      let k = player.inventory.hasItem(Key);\r\n      if (k !== null) {\r\n        // remove key\r\n        player.inventory.removeItem(k);\r\n        this.locked = false;\r\n        this.DoorType = DoorType.DOOR;\r\n      }\r\n    }\r\n    if (this.DoorType === DoorType.GUARDEDDOOR) {\r\n      this.locked = false;\r\n      this.room.doors.forEach((door) => {\r\n        door.DoorType = DoorType.DOOR;\r\n        door.locked = false;\r\n      });\r\n    } else {\r\n    }\r\n  };\r\n\r\n  link = (other: Door) => {\r\n    this.linkedDoor = other;\r\n  };\r\n\r\n  isSolid = (): boolean => {\r\n    console.log(this.DoorType);\r\n    if (this.locked) {\r\n      return true;\r\n    } else false;\r\n  };\r\n  canCrushEnemy = (): boolean => {\r\n    return true;\r\n  };\r\n\r\n  onCollide = (player: Player) => {\r\n    this.opened = true;\r\n    this.linkedDoor.opened = true;\r\n    if (this.doorDir === DoorDir.North || this.doorDir === DoorDir.South) {\r\n      this.game.changeLevelThroughDoor(player, this.linkedDoor);\r\n    } else\r\n      this.game.changeLevelThroughDoor(\r\n        player,\r\n        this.linkedDoor,\r\n        this.linkedDoor.room.roomX - this.room.roomX > 0 ? 1 : -1\r\n      );\r\n    this.linkedDoor.locked = false;\r\n    this.linkedDoor.DoorType = DoorType.DOOR;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (this.doorDir === DoorDir.North) {\r\n      //if top door\r\n      if (this.opened)\r\n        Game.drawTile(\r\n          6,\r\n          this.skin,\r\n          1,\r\n          1,\r\n          this.x,\r\n          this.y,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      else\r\n        Game.drawTile(\r\n          3,\r\n          this.skin,\r\n          1,\r\n          1,\r\n          this.x,\r\n          this.y,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n    }\r\n    if (this.doorDir !== DoorDir.North)\r\n      //if not top door\r\n      Game.drawTile(\r\n        1,\r\n        this.skin,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n  };\r\n\r\n  drawAbovePlayer = (delta: number) => {\r\n    if (this.doorDir === DoorDir.North) {\r\n      //if top door\r\n      if (!this.opened)\r\n        Game.drawTile(\r\n          13,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x,\r\n          this.y - 1,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n      else\r\n        Game.drawTile(\r\n          14,\r\n          0,\r\n          1,\r\n          1,\r\n          this.x,\r\n          this.y - 1,\r\n          1,\r\n          1,\r\n          this.room.shadeColor,\r\n          this.shadeAmount()\r\n        );\r\n    }\r\n    if (this.doorDir !== DoorDir.North) {\r\n    }\r\n  };\r\n\r\n  drawAboveShading = (delta: number) => {\r\n    let icon = 2;\r\n    let xOffset = 0;\r\n    if (this.DoorType === DoorType.GUARDEDDOOR) (icon = 9), (xOffset = 1 / 32);\r\n    if (this.DoorType === DoorType.LOCKEDDOOR) (icon = 10), (xOffset = 1 / 32);\r\n\r\n    if (this.doorDir === DoorDir.North) {\r\n      //if top door\r\n      Game.drawFX(\r\n        icon,\r\n        2,\r\n        1,\r\n        1,\r\n        this.x + xOffset,\r\n        this.y - 1.25 + 0.125 * Math.sin(0.006 * Date.now()),\r\n        1,\r\n        1\r\n      );\r\n    } else {\r\n      Game.drawFX(\r\n        icon,\r\n        2,\r\n        1,\r\n        1,\r\n        this.x + xOffset,\r\n        this.y - 1.25 + 0.125 * Math.sin(0.006 * Date.now()),\r\n        1,\r\n        1\r\n      ); //if not top door\r\n    }\r\n  };\r\n}\r\n","import { Player } from \"../player\";\r\nimport { ChatMessage, Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { SkinType, Tile } from \"./tile\";\r\nimport { UpLadder } from \"./upLadder\";\r\n\r\nexport class DownLadder extends Tile {\r\n  linkedLevel: Room;\r\n  game: Game;\r\n  isRope = false;\r\n\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, x, y);\r\n    this.game = game;\r\n    this.linkedLevel = null;\r\n  }\r\n\r\n  generate = () => {\r\n\r\n    // called by Game during transition\r\n    if (!this.linkedLevel) {\r\n      this.linkedLevel = this.game.levelgen.generate(\r\n        this.game,\r\n        this.room.depth + (this.isRope ? 0 : 1),\r\n        this.isRope\r\n      );\r\n      for (let x = this.linkedLevel.roomX; x < this.linkedLevel.roomX + this.linkedLevel.width; x++) {\r\n        for (let y = this.linkedLevel.roomY; y < this.linkedLevel.roomY + this.linkedLevel.height; y++) {\r\n          let tile = this.linkedLevel.roomArray[x][y];\r\n          if (tile instanceof UpLadder && tile.isRope)\r\n            tile.linkedLevel = this.room;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  onCollide = (player: Player) => {\r\n    if (this.isRope) this.game.changeLevelThroughLadder(player, this);\r\n    else {\r\n      let allPlayersHere = true;\r\n      for (const i in this.game.players) {\r\n        if (this.game.rooms[this.game.players[i].levelID] !== this.room || this.game.players[i].x !== this.x || this.game.players[i].y !== this.y) {\r\n          allPlayersHere = false;\r\n        }\r\n      }\r\n      if (allPlayersHere) {\r\n        this.generate();\r\n        for (const i in this.game.players) {\r\n          this.game.changeLevelThroughLadder(this.game.players[i], this);\r\n        }\r\n      } else {\r\n        if (player === this.game.players[this.game.localPlayerID]) this.game.chat.push(new ChatMessage('all players must be present'));\r\n      }\r\n    }\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    let xx = 4;\r\n    if (this.isRope) xx = 16;\r\n\r\n    Game.drawTile(\r\n      1,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n    Game.drawTile(\r\n      xx,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n\r\n  drawAbovePlayer = (delta: number) => { };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Tile, SkinType } from \"./tile\";\r\nimport { Room } from \"../room\";\r\n\r\nexport class Floor extends Tile {\r\n  // all are in grid units\r\n  variation: number;\r\n\r\n  constructor(room: Room, x: number, y: number) {\r\n    super(room, x, y);\r\n    this.variation = 1;\r\n    if (this.skin == SkinType.DUNGEON)\r\n      this.variation = Game.randTable([1, 1, 1, 1, 1, 1, 8, 8, 8, 9, 10, 10, 10, 10, 10, 12], Math.random);\r\n    if (this.skin == SkinType.CAVE)\r\n      //this.variation = Game.randTable([1, 1, 1, 1, 8, 9, 10, 12], Math.random);\r\n      this.variation = Game.randTable([1, 1, 1, 1, 1, 1, 8, 8, 8, 9, 10, 10, 10, 10, 10, 12], Math.random);\r\n  }\r\n\r\n  draw = (delta: number) => {\r\n    Game.drawTile(\r\n      this.variation,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n}\r\n","import { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Tile } from \"./tile\";\r\n\r\nexport class FountainTile extends Tile {\r\n  subTileX: number; // each fountain is 3x3, this is the sub-tile coordinate\r\n  subTileY: number;\r\n\r\n  constructor(room: Room, x: number, y: number, subTileX: number, subTileY: number) {\r\n    super(room, x, y);\r\n    this.subTileX = subTileX;\r\n    this.subTileY = subTileY;\r\n  }\r\n\r\n  isSolid = (): boolean => {\r\n    return true;\r\n  };\r\n  canCrushEnemy = (): boolean => {\r\n    return true;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    Game.drawTile(\r\n      1,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n    Game.drawTile(\r\n      this.subTileX,\r\n      2 + this.subTileY,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n}\r\n","import { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { SkinType, Tile } from \"./tile\";\r\n\r\nexport class InsideLevelDoor extends Tile {\r\n  game: Game;\r\n  opened: boolean;\r\n\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, x, y);\r\n    this.game = game;\r\n    this.opened = false;\r\n  }\r\n\r\n  isSolid = (): boolean => {\r\n    return !this.opened;\r\n  };\r\n  canCrushEnemy = (): boolean => {\r\n    return !this.opened;\r\n  };\r\n  isOpaque = (): boolean => {\r\n    return !this.opened;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    Game.drawTile(1, 0, 1, 1, this.x, this.y, 1, 1, this.room.shadeColor, this.shadeAmount());\r\n    if (this.opened)\r\n      Game.drawTile(15, 1, 1, 1, this.x, this.y, 1, 1, this.room.shadeColor, this.shadeAmount());\r\n    else\r\n      Game.drawTile(\r\n        3,\r\n        this.skin,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n  };\r\n\r\n  drawAbovePlayer = (delta: number) => {\r\n    if (!this.opened)\r\n      Game.drawTile(\r\n        13,\r\n        0,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y - 1,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    else\r\n      Game.drawTile(\r\n        14,\r\n        0,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y - 1,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Tile, SkinType } from \"./tile\";\r\nimport { Room } from \"../room\";\r\n\r\nexport class SpawnFloor extends Tile {\r\n  // all are in grid units\r\n  variation: number;\r\n\r\n  constructor(room: Room, x: number, y: number) {\r\n    super(room, x, y);\r\n    this.variation = 1;\r\n    if (this.skin == SkinType.DUNGEON)\r\n      this.variation = Game.randTable(\r\n        [1, 1, 1, 1, 1, 1, 8, 8, 8, 9, 10, 10, 10, 10, 10, 12],\r\n        Math.random\r\n      );\r\n    if (this.skin == SkinType.CAVE)\r\n      //this.variation = Game.randTable([1, 1, 1, 1, 8, 9, 10, 12], Math.random);\r\n      this.variation = Game.randTable(\r\n        [1, 1, 1, 1, 1, 1, 8, 8, 8, 9, 10, 10, 10, 10, 10, 12],\r\n        Math.random\r\n      );\r\n  }\r\n\r\n  draw = (delta: number) => {\r\n    Game.drawTile(\r\n      this.variation,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n}\r\n","import { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Tile } from \"./tile\";\r\n\r\nexport class Spike extends Tile {\r\n  onCollide = (player: Player) => {\r\n    player.hurt(1, \"spike\");\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    Game.drawTile(11, 0, 1, 1, this.x, this.y, 1, 1, this.room.shadeColor, this.shadeAmount());\r\n  };\r\n}\r\n","import { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Tile } from \"./tile\";\r\nimport { Entity } from \"../entity/entity\";\r\nimport { Crate } from \"../entity/crate\";\r\nimport { Barrel } from \"../entity/barrel\";\r\nimport { HitWarning } from \"../hitWarning\";\r\n\r\nexport class SpikeTrap extends Tile {\r\n  on: boolean;\r\n  tickCount: number;\r\n  frame: number;\r\n  t: number;\r\n\r\n  constructor(room: Room, x: number, y: number, tickCount?: number) {\r\n    super(room, x, y);\r\n    if (tickCount) this.tickCount = tickCount;\r\n    else this.tickCount = 0;\r\n    this.on = false;\r\n    this.frame = 0;\r\n    this.t = 0;\r\n  }\r\n\r\n  tick = () => {\r\n    this.tickCount++;\r\n    if (this.tickCount >= 4) this.tickCount = 0;\r\n    this.on = this.tickCount === 0;\r\n\r\n    if (this.on) {\r\n      for (const i in this.room.game.players) {\r\n        if (\r\n          this.room ===\r\n            this.room.game.rooms[this.room.game.players[i].levelID] &&\r\n          this.room.game.players[i].x === this.x &&\r\n          this.room.game.players[i].y === this.y\r\n        )\r\n          this.room.game.players[i].hurt(1, \"spike trap\");\r\n      }\r\n    }\r\n\r\n    if (this.tickCount === 3)\r\n      this.room.hitwarnings.push(\r\n        new HitWarning(this.room.game, this.x, this.y, this.x, this.y, false)\r\n      );\r\n  };\r\n\r\n  tickEnd = () => {\r\n    if (this.on) {\r\n      for (const e of this.room.entities) {\r\n        if (e.x === this.x && e.y === this.y) {\r\n          e.hurt(null, 1);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  onCollideEnemy = (enemy: Entity) => {\r\n    if (this.on && !(enemy instanceof Crate || enemy instanceof Barrel))\r\n      enemy.hurt(null, 1);\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    Game.drawTile(\r\n      1,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n\r\n    let rumbleOffsetX = 0;\r\n    this.t++;\r\n    if (!this.on && this.tickCount === 3) {\r\n      if (this.t % 4 === 1) rumbleOffsetX = 0.0325;\r\n      if (this.t % 4 === 3) rumbleOffsetX = -0.0325;\r\n    }\r\n    let frames = [0, 1, 2, 3, 3, 4, 2, 0];\r\n    let f = 6 + frames[Math.floor(this.frame)];\r\n    if (\r\n      this.tickCount === 1 ||\r\n      (this.tickCount === 0 && frames[Math.floor(this.frame)] === 0)\r\n    ) {\r\n      f = 5;\r\n    }\r\n    Game.drawObj(\r\n      f,\r\n      0,\r\n      1,\r\n      2,\r\n      this.x + rumbleOffsetX,\r\n      this.y - 1,\r\n      1,\r\n      2,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n    if (this.on && this.frame < frames.length - 1) {\r\n      if (frames[Math.floor(this.frame)] < 3) this.frame += 0.4 * delta;\r\n      else this.frame += 0.2 * delta;\r\n    }\r\n    if (!this.on) this.frame = 0;\r\n  };\r\n}\r\n","import { Room } from \"../room\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Player } from \"../player\";\r\nimport { Entity } from \"../entity/entity\";\r\nimport { Drawable } from \"../drawable\";\r\n\r\nexport enum SkinType {\r\n  DUNGEON = 0,\r\n  CAVE = 1,\r\n}\r\n\r\nexport class Tile extends Drawable {\r\n  x: number;\r\n  y: number;\r\n  room: Room;\r\n  skin: SkinType;\r\n  isDoor: boolean;\r\n\r\n  constructor(room: Room, x: number, y: number) {\r\n    super();\r\n    this.skin = room.skin;\r\n    this.room = room;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.drawableY = y;\r\n    this.isDoor = false;\r\n  }\r\n  hasPlayer = (player: Player) => {\r\n    if (player.x === this.x && player.y === this.y) return true;\r\n    else return false;\r\n  };\r\n\r\n  shadeAmount = () => {\r\n    return this.room.softVis[this.x][this.y];\r\n  };\r\n\r\n  isSolid = (): boolean => {\r\n    return false;\r\n  };\r\n  canCrushEnemy = (): boolean => {\r\n    return false;\r\n  };\r\n  isOpaque = (): boolean => {\r\n    return false;\r\n  };\r\n  onCollide = (player: Player) => {};\r\n  onCollideEnemy = (enemy: Entity) => {};\r\n  tick = () => {};\r\n  tickEnd = () => {};\r\n\r\n  draw = (delta: number) => {};\r\n  drawUnderPlayer = (delta: number) => {};\r\n  drawAbovePlayer = (delta: number) => {};\r\n  drawAboveShading = (delta: number) => {};\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { Player } from \"../player\";\r\nimport { LevelConstants } from \"../levelConstants\";\r\nimport { Tile } from \"./tile\";\r\n\r\nexport class Trapdoor extends Tile {\r\n  game: Game;\r\n\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, x, y);\r\n    this.game = game;\r\n  }\r\n\r\n  draw = (delta: number) => {\r\n    Game.drawTile(\r\n      13,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n\r\n  onCollide = (player: Player) => {\r\n    // TODO\r\n  };\r\n}\r\n","import { Player } from \"../player\";\r\nimport { Game } from \"../game\";\r\nimport { Room } from \"../room\";\r\nimport { GameConstants } from \"../gameConstants\";\r\nimport { SkinType, Tile } from \"./tile\";\r\nimport { DownLadder } from \"./downLadder\";\r\n\r\nexport class UpLadder extends Tile {\r\n  linkedLevel: Room;\r\n  game: Game;\r\n  isRope = false;\r\n\r\n  constructor(room: Room, game: Game, x: number, y: number) {\r\n    super(room, x, y);\r\n    this.game = game;\r\n  }\r\n\r\n  onCollide = (player: Player) => {\r\n    this.game.changeLevelThroughLadder(player, this);\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    let xx = 29;\r\n    let yy = 0;\r\n    if (this.isRope) {\r\n      xx = 16;\r\n      yy = 1;\r\n    }\r\n\r\n    Game.drawTile(\r\n      1,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n    if (!this.isRope)\r\n      Game.drawTile(\r\n        xx,\r\n        yy,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y - 1,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n    Game.drawTile(\r\n      xx,\r\n      yy + 1,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n\r\n  drawAbovePlayer = (delta: number) => {\r\n    if (this.isRope)\r\n      Game.drawTile(\r\n        16,\r\n        1,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y - 1,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.shadeAmount()\r\n      );\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Tile } from \"./tile\";\r\n\r\nexport class Wall extends Tile {\r\n  isSolid = (): boolean => {\r\n    return true;\r\n  };\r\n  canCrushEnemy = (): boolean => {\r\n    return true;\r\n  };\r\n  isOpaque = (): boolean => {\r\n    return true;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    if (this.y < this.room.roomY + this.room.height - 1)\r\n      Game.drawTile(\r\n        0,\r\n        this.skin,\r\n        1,\r\n        1,\r\n        this.x,\r\n        this.y,\r\n        1,\r\n        1,\r\n        this.room.shadeColor,\r\n        this.room.softVis[this.x][this.y + 1]\r\n      );\r\n\r\n    Game.drawTile(\r\n      2,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y - 0.5,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Tile } from \"./tile\";\r\nimport { Room } from \"../room\";\r\nimport { LightSource } from \"../lightSource\";\r\n\r\nexport class WallTorch extends Tile {\r\n  frame: number;\r\n\r\n  constructor(room: Room, x: number, y: number) {\r\n    super(room, x, y);\r\n    this.room.lightSources.push(new LightSource(this.x + 0.5, this.y + 0.5, 3));\r\n    this.frame = Math.random() * 12;\r\n  }\r\n\r\n  isSolid = (): boolean => {\r\n    return true;\r\n  };\r\n  canCrushEnemy = (): boolean => {\r\n    return true;\r\n  };\r\n  isOpaque = (): boolean => {\r\n    return true;\r\n  };\r\n\r\n  draw = (delta: number) => {\r\n    this.frame += 0.3 * delta;\r\n    if (this.frame >= 12) this.frame = 0;\r\n\r\n    Game.drawTile(\r\n      0,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n\r\n    Game.drawTile(\r\n      2,\r\n      this.skin,\r\n      1,\r\n      1,\r\n      this.x,\r\n      this.y - 0.5,\r\n      1,\r\n      1,\r\n      this.room.shadeColor,\r\n      this.shadeAmount()\r\n    );\r\n\r\n    Game.drawFX(Math.floor(this.frame), 32, 1, 2, this.x, this.y - 1, 1, 2);\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Weapon } from \"./weapon\";\r\nimport { Room } from \"../room\";\r\nimport { Sound } from \"../sound\";\r\nimport { SlashParticle } from \"../particle/slashParticle\";\r\nimport { Crate } from \"../entity/crate\";\r\nimport { Barrel } from \"../entity/barrel\";\r\n\r\nexport class Dagger extends Weapon {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 22;\r\n    this.tileY = 0;\r\n  }\r\n\r\n  weaponMove = (newX: number, newY: number): boolean => {\r\n    let flag = false;\r\n    for (let e of this.game.rooms[this.wielder.levelID].entities) {\r\n      if (\r\n        e.destroyable &&\r\n        !e.pushable &&\r\n        e.pointIn(newX, newY)\r\n      ) {\r\n        e.hurt(this.wielder, 1);\r\n\r\n        flag = true;\r\n      }\r\n    }\r\n    if (flag) {\r\n      if (this.wielder.game.rooms[this.wielder.levelID] === this.wielder.game.room) Sound.hit();\r\n      this.wielder.drawX = 0.5 * (this.wielder.x - newX);\r\n      this.wielder.drawY = 0.5 * (this.wielder.y - newY);\r\n      this.game.rooms[this.wielder.levelID].particles.push(new SlashParticle(newX, newY));\r\n      this.game.rooms[this.wielder.levelID].tick(this.wielder);\r\n      if (this.wielder === this.game.players[this.game.localPlayerID])\r\n        this.game.shakeScreen(10 * this.wielder.drawX, 10 * this.wielder.drawY);\r\n    }\r\n    return !flag;\r\n  };\r\n\r\n  getDescription = (): string => {\r\n    return \"DAGGER\\nDamage 1\";\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Weapon } from \"./weapon\";\r\nimport { Room } from \"../room\";\r\nimport { Sound } from \"../sound\";\r\nimport { SlashParticle } from \"../particle/slashParticle\";\r\nimport { Crate } from \"../entity/crate\";\r\nimport { Barrel } from \"../entity/barrel\";\r\n\r\nexport class DualDagger extends Weapon {\r\n  firstAttack: boolean;\r\n\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 23;\r\n    this.tileY = 0;\r\n    this.firstAttack = true;\r\n  }\r\n\r\n  tickInInventory = () => {\r\n    this.firstAttack = true;\r\n  };\r\n\r\n  weaponMove = (newX: number, newY: number): boolean => {\r\n    let flag = false;\r\n    for (let e of this.game.rooms[this.wielder.levelID].entities) {\r\n      if (\r\n        e.destroyable &&\r\n        !e.pushable &&\r\n        e.pointIn(newX, newY)\r\n      ) {\r\n        e.hurt(this.wielder, 1);\r\n\r\n\r\n        flag = true;\r\n      }\r\n    }\r\n    if (flag) {\r\n      if (this.wielder.game.rooms[this.wielder.levelID] === this.wielder.game.room) Sound.hit();\r\n      this.wielder.drawX = 0.5 * (this.wielder.x - newX);\r\n      this.wielder.drawY = 0.5 * (this.wielder.y - newY);\r\n      this.game.rooms[this.wielder.levelID].particles.push(new SlashParticle(newX, newY));\r\n      if (this.firstAttack) this.game.rooms[this.wielder.levelID].entities = this.game.rooms[this.wielder.levelID].entities.filter(e => !e.dead);\r\n      else this.game.rooms[this.wielder.levelID].tick(this.wielder);\r\n      if (this.wielder === this.game.players[this.game.localPlayerID])\r\n        this.game.shakeScreen(10 * this.wielder.drawX, 10 * this.wielder.drawY);\r\n\r\n      if (this.firstAttack) this.firstAttack = false;\r\n    }\r\n    return !flag;\r\n  };\r\n\r\n  getDescription = (): string => {\r\n    return \"DUAL DAGGERS\\nOne extra attack per turn\";\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Weapon } from \"./weapon\";\r\nimport { Room } from \"../room\";\r\nimport { Sound } from \"../sound\";\r\nimport { SlashParticle } from \"../particle/slashParticle\";\r\nimport { Crate } from \"../entity/crate\";\r\nimport { Barrel } from \"../entity/barrel\";\r\n\r\nexport class Pickaxe extends Weapon {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 30;\r\n    this.tileY = 0;\r\n    this.canMine = true\r\n  }\r\n\r\n\r\n  weaponMove = (newX: number, newY: number): boolean => {\r\n    let flag = false;\r\n    for (let e of this.game.rooms[this.wielder.levelID].entities) {\r\n      if (\r\n        e.destroyable &&\r\n        !e.pushable &&\r\n        e.pointIn(newX, newY)\r\n      ) {\r\n        e.hurt(this.wielder, 1);\r\n\r\n        flag = true;\r\n      }\r\n    }\r\n    if (flag) {\r\n      if (this.wielder.game.rooms[this.wielder.levelID] === this.wielder.game.room) Sound.hit();\r\n      this.wielder.drawX = 0.5 * (this.wielder.x - newX);\r\n      this.wielder.drawY = 0.5 * (this.wielder.y - newY);\r\n      this.game.rooms[this.wielder.levelID].particles.push(new SlashParticle(newX, newY));\r\n      this.game.rooms[this.wielder.levelID].tick(this.wielder);\r\n      if (this.wielder === this.game.players[this.game.localPlayerID])\r\n        this.game.shakeScreen(10 * this.wielder.drawX, 10 * this.wielder.drawY);\r\n    }\r\n    return !flag;\r\n  };\r\n\r\n  getDescription = (): string => {\r\n    return \"PICKAXE\\nDamage 1, used for mining\";\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Weapon } from \"./weapon\";\r\nimport { Room } from \"../room\";\r\nimport { Sound } from \"../sound\";\r\nimport { SlashParticle } from \"../particle/slashParticle\";\r\nimport { Crate } from \"../entity/crate\";\r\nimport { Barrel } from \"../entity/barrel\";\r\nimport { GenericParticle } from \"../particle/genericParticle\";\r\n\r\nexport class Shotgun extends Weapon {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 26;\r\n    this.tileY = 0;\r\n  }\r\n\r\n  weaponMove = (newX: number, newY: number): boolean => {\r\n    let newX2 = 2 * newX - this.wielder.x;\r\n    let newY2 = 2 * newY - this.wielder.y;\r\n    let newX3 = 3 * newX - 2 * this.wielder.x;\r\n    let newY3 = 3 * newY - 2 * this.wielder.y;\r\n    let range = 3;\r\n    if (\r\n      !this.game.rooms[this.wielder.levelID].tileInside(newX, newY) ||\r\n      this.game.rooms[this.wielder.levelID].roomArray[newX][newY].isSolid()\r\n    )\r\n      //if current position is inside new position OR is solid\r\n      return true;\r\n    else if (\r\n      !this.game.rooms[this.wielder.levelID].tileInside(newX2, newY2) ||\r\n      this.game.rooms[this.wielder.levelID].roomArray[newX2][newY2].isSolid()\r\n    )\r\n      //if current position is inside new position 2 OR is solid\r\n      //set range as one\r\n      range = 1;\r\n    else if (\r\n      !this.game.rooms[this.wielder.levelID].tileInside(newX3, newY3) ||\r\n      this.game.rooms[this.wielder.levelID].roomArray[newX3][newY3].isSolid()\r\n    )\r\n      //if current position is inside new position 3 OR is solid\r\n      //set range as two\r\n      range = 2;\r\n\r\n    let enemyHitCandidates = [];\r\n    let firstPushable = 4;\r\n    let firstNonPushable = 5;\r\n    let firstNonDestroyable = 5;\r\n    for (let e of this.game.rooms[this.wielder.levelID].entities) {\r\n      //loop through enemies in this weapons wielders level\r\n      if (e.pushable) {\r\n        //case for pushables\r\n        if (e.pointIn(newX, newY)) return true;\r\n        //if pushable is in new position return true\r\n        if (e.pointIn(newX2, newY2) && range >= 2) {\r\n          enemyHitCandidates.push({ enemy: e, dist: 2 });\r\n          firstPushable = 2;\r\n          //if pushable is in position 2 set firstPushable var\r\n        }\r\n        if (e.pointIn(newX3, newY3) && range >= 3) {\r\n          enemyHitCandidates.push({ enemy: e, dist: 3 });\r\n          firstPushable = Math.min(firstPushable, 3);\r\n          //if pushable is in position 3 set firstPushable to min of firstPushable and 3\r\n        }\r\n      } else if (e.destroyable) {\r\n        //case for destroyables\r\n        if (e.pointIn(newX, newY) && range >= 1) {\r\n          firstNonPushable = 1;\r\n          enemyHitCandidates.push({ enemy: e, dist: 1 });\r\n        }\r\n        //if enemy is in new position and range is enough push enemy to hit candidate array\r\n        if (e.pointIn(newX2, newY2) && range >= 2) {\r\n          firstNonPushable = Math.min(firstNonPushable, 2);\r\n          enemyHitCandidates.push({ enemy: e, dist: 2 });\r\n        }\r\n        //if enemy is in new position 2 and range is enough push enemy to hit candidate array\r\n        if (e.pointIn(newX3, newY3) && range >= 3) {\r\n          firstNonPushable = Math.min(firstNonPushable, 3);\r\n          enemyHitCandidates.push({ enemy: e, dist: 3 });\r\n        }\r\n        //if enemy is in new position 3 and range is enough push enemy to hit candidate array\r\n      } else {\r\n        if (e.pointIn(newX, newY) && range >= 1) {\r\n          firstNonDestroyable = 1;\r\n        }\r\n        //if enemy is in new position and range is enough set first non destroyable to 1\r\n        if (e.pointIn(newX2, newY2) && range >= 2) {\r\n          firstNonDestroyable = Math.min(firstNonDestroyable, 2);\r\n        }\r\n        //if enemy is in new position and range is enough set first non destroyable to 2\r\n\r\n        if (e.pointIn(newX3, newY3) && range >= 3) {\r\n          firstNonDestroyable = Math.min(firstNonDestroyable, 3);\r\n        }\r\n        //if enemy is in new position and range is enough set first non destroyable to 3\r\n      }\r\n    }\r\n    let targetX = newX3;\r\n    let targetY = newY3;\r\n    if (\r\n      firstNonDestroyable < firstNonPushable &&\r\n      firstNonDestroyable < firstPushable\r\n      //if a non destroyable comes before the first non pushable and before the first pushable\r\n    ) {\r\n      return true;\r\n      //return true and exit the function\r\n    }\r\n    if (firstNonPushable <= firstPushable) {\r\n      for (const c of enemyHitCandidates) {\r\n        let e = c.enemy;\r\n        let d = c.dist;\r\n        if (d === 3) e.hurt(this.wielder, 0.5);\r\n        else e.hurt(this.wielder, 1);\r\n      }\r\n      //finally bro\r\n      //for the array c of enemyHitCandidates if the enemy distance is 3 only do .5 damage\r\n      //if they're closer do the usual damage\r\n      //hits all candidates in enemyHitCandidates\r\n\r\n      if (\r\n        this.wielder.game.rooms[this.wielder.levelID] ===\r\n        this.wielder.game.room\r\n      )\r\n        Sound.hit();\r\n      this.wielder.drawX = 0.5 * (this.wielder.x - newX);\r\n      this.wielder.drawY = 0.5 * (this.wielder.y - newY);\r\n      GenericParticle.shotgun(\r\n        this.game.rooms[this.wielder.levelID],\r\n        this.wielder.x + 0.5,\r\n        this.wielder.y,\r\n        targetX + 0.5,\r\n        targetY,\r\n        \"black\"\r\n      );\r\n      GenericParticle.shotgun(\r\n        this.game.rooms[this.wielder.levelID],\r\n        this.wielder.x + 0.5,\r\n        this.wielder.y,\r\n        targetX + 0.5,\r\n        targetY,\r\n        \"#ffddff\"\r\n      );\r\n      let gp = new GenericParticle(\r\n        this.game.rooms[this.wielder.levelID],\r\n        0.5 * (newX + this.wielder.x) + 0.5,\r\n        0.5 * (newY + this.wielder.y),\r\n        0,\r\n        1,\r\n        0,\r\n        0,\r\n        0,\r\n        \"white\",\r\n        0\r\n      );\r\n      gp.expirationTimer = 10;\r\n      this.game.rooms[this.wielder.levelID].particles.push(gp);\r\n      //this.game.levels[this.wielder.levelID].particles.push(new SlashParticle(newX, newY));\r\n      //this.game.levels[this.wielder.levelID].particles.push(new SlashParticle(newX2, newY2));\r\n      //this.game.levels[this.wielder.levelID].particles.push(new SlashParticle(newX3, newY3));\r\n      this.game.rooms[this.wielder.levelID].tick(this.wielder);\r\n      if (this.wielder === this.game.players[this.game.localPlayerID])\r\n        this.game.shakeScreen(10 * this.wielder.drawX, 10 * this.wielder.drawY);\r\n\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  getDescription = (): string => {\r\n    return \"SHOTGUN\\nRange 3, penetration\";\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Weapon } from \"./weapon\";\r\nimport { Room } from \"../room\";\r\nimport { Sound } from \"../sound\";\r\nimport { SlashParticle } from \"../particle/slashParticle\";\r\nimport { Crate } from \"../entity/crate\";\r\nimport { Barrel } from \"../entity/barrel\";\r\n\r\nexport class Spear extends Weapon {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 24;\r\n    this.tileY = 0;\r\n  }\r\n\r\n  weaponMove = (newX: number, newY: number): boolean => {\r\n    let newX2 = 2 * newX - this.wielder.x;\r\n    let newY2 = 2 * newY - this.wielder.y;\r\n    let flag = false;\r\n    let enemyHitCandidates = [];\r\n    for (let e of this.game.rooms[this.wielder.levelID].entities) {\r\n      if (e.destroyable) {\r\n        if (e.pointIn(newX, newY)) {\r\n          if (e.pushable) return true;\r\n          else {\r\n            e.hurt(this.wielder, 1);\r\n\r\n            flag = true;\r\n          }\r\n        }\r\n        if (e.pointIn(newX2, newY2) && !this.game.rooms[this.wielder.levelID].roomArray[newX][newY].isSolid()) {\r\n          if (!e.pushable) enemyHitCandidates.push(e);\r\n        }\r\n      }\r\n    }\r\n    if (!flag && enemyHitCandidates.length > 0) {\r\n      for (const e of enemyHitCandidates) e.hurt(this.wielder, 1);\r\n      if (this.wielder.game.room === this.wielder.game.rooms[this.wielder.levelID]) Sound.hit();\r\n      this.wielder.drawX = 0.5 * (this.wielder.x - newX);\r\n      this.wielder.drawY = 0.5 * (this.wielder.y - newY);\r\n      this.game.rooms[this.wielder.levelID].particles.push(new SlashParticle(newX, newY));\r\n      this.game.rooms[this.wielder.levelID].particles.push(new SlashParticle(newX2, newY2));\r\n      this.game.rooms[this.wielder.levelID].tick(this.wielder);\r\n      if (this.wielder === this.game.players[this.game.localPlayerID])\r\n        this.game.shakeScreen(10 * this.wielder.drawX, 10 * this.wielder.drawY);\r\n      return false;\r\n    }\r\n    if (flag) {\r\n      if (this.wielder.game.room === this.wielder.game.rooms[this.wielder.levelID]) Sound.hit();\r\n      this.wielder.drawX = 0.5 * (this.wielder.x - newX);\r\n      this.wielder.drawY = 0.5 * (this.wielder.y - newY);\r\n      this.game.rooms[this.wielder.levelID].particles.push(new SlashParticle(newX, newY));\r\n      this.game.rooms[this.wielder.levelID].tick(this.wielder);\r\n      if (this.wielder === this.game.players[this.game.localPlayerID])\r\n        this.game.shakeScreen(10 * this.wielder.drawX, 10 * this.wielder.drawY);\r\n    }\r\n    return !flag;\r\n  };\r\n\r\n  getDescription = (): string => {\r\n    return \"SPEAR\\nRange 2\";\r\n  };\r\n}\r\n","import { Game } from \"../game\";\r\nimport { Weapon } from \"./weapon\";\r\nimport { Room } from \"../room\";\r\nimport { Sound } from \"../sound\";\r\nimport { SlashParticle } from \"../particle/slashParticle\";\r\nimport { Crate } from \"../entity/crate\";\r\nimport { Barrel } from \"../entity/barrel\";\r\nimport { Player } from \"../player\";\r\nimport { Inventory } from \"../inventory\";\r\nimport { WizardFireball } from \"../projectile/wizardFireball\";\r\nimport { PlayerFireball } from \"../projectile/playerFireball\";\r\n\r\nexport class Spellbook extends Weapon {\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    this.tileX = 25;\r\n    this.tileY = 0;\r\n    this.canMine = true;\r\n  }\r\n\r\n  weaponMove = (newX: number, newY: number): boolean => {\r\n    let flag = false;\r\n    let difX = newX - this.x;\r\n    let difY = newY - this.y;\r\n\r\n    for (let e of this.game.rooms[this.wielder.levelID].entities) {\r\n      if (\r\n        (e.destroyable || e.pushable) &&\r\n        e.pointIn(newX, newY) &&\r\n        !this.game.rooms[this.wielder.levelID].roomArray[e.x][e.y].isSolid()\r\n      ) {\r\n        e.hurt(this.wielder, 1);\r\n\r\n\r\n        this.game.rooms[this.wielder.levelID].particles.push(\r\n          new PlayerFireball(e.x, e.y)\r\n        );\r\n        flag = true;\r\n      }\r\n    }\r\n\r\n    if (flag) {\r\n      if (\r\n        this.wielder.game.rooms[this.wielder.levelID] ===\r\n        this.wielder.game.room\r\n      )\r\n        Sound.hit();\r\n      this.wielder.drawX = 0.5 * (this.wielder.x - newX);\r\n      this.wielder.drawY = 0.5 * (this.wielder.y - newY);\r\n\r\n      this.game.rooms[this.wielder.levelID].tick(this.wielder);\r\n      if (this.wielder === this.game.players[this.game.localPlayerID])\r\n        this.game.shakeScreen(10 * this.wielder.drawX, 10 * this.wielder.drawY);\r\n    }\r\n    return !flag;\r\n  };\r\n\r\n  getDescription = (): string => {\r\n    return \"SPELLBOOK\\ncareful\";\r\n  };\r\n}\r\n","import { Room } from \"../room\";\r\nimport { Game } from \"../game\";\r\nimport { Equippable } from \"../item/equippable\";\r\nimport { Player } from \"../player\";\r\n\r\nexport class Weapon extends Equippable {\r\n  game: Game;\r\n  canMine: boolean;\r\n\r\n  constructor(level: Room, x: number, y: number) {\r\n    super(level, x, y);\r\n\r\n    if (level) this.game = level.game;\r\n\r\n    this.canMine = false;\r\n  }\r\n\r\n  coEquippable = (other: Equippable): boolean => {\r\n    if (other instanceof Weapon) return false;\r\n    return true;\r\n  };\r\n\r\n  tick = () => { };\r\n\r\n  // returns true if nothing was hit, false if the player should move\r\n  weaponMove = (newX: number, newY: number): boolean => {\r\n    return true;\r\n  };\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/game.ts\");\n",""],"names":[],"sourceRoot":""}